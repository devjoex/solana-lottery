var Ro=Object.defineProperty;var Mo=(n,t,e)=>t in n?Ro(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var re=(n,t,e)=>Mo(n,typeof t!="symbol"?t+"":t,e);import{g as fi,a as Jr}from"./index-CCw_rngq.js";var _n={},gr={},Fi;function To(){if(Fi)return gr;Fi=1,gr.byteLength=l,gr.toByteArray=E,gr.fromByteArray=O;for(var n=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)n[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function c(T){var N=T.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=T.indexOf("=");I===-1&&(I=N);var L=I===N?0:4-I%4;return[I,L]}function l(T){var N=c(T),I=N[0],L=N[1];return(I+L)*3/4-L}function p(T,N,I){return(N+I)*3/4-I}function E(T){var N,I=c(T),L=I[0],Z=I[1],J=new e(p(T,L,Z)),W=0,P=Z>0?L-4:L,V;for(V=0;V<P;V+=4)N=t[T.charCodeAt(V)]<<18|t[T.charCodeAt(V+1)]<<12|t[T.charCodeAt(V+2)]<<6|t[T.charCodeAt(V+3)],J[W++]=N>>16&255,J[W++]=N>>8&255,J[W++]=N&255;return Z===2&&(N=t[T.charCodeAt(V)]<<2|t[T.charCodeAt(V+1)]>>4,J[W++]=N&255),Z===1&&(N=t[T.charCodeAt(V)]<<10|t[T.charCodeAt(V+1)]<<4|t[T.charCodeAt(V+2)]>>2,J[W++]=N>>8&255,J[W++]=N&255),J}function A(T){return n[T>>18&63]+n[T>>12&63]+n[T>>6&63]+n[T&63]}function R(T,N,I){for(var L,Z=[],J=N;J<I;J+=3)L=(T[J]<<16&16711680)+(T[J+1]<<8&65280)+(T[J+2]&255),Z.push(A(L));return Z.join("")}function O(T){for(var N,I=T.length,L=I%3,Z=[],J=16383,W=0,P=I-L;W<P;W+=J)Z.push(R(T,W,W+J>P?P:W+J));return L===1?(N=T[I-1],Z.push(n[N>>2]+n[N<<4&63]+"==")):L===2&&(N=(T[I-2]<<8)+T[I-1],Z.push(n[N>>10]+n[N>>4&63]+n[N<<2&63]+"=")),Z.join("")}return gr}var Ir={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Oi;function Lo(){return Oi||(Oi=1,Ir.read=function(n,t,e,r,s){var i,c,l=s*8-r-1,p=(1<<l)-1,E=p>>1,A=-7,R=e?s-1:0,O=e?-1:1,T=n[t+R];for(R+=O,i=T&(1<<-A)-1,T>>=-A,A+=l;A>0;i=i*256+n[t+R],R+=O,A-=8);for(c=i&(1<<-A)-1,i>>=-A,A+=r;A>0;c=c*256+n[t+R],R+=O,A-=8);if(i===0)i=1-E;else{if(i===p)return c?NaN:(T?-1:1)*(1/0);c=c+Math.pow(2,r),i=i-E}return(T?-1:1)*c*Math.pow(2,i-r)},Ir.write=function(n,t,e,r,s,i){var c,l,p,E=i*8-s-1,A=(1<<E)-1,R=A>>1,O=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=r?0:i-1,N=r?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,c=A):(c=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-c))<1&&(c--,p*=2),c+R>=1?t+=O/p:t+=O*Math.pow(2,1-R),t*p>=2&&(c++,p/=2),c+R>=A?(l=0,c=A):c+R>=1?(l=(t*p-1)*Math.pow(2,s),c=c+R):(l=t*Math.pow(2,R-1)*Math.pow(2,s),c=0));s>=8;n[e+T]=l&255,T+=N,l/=256,s-=8);for(c=c<<s|l,E+=s;E>0;n[e+T]=c&255,T+=N,c/=256,E-=8);n[e+T-N]|=I*128}),Ir}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Pi;function li(){return Pi||(Pi=1,function(n){const t=To(),e=Lo(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=l,n.SlowBuffer=J,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=i(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const m=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(m,f),m.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function c(m){if(m>s)throw new RangeError('The value "'+m+'" is invalid for option "size"');const f=new Uint8Array(m);return Object.setPrototypeOf(f,l.prototype),f}function l(m,f,h){if(typeof m=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(m)}return p(m,f,h)}l.poolSize=8192;function p(m,f,h){if(typeof m=="string")return O(m,f);if(ArrayBuffer.isView(m))return N(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(we(m,ArrayBuffer)||m&&we(m.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(m,SharedArrayBuffer)||m&&we(m.buffer,SharedArrayBuffer)))return I(m,f,h);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=m.valueOf&&m.valueOf();if(B!=null&&B!==m)return l.from(B,f,h);const C=L(m);if(C)return C;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return l.from(m[Symbol.toPrimitive]("string"),f,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}l.from=function(m,f,h){return p(m,f,h)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function E(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function A(m,f,h){return E(m),m<=0?c(m):f!==void 0?typeof h=="string"?c(m).fill(f,h):c(m).fill(f):c(m)}l.alloc=function(m,f,h){return A(m,f,h)};function R(m){return E(m),c(m<0?0:Z(m)|0)}l.allocUnsafe=function(m){return R(m)},l.allocUnsafeSlow=function(m){return R(m)};function O(m,f){if((typeof f!="string"||f==="")&&(f="utf8"),!l.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const h=W(m,f)|0;let B=c(h);const C=B.write(m,f);return C!==h&&(B=B.slice(0,C)),B}function T(m){const f=m.length<0?0:Z(m.length)|0,h=c(f);for(let B=0;B<f;B+=1)h[B]=m[B]&255;return h}function N(m){if(we(m,Uint8Array)){const f=new Uint8Array(m);return I(f.buffer,f.byteOffset,f.byteLength)}return T(m)}function I(m,f,h){if(f<0||m.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<f+(h||0))throw new RangeError('"length" is outside of buffer bounds');let B;return f===void 0&&h===void 0?B=new Uint8Array(m):h===void 0?B=new Uint8Array(m,f):B=new Uint8Array(m,f,h),Object.setPrototypeOf(B,l.prototype),B}function L(m){if(l.isBuffer(m)){const f=Z(m.length)|0,h=c(f);return h.length===0||m.copy(h,0,0,f),h}if(m.length!==void 0)return typeof m.length!="number"||Mt(m.length)?c(0):T(m);if(m.type==="Buffer"&&Array.isArray(m.data))return T(m.data)}function Z(m){if(m>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return m|0}function J(m){return+m!=m&&(m=0),l.alloc(+m)}l.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==l.prototype},l.compare=function(f,h){if(we(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),we(h,Uint8Array)&&(h=l.from(h,h.offset,h.byteLength)),!l.isBuffer(f)||!l.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===h)return 0;let B=f.length,C=h.length;for(let z=0,G=Math.min(B,C);z<G;++z)if(f[z]!==h[z]){B=f[z],C=h[z];break}return B<C?-1:C<B?1:0},l.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(f,h){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return l.alloc(0);let B;if(h===void 0)for(h=0,B=0;B<f.length;++B)h+=f[B].length;const C=l.allocUnsafe(h);let z=0;for(B=0;B<f.length;++B){let G=f[B];if(we(G,Uint8Array))z+G.length>C.length?(l.isBuffer(G)||(G=l.from(G)),G.copy(C,z)):Uint8Array.prototype.set.call(C,G,z);else if(l.isBuffer(G))G.copy(C,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=G.length}return C};function W(m,f){if(l.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||we(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const h=m.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&h===0)return 0;let C=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return Et(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return kt(m).length;default:if(C)return B?-1:Et(m).length;f=(""+f).toLowerCase(),C=!0}}l.byteLength=W;function P(m,f,h){let B=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,f>>>=0,h<=f))return"";for(m||(m="utf8");;)switch(m){case"hex":return x(this,f,h);case"utf8":case"utf-8":return o(this,f,h);case"ascii":return S(this,f,h);case"latin1":case"binary":return v(this,f,h);case"base64":return b(this,f,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,f,h);default:if(B)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),B=!0}}l.prototype._isBuffer=!0;function V(m,f,h){const B=m[f];m[f]=m[h],m[h]=B}l.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<f;h+=2)V(this,h,h+1);return this},l.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<f;h+=4)V(this,h,h+3),V(this,h+1,h+2);return this},l.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<f;h+=8)V(this,h,h+7),V(this,h+1,h+6),V(this,h+2,h+5),V(this,h+3,h+4);return this},l.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?o(this,0,f):P.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(f){if(!l.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:l.compare(this,f)===0},l.prototype.inspect=function(){let f="";const h=n.INSPECT_MAX_BYTES;return f=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(f+=" ... "),"<Buffer "+f+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(f,h,B,C,z){if(we(f,Uint8Array)&&(f=l.from(f,f.offset,f.byteLength)),!l.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(h===void 0&&(h=0),B===void 0&&(B=f?f.length:0),C===void 0&&(C=0),z===void 0&&(z=this.length),h<0||B>f.length||C<0||z>this.length)throw new RangeError("out of range index");if(C>=z&&h>=B)return 0;if(C>=z)return-1;if(h>=B)return 1;if(h>>>=0,B>>>=0,C>>>=0,z>>>=0,this===f)return 0;let G=z-C,mt=B-h;const ht=Math.min(G,mt),lt=this.slice(C,z),It=f.slice(h,B);for(let ut=0;ut<ht;++ut)if(lt[ut]!==It[ut]){G=lt[ut],mt=It[ut];break}return G<mt?-1:mt<G?1:0};function Y(m,f,h,B,C){if(m.length===0)return-1;if(typeof h=="string"?(B=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Mt(h)&&(h=C?0:m.length-1),h<0&&(h=m.length+h),h>=m.length){if(C)return-1;h=m.length-1}else if(h<0)if(C)h=0;else return-1;if(typeof f=="string"&&(f=l.from(f,B)),l.isBuffer(f))return f.length===0?-1:rt(m,f,h,B,C);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(m,f,h):Uint8Array.prototype.lastIndexOf.call(m,f,h):rt(m,[f],h,B,C);throw new TypeError("val must be string, number or Buffer")}function rt(m,f,h,B,C){let z=1,G=m.length,mt=f.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(m.length<2||f.length<2)return-1;z=2,G/=2,mt/=2,h/=2}function ht(It,ut){return z===1?It[ut]:It.readUInt16BE(ut*z)}let lt;if(C){let It=-1;for(lt=h;lt<G;lt++)if(ht(m,lt)===ht(f,It===-1?0:lt-It)){if(It===-1&&(It=lt),lt-It+1===mt)return It*z}else It!==-1&&(lt-=lt-It),It=-1}else for(h+mt>G&&(h=G-mt),lt=h;lt>=0;lt--){let It=!0;for(let ut=0;ut<mt;ut++)if(ht(m,lt+ut)!==ht(f,ut)){It=!1;break}if(It)return lt}return-1}l.prototype.includes=function(f,h,B){return this.indexOf(f,h,B)!==-1},l.prototype.indexOf=function(f,h,B){return Y(this,f,h,B,!0)},l.prototype.lastIndexOf=function(f,h,B){return Y(this,f,h,B,!1)};function nt(m,f,h,B){h=Number(h)||0;const C=m.length-h;B?(B=Number(B),B>C&&(B=C)):B=C;const z=f.length;B>z/2&&(B=z/2);let G;for(G=0;G<B;++G){const mt=parseInt(f.substr(G*2,2),16);if(Mt(mt))return G;m[h+G]=mt}return G}function K(m,f,h,B){return Bt(Et(f,m.length-h),m,h,B)}function F(m,f,h,B){return Bt(Rt(f),m,h,B)}function q(m,f,h,B){return Bt(kt(f),m,h,B)}function j(m,f,h,B){return Bt(Qe(f,m.length-h),m,h,B)}l.prototype.write=function(f,h,B,C){if(h===void 0)C="utf8",B=this.length,h=0;else if(B===void 0&&typeof h=="string")C=h,B=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(B)?(B=B>>>0,C===void 0&&(C="utf8")):(C=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-h;if((B===void 0||B>z)&&(B=z),f.length>0&&(B<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");let G=!1;for(;;)switch(C){case"hex":return nt(this,f,h,B);case"utf8":case"utf-8":return K(this,f,h,B);case"ascii":case"latin1":case"binary":return F(this,f,h,B);case"base64":return q(this,f,h,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,f,h,B);default:if(G)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),G=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function b(m,f,h){return f===0&&h===m.length?t.fromByteArray(m):t.fromByteArray(m.slice(f,h))}function o(m,f,h){h=Math.min(m.length,h);const B=[];let C=f;for(;C<h;){const z=m[C];let G=null,mt=z>239?4:z>223?3:z>191?2:1;if(C+mt<=h){let ht,lt,It,ut;switch(mt){case 1:z<128&&(G=z);break;case 2:ht=m[C+1],(ht&192)===128&&(ut=(z&31)<<6|ht&63,ut>127&&(G=ut));break;case 3:ht=m[C+1],lt=m[C+2],(ht&192)===128&&(lt&192)===128&&(ut=(z&15)<<12|(ht&63)<<6|lt&63,ut>2047&&(ut<55296||ut>57343)&&(G=ut));break;case 4:ht=m[C+1],lt=m[C+2],It=m[C+3],(ht&192)===128&&(lt&192)===128&&(It&192)===128&&(ut=(z&15)<<18|(ht&63)<<12|(lt&63)<<6|It&63,ut>65535&&ut<1114112&&(G=ut))}}G===null?(G=65533,mt=1):G>65535&&(G-=65536,B.push(G>>>10&1023|55296),G=56320|G&1023),B.push(G),C+=mt}return g(B)}const d=4096;function g(m){const f=m.length;if(f<=d)return String.fromCharCode.apply(String,m);let h="",B=0;for(;B<f;)h+=String.fromCharCode.apply(String,m.slice(B,B+=d));return h}function S(m,f,h){let B="";h=Math.min(m.length,h);for(let C=f;C<h;++C)B+=String.fromCharCode(m[C]&127);return B}function v(m,f,h){let B="";h=Math.min(m.length,h);for(let C=f;C<h;++C)B+=String.fromCharCode(m[C]);return B}function x(m,f,h){const B=m.length;(!f||f<0)&&(f=0),(!h||h<0||h>B)&&(h=B);let C="";for(let z=f;z<h;++z)C+=Ut[m[z]];return C}function k(m,f,h){const B=m.slice(f,h);let C="";for(let z=0;z<B.length-1;z+=2)C+=String.fromCharCode(B[z]+B[z+1]*256);return C}l.prototype.slice=function(f,h){const B=this.length;f=~~f,h=h===void 0?B:~~h,f<0?(f+=B,f<0&&(f=0)):f>B&&(f=B),h<0?(h+=B,h<0&&(h=0)):h>B&&(h=B),h<f&&(h=f);const C=this.subarray(f,h);return Object.setPrototypeOf(C,l.prototype),C};function y(m,f,h){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+f>h)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(f,h,B){f=f>>>0,h=h>>>0,B||y(f,h,this.length);let C=this[f],z=1,G=0;for(;++G<h&&(z*=256);)C+=this[f+G]*z;return C},l.prototype.readUintBE=l.prototype.readUIntBE=function(f,h,B){f=f>>>0,h=h>>>0,B||y(f,h,this.length);let C=this[f+--h],z=1;for(;h>0&&(z*=256);)C+=this[f+--h]*z;return C},l.prototype.readUint8=l.prototype.readUInt8=function(f,h){return f=f>>>0,h||y(f,1,this.length),this[f]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(f,h){return f=f>>>0,h||y(f,2,this.length),this[f]|this[f+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(f,h){return f=f>>>0,h||y(f,2,this.length),this[f]<<8|this[f+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(f,h){return f=f>>>0,h||y(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(f,h){return f=f>>>0,h||y(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},l.prototype.readBigUInt64LE=Be(function(f){f=f>>>0,At(f,"offset");const h=this[f],B=this[f+7];(h===void 0||B===void 0)&&gt(f,this.length-8);const C=h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,z=this[++f]+this[++f]*2**8+this[++f]*2**16+B*2**24;return BigInt(C)+(BigInt(z)<<BigInt(32))}),l.prototype.readBigUInt64BE=Be(function(f){f=f>>>0,At(f,"offset");const h=this[f],B=this[f+7];(h===void 0||B===void 0)&&gt(f,this.length-8);const C=h*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],z=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+B;return(BigInt(C)<<BigInt(32))+BigInt(z)}),l.prototype.readIntLE=function(f,h,B){f=f>>>0,h=h>>>0,B||y(f,h,this.length);let C=this[f],z=1,G=0;for(;++G<h&&(z*=256);)C+=this[f+G]*z;return z*=128,C>=z&&(C-=Math.pow(2,8*h)),C},l.prototype.readIntBE=function(f,h,B){f=f>>>0,h=h>>>0,B||y(f,h,this.length);let C=h,z=1,G=this[f+--C];for(;C>0&&(z*=256);)G+=this[f+--C]*z;return z*=128,G>=z&&(G-=Math.pow(2,8*h)),G},l.prototype.readInt8=function(f,h){return f=f>>>0,h||y(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},l.prototype.readInt16LE=function(f,h){f=f>>>0,h||y(f,2,this.length);const B=this[f]|this[f+1]<<8;return B&32768?B|4294901760:B},l.prototype.readInt16BE=function(f,h){f=f>>>0,h||y(f,2,this.length);const B=this[f+1]|this[f]<<8;return B&32768?B|4294901760:B},l.prototype.readInt32LE=function(f,h){return f=f>>>0,h||y(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},l.prototype.readInt32BE=function(f,h){return f=f>>>0,h||y(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},l.prototype.readBigInt64LE=Be(function(f){f=f>>>0,At(f,"offset");const h=this[f],B=this[f+7];(h===void 0||B===void 0)&&gt(f,this.length-8);const C=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(B<<24);return(BigInt(C)<<BigInt(32))+BigInt(h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),l.prototype.readBigInt64BE=Be(function(f){f=f>>>0,At(f,"offset");const h=this[f],B=this[f+7];(h===void 0||B===void 0)&&gt(f,this.length-8);const C=(h<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(C)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+B)}),l.prototype.readFloatLE=function(f,h){return f=f>>>0,h||y(f,4,this.length),e.read(this,f,!0,23,4)},l.prototype.readFloatBE=function(f,h){return f=f>>>0,h||y(f,4,this.length),e.read(this,f,!1,23,4)},l.prototype.readDoubleLE=function(f,h){return f=f>>>0,h||y(f,8,this.length),e.read(this,f,!0,52,8)},l.prototype.readDoubleBE=function(f,h){return f=f>>>0,h||y(f,8,this.length),e.read(this,f,!1,52,8)};function a(m,f,h,B,C,z){if(!l.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>C||f<z)throw new RangeError('"value" argument is out of bounds');if(h+B>m.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(f,h,B,C){if(f=+f,h=h>>>0,B=B>>>0,!C){const mt=Math.pow(2,8*B)-1;a(this,f,h,B,mt,0)}let z=1,G=0;for(this[h]=f&255;++G<B&&(z*=256);)this[h+G]=f/z&255;return h+B},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(f,h,B,C){if(f=+f,h=h>>>0,B=B>>>0,!C){const mt=Math.pow(2,8*B)-1;a(this,f,h,B,mt,0)}let z=B-1,G=1;for(this[h+z]=f&255;--z>=0&&(G*=256);)this[h+z]=f/G&255;return h+B},l.prototype.writeUint8=l.prototype.writeUInt8=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,1,255,0),this[h]=f&255,h+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,2,65535,0),this[h]=f&255,this[h+1]=f>>>8,h+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,2,65535,0),this[h]=f>>>8,this[h+1]=f&255,h+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,4,4294967295,0),this[h+3]=f>>>24,this[h+2]=f>>>16,this[h+1]=f>>>8,this[h]=f&255,h+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,4,4294967295,0),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4};function u(m,f,h,B,C){dt(f,B,C,m,h,7);let z=Number(f&BigInt(4294967295));m[h++]=z,z=z>>8,m[h++]=z,z=z>>8,m[h++]=z,z=z>>8,m[h++]=z;let G=Number(f>>BigInt(32)&BigInt(4294967295));return m[h++]=G,G=G>>8,m[h++]=G,G=G>>8,m[h++]=G,G=G>>8,m[h++]=G,h}function w(m,f,h,B,C){dt(f,B,C,m,h,7);let z=Number(f&BigInt(4294967295));m[h+7]=z,z=z>>8,m[h+6]=z,z=z>>8,m[h+5]=z,z=z>>8,m[h+4]=z;let G=Number(f>>BigInt(32)&BigInt(4294967295));return m[h+3]=G,G=G>>8,m[h+2]=G,G=G>>8,m[h+1]=G,G=G>>8,m[h]=G,h+8}l.prototype.writeBigUInt64LE=Be(function(f,h=0){return u(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Be(function(f,h=0){return w(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(f,h,B,C){if(f=+f,h=h>>>0,!C){const ht=Math.pow(2,8*B-1);a(this,f,h,B,ht-1,-ht)}let z=0,G=1,mt=0;for(this[h]=f&255;++z<B&&(G*=256);)f<0&&mt===0&&this[h+z-1]!==0&&(mt=1),this[h+z]=(f/G>>0)-mt&255;return h+B},l.prototype.writeIntBE=function(f,h,B,C){if(f=+f,h=h>>>0,!C){const ht=Math.pow(2,8*B-1);a(this,f,h,B,ht-1,-ht)}let z=B-1,G=1,mt=0;for(this[h+z]=f&255;--z>=0&&(G*=256);)f<0&&mt===0&&this[h+z+1]!==0&&(mt=1),this[h+z]=(f/G>>0)-mt&255;return h+B},l.prototype.writeInt8=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,1,127,-128),f<0&&(f=255+f+1),this[h]=f&255,h+1},l.prototype.writeInt16LE=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,2,32767,-32768),this[h]=f&255,this[h+1]=f>>>8,h+2},l.prototype.writeInt16BE=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,2,32767,-32768),this[h]=f>>>8,this[h+1]=f&255,h+2},l.prototype.writeInt32LE=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,4,2147483647,-2147483648),this[h]=f&255,this[h+1]=f>>>8,this[h+2]=f>>>16,this[h+3]=f>>>24,h+4},l.prototype.writeInt32BE=function(f,h,B){return f=+f,h=h>>>0,B||a(this,f,h,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4},l.prototype.writeBigInt64LE=Be(function(f,h=0){return u(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Be(function(f,h=0){return w(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _(m,f,h,B,C,z){if(h+B>m.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function U(m,f,h,B,C){return f=+f,h=h>>>0,C||_(m,f,h,4),e.write(m,f,h,B,23,4),h+4}l.prototype.writeFloatLE=function(f,h,B){return U(this,f,h,!0,B)},l.prototype.writeFloatBE=function(f,h,B){return U(this,f,h,!1,B)};function $(m,f,h,B,C){return f=+f,h=h>>>0,C||_(m,f,h,8),e.write(m,f,h,B,52,8),h+8}l.prototype.writeDoubleLE=function(f,h,B){return $(this,f,h,!0,B)},l.prototype.writeDoubleBE=function(f,h,B){return $(this,f,h,!1,B)},l.prototype.copy=function(f,h,B,C){if(!l.isBuffer(f))throw new TypeError("argument should be a Buffer");if(B||(B=0),!C&&C!==0&&(C=this.length),h>=f.length&&(h=f.length),h||(h=0),C>0&&C<B&&(C=B),C===B||f.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),f.length-h<C-B&&(C=f.length-h+B);const z=C-B;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,B,C):Uint8Array.prototype.set.call(f,this.subarray(B,C),h),z},l.prototype.fill=function(f,h,B,C){if(typeof f=="string"){if(typeof h=="string"?(C=h,h=0,B=this.length):typeof B=="string"&&(C=B,B=this.length),C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!l.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(f.length===1){const G=f.charCodeAt(0);(C==="utf8"&&G<128||C==="latin1")&&(f=G)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(h<0||this.length<h||this.length<B)throw new RangeError("Out of range index");if(B<=h)return this;h=h>>>0,B=B===void 0?this.length:B>>>0,f||(f=0);let z;if(typeof f=="number")for(z=h;z<B;++z)this[z]=f;else{const G=l.isBuffer(f)?f:l.from(f,C),mt=G.length;if(mt===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(z=0;z<B-h;++z)this[z+h]=G[z%mt]}return this};const tt={};function ot(m,f,h){tt[m]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(C){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:C,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}ot("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ot("ERR_INVALID_ARG_TYPE",function(m,f){return`The "${m}" argument must be of type number. Received type ${typeof f}`},TypeError),ot("ERR_OUT_OF_RANGE",function(m,f,h){let B=`The value of "${m}" is out of range.`,C=h;return Number.isInteger(h)&&Math.abs(h)>2**32?C=xt(String(h)):typeof h=="bigint"&&(C=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(C=xt(C)),C+="n"),B+=` It must be ${f}. Received ${C}`,B},RangeError);function xt(m){let f="",h=m.length;const B=m[0]==="-"?1:0;for(;h>=B+4;h-=3)f=`_${m.slice(h-3,h)}${f}`;return`${m.slice(0,h)}${f}`}function pt(m,f,h){At(f,"offset"),(m[f]===void 0||m[f+h]===void 0)&&gt(f,m.length-(h+1))}function dt(m,f,h,B,C,z){if(m>h||m<f){const G=typeof f=="bigint"?"n":"";let mt;throw f===0||f===BigInt(0)?mt=`>= 0${G} and < 2${G} ** ${(z+1)*8}${G}`:mt=`>= -(2${G} ** ${(z+1)*8-1}${G}) and < 2 ** ${(z+1)*8-1}${G}`,new tt.ERR_OUT_OF_RANGE("value",mt,m)}pt(B,C,z)}function At(m,f){if(typeof m!="number")throw new tt.ERR_INVALID_ARG_TYPE(f,"number",m)}function gt(m,f,h){throw Math.floor(m)!==m?(At(m,h),new tt.ERR_OUT_OF_RANGE("offset","an integer",m)):f<0?new tt.ERR_BUFFER_OUT_OF_BOUNDS:new tt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,m)}const vt=/[^+/0-9A-Za-z-_]/g;function me(m){if(m=m.split("=")[0],m=m.trim().replace(vt,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function Et(m,f){f=f||1/0;let h;const B=m.length;let C=null;const z=[];for(let G=0;G<B;++G){if(h=m.charCodeAt(G),h>55295&&h<57344){if(!C){if(h>56319){(f-=3)>-1&&z.push(239,191,189);continue}else if(G+1===B){(f-=3)>-1&&z.push(239,191,189);continue}C=h;continue}if(h<56320){(f-=3)>-1&&z.push(239,191,189),C=h;continue}h=(C-55296<<10|h-56320)+65536}else C&&(f-=3)>-1&&z.push(239,191,189);if(C=null,h<128){if((f-=1)<0)break;z.push(h)}else if(h<2048){if((f-=2)<0)break;z.push(h>>6|192,h&63|128)}else if(h<65536){if((f-=3)<0)break;z.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((f-=4)<0)break;z.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return z}function Rt(m){const f=[];for(let h=0;h<m.length;++h)f.push(m.charCodeAt(h)&255);return f}function Qe(m,f){let h,B,C;const z=[];for(let G=0;G<m.length&&!((f-=2)<0);++G)h=m.charCodeAt(G),B=h>>8,C=h%256,z.push(C),z.push(B);return z}function kt(m){return t.toByteArray(me(m))}function Bt(m,f,h,B){let C;for(C=0;C<B&&!(C+h>=f.length||C>=m.length);++C)f[C+h]=m[C];return C}function we(m,f){return m instanceof f||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===f.name}function Mt(m){return m!==m}const Ut=function(){const m="0123456789abcdef",f=new Array(256);for(let h=0;h<16;++h){const B=h*16;for(let C=0;C<16;++C)f[B+C]=m[h]+m[C]}return f}();function Be(m){return typeof BigInt>"u"?Nt:m}function Nt(){throw new Error("BigInt not supported")}}(_n)),_n}var wt=li();const tr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Co(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function ei(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function vr(n,...t){if(!Co(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function Uo(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ei(n.outputLen),ei(n.blockLen)}function Pr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function No(n,t){vr(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function cr(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function kn(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Ie(n,t){return n<<32-t|n>>>t}function Fo(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function hi(n){return typeof n=="string"&&(n=Fo(n)),vr(n),n}function Oo(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];vr(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class Is{}function Rs(n){const t=r=>n().update(hi(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Ms(n=32){if(tr&&typeof tr.getRandomValues=="function")return tr.getRandomValues(new Uint8Array(n));if(tr&&typeof tr.randomBytes=="function")return Uint8Array.from(tr.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function Po(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),c=Number(e>>s&i),l=Number(e&i),p=r?4:0,E=r?0:4;n.setUint32(t+p,c,r),n.setUint32(t+E,l,r)}function qo(n,t,e){return n&t^~n&e}function zo(n,t,e){return n&t^n&e^t&e}class Ts extends Is{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=kn(this.buffer)}update(t){Pr(this),t=hi(t),vr(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let c=0;c<i;){const l=Math.min(s-this.pos,i-c);if(l===s){const p=kn(t);for(;s<=i-c;c+=s)this.process(p,c);continue}r.set(t.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Pr(this),No(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:c}=this;e[c++]=128,cr(this.buffer.subarray(c)),this.padOffset>s-c&&(this.process(r,0),c=0);for(let R=c;R<s;R++)e[R]=0;Po(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=kn(t),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const E=p/4,A=this.get();if(E>A.length)throw new Error("_sha2: outputLen bigger than state");for(let R=0;R<E;R++)l.setUint32(4*R,A[R],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:c,pos:l}=this;return t.destroyed=c,t.finished=i,t.length=s,t.pos=l,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const qe=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ue=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Rr=BigInt(2**32-1),qi=BigInt(32);function Do(n,t=!1){return t?{h:Number(n&Rr),l:Number(n>>qi&Rr)}:{h:Number(n>>qi&Rr)|0,l:Number(n&Rr)|0}}function Ho(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:c,l}=Do(n[i],t);[r[i],s[i]]=[c,l]}return[r,s]}const zi=(n,t,e)=>n>>>e,Di=(n,t,e)=>n<<32-e|t>>>e,er=(n,t,e)=>n>>>e|t<<32-e,rr=(n,t,e)=>n<<32-e|t>>>e,Mr=(n,t,e)=>n<<64-e|t>>>e-32,Tr=(n,t,e)=>n>>>e-32|t<<64-e;function Le(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const Ko=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Wo=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,$o=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Vo=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,Go=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),jo=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,Zo=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ze=new Uint32Array(64);class Yo extends Ts{constructor(t=32){super(64,t,8,!1),this.A=qe[0]|0,this.B=qe[1]|0,this.C=qe[2]|0,this.D=qe[3]|0,this.E=qe[4]|0,this.F=qe[5]|0,this.G=qe[6]|0,this.H=qe[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:c,G:l,H:p}=this;return[t,e,r,s,i,c,l,p]}set(t,e,r,s,i,c,l,p){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=c|0,this.G=l|0,this.H=p|0}process(t,e){for(let R=0;R<16;R++,e+=4)ze[R]=t.getUint32(e,!1);for(let R=16;R<64;R++){const O=ze[R-15],T=ze[R-2],N=Ie(O,7)^Ie(O,18)^O>>>3,I=Ie(T,17)^Ie(T,19)^T>>>10;ze[R]=I+ze[R-7]+N+ze[R-16]|0}let{A:r,B:s,C:i,D:c,E:l,F:p,G:E,H:A}=this;for(let R=0;R<64;R++){const O=Ie(l,6)^Ie(l,11)^Ie(l,25),T=A+O+qo(l,p,E)+Zo[R]+ze[R]|0,I=(Ie(r,2)^Ie(r,13)^Ie(r,22))+zo(r,s,i)|0;A=E,E=p,p=l,l=c+T|0,c=i,i=s,s=r,r=T+I|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,c=c+this.D|0,l=l+this.E|0,p=p+this.F|0,E=E+this.G|0,A=A+this.H|0,this.set(r,s,i,c,l,p,E,A)}roundClean(){cr(ze)}destroy(){this.set(0,0,0,0,0,0,0,0),cr(this.buffer)}}const Ls=Ho(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Jo=Ls[0],Xo=Ls[1],De=new Uint32Array(80),He=new Uint32Array(80);class Qo extends Ts{constructor(t=64){super(128,t,16,!1),this.Ah=ue[0]|0,this.Al=ue[1]|0,this.Bh=ue[2]|0,this.Bl=ue[3]|0,this.Ch=ue[4]|0,this.Cl=ue[5]|0,this.Dh=ue[6]|0,this.Dl=ue[7]|0,this.Eh=ue[8]|0,this.El=ue[9]|0,this.Fh=ue[10]|0,this.Fl=ue[11]|0,this.Gh=ue[12]|0,this.Gl=ue[13]|0,this.Hh=ue[14]|0,this.Hl=ue[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:c,Dh:l,Dl:p,Eh:E,El:A,Fh:R,Fl:O,Gh:T,Gl:N,Hh:I,Hl:L}=this;return[t,e,r,s,i,c,l,p,E,A,R,O,T,N,I,L]}set(t,e,r,s,i,c,l,p,E,A,R,O,T,N,I,L){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=c|0,this.Dh=l|0,this.Dl=p|0,this.Eh=E|0,this.El=A|0,this.Fh=R|0,this.Fl=O|0,this.Gh=T|0,this.Gl=N|0,this.Hh=I|0,this.Hl=L|0}process(t,e){for(let W=0;W<16;W++,e+=4)De[W]=t.getUint32(e),He[W]=t.getUint32(e+=4);for(let W=16;W<80;W++){const P=De[W-15]|0,V=He[W-15]|0,Y=er(P,V,1)^er(P,V,8)^zi(P,V,7),rt=rr(P,V,1)^rr(P,V,8)^Di(P,V,7),nt=De[W-2]|0,K=He[W-2]|0,F=er(nt,K,19)^Mr(nt,K,61)^zi(nt,K,6),q=rr(nt,K,19)^Tr(nt,K,61)^Di(nt,K,6),j=$o(rt,q,He[W-7],He[W-16]),b=Vo(j,Y,F,De[W-7],De[W-16]);De[W]=b|0,He[W]=j|0}let{Ah:r,Al:s,Bh:i,Bl:c,Ch:l,Cl:p,Dh:E,Dl:A,Eh:R,El:O,Fh:T,Fl:N,Gh:I,Gl:L,Hh:Z,Hl:J}=this;for(let W=0;W<80;W++){const P=er(R,O,14)^er(R,O,18)^Mr(R,O,41),V=rr(R,O,14)^rr(R,O,18)^Tr(R,O,41),Y=R&T^~R&I,rt=O&N^~O&L,nt=Go(J,V,rt,Xo[W],He[W]),K=jo(nt,Z,P,Y,Jo[W],De[W]),F=nt|0,q=er(r,s,28)^Mr(r,s,34)^Mr(r,s,39),j=rr(r,s,28)^Tr(r,s,34)^Tr(r,s,39),b=r&i^r&l^i&l,o=s&c^s&p^c&p;Z=I|0,J=L|0,I=T|0,L=N|0,T=R|0,N=O|0,{h:R,l:O}=Le(E|0,A|0,K|0,F|0),E=l|0,A=p|0,l=i|0,p=c|0,i=r|0,c=s|0;const d=Ko(F,j,o);r=Wo(d,K,q,b),s=d|0}({h:r,l:s}=Le(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:c}=Le(this.Bh|0,this.Bl|0,i|0,c|0),{h:l,l:p}=Le(this.Ch|0,this.Cl|0,l|0,p|0),{h:E,l:A}=Le(this.Dh|0,this.Dl|0,E|0,A|0),{h:R,l:O}=Le(this.Eh|0,this.El|0,R|0,O|0),{h:T,l:N}=Le(this.Fh|0,this.Fl|0,T|0,N|0),{h:I,l:L}=Le(this.Gh|0,this.Gl|0,I|0,L|0),{h:Z,l:J}=Le(this.Hh|0,this.Hl|0,Z|0,J|0),this.set(r,s,i,c,l,p,E,A,R,O,T,N,I,L,Z,J)}roundClean(){cr(De,He)}destroy(){cr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Cs=Rs(()=>new Yo),ta=Rs(()=>new Qo);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const di=BigInt(0),ri=BigInt(1);function xr(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function pi(n){if(!xr(n))throw new Error("Uint8Array expected")}function $e(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}function Lr(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Us(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?di:BigInt("0x"+n)}const Ns=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ea=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function ur(n){if(pi(n),Ns)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=ea[n[e]];return t}const Ce={_0:48,_9:57,A:65,F:70,a:97,f:102};function Hi(n){if(n>=Ce._0&&n<=Ce._9)return n-Ce._0;if(n>=Ce.A&&n<=Ce.F)return n-(Ce.A-10);if(n>=Ce.a&&n<=Ce.f)return n-(Ce.a-10)}function qr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Ns)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const c=Hi(n.charCodeAt(i)),l=Hi(n.charCodeAt(i+1));if(c===void 0||l===void 0){const p=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+i)}r[s]=c*16+l}return r}function Ze(n){return Us(ur(n))}function wr(n){return pi(n),Us(ur(Uint8Array.from(n).reverse()))}function Sr(n,t){return qr(n.toString(16).padStart(t*2,"0"))}function zr(n,t){return Sr(n,t).reverse()}function Pt(n,t,e){let r;if(typeof t=="string")try{r=qr(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(xr(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function fr(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];pi(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}const In=n=>typeof n=="bigint"&&di<=n;function gi(n,t,e){return In(n)&&In(t)&&In(e)&&t<=n&&n<e}function _e(n,t,e,r){if(!gi(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function ra(n){let t;for(t=0;n>di;n>>=ri,t+=1);return t}const Xr=n=>(ri<<BigInt(n))-ri,Rn=n=>new Uint8Array(n),Ki=n=>Uint8Array.from(n);function na(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Rn(n),s=Rn(n),i=0;const c=()=>{r.fill(1),s.fill(0),i=0},l=(...R)=>e(s,r,...R),p=(R=Rn(0))=>{s=l(Ki([0]),R),r=l(),R.length!==0&&(s=l(Ki([1]),R),r=l())},E=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let R=0;const O=[];for(;R<t;){r=l();const T=r.slice();O.push(T),R+=r.length}return fr(...O)};return(R,O)=>{c(),p(R);let T;for(;!(T=O(E()));)p();return c(),T}}const ia={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||xr(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Er(n,t,e={}){const r=(s,i,c)=>{const l=ia[i];if(typeof l!="function")throw new Error("invalid validator function");const p=n[s];if(!(c&&p===void 0)&&!l(p,n))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+p)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(e))r(s,i,!0);return n}function Dr(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ye=BigInt(0),ce=BigInt(1),je=BigInt(2),sa=BigInt(3),Fs=BigInt(4),Os=BigInt(5),Ps=BigInt(8);function Tt(n,t){const e=n%t;return e>=ye?e:t+e}function Ft(n,t,e){let r=n;for(;t-- >ye;)r*=r,r%=e;return r}function ni(n,t){if(n===ye)throw new Error("invert: expected non-zero number");if(t<=ye)throw new Error("invert: expected positive modulus, got "+t);let e=Tt(n,t),r=t,s=ye,i=ce;for(;e!==ye;){const l=r/e,p=r%e,E=s-i*l;r=e,e=p,s=i,i=E}if(r!==ce)throw new Error("invert: does not exist");return Tt(s,t)}function qs(n,t){const e=(n.ORDER+ce)/Fs,r=n.pow(t,e);if(!n.eql(n.sqr(r),t))throw new Error("Cannot find square root");return r}function oa(n,t){const e=(n.ORDER-Os)/Ps,r=n.mul(t,je),s=n.pow(r,e),i=n.mul(t,s),c=n.mul(n.mul(i,je),s),l=n.mul(i,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),t))throw new Error("Cannot find square root");return l}function aa(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let t=n-ce,e=0;for(;t%je===ye;)t/=je,e++;let r=je;const s=Br(n);for(;Wi(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return qs;let i=s.pow(r,t);const c=(t+ce)/je;return function(p,E){if(p.is0(E))return E;if(Wi(p,E)!==1)throw new Error("Cannot find square root");let A=e,R=p.mul(p.ONE,i),O=p.pow(E,t),T=p.pow(E,c);for(;!p.eql(O,p.ONE);){if(p.is0(O))return p.ZERO;let N=1,I=p.sqr(O);for(;!p.eql(I,p.ONE);)if(N++,I=p.sqr(I),N===A)throw new Error("Cannot find square root");const L=ce<<BigInt(A-N-1),Z=p.pow(R,L);A=N,R=p.sqr(Z),O=p.mul(O,R),T=p.mul(T,Z)}return T}}function ca(n){return n%Fs===sa?qs:n%Ps===Os?oa:aa(n)}const ua=(n,t)=>(Tt(n,t)&ce)===ce,fa=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function la(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=fa.reduce((r,s)=>(r[s]="function",r),t);return Er(n,e)}function ha(n,t,e){if(e<ye)throw new Error("invalid exponent, negatives unsupported");if(e===ye)return n.ONE;if(e===ce)return t;let r=n.ONE,s=t;for(;e>ye;)e&ce&&(r=n.mul(r,s)),s=n.sqr(s),e>>=ce;return r}function mi(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((c,l,p)=>n.is0(l)?c:(r[p]=c,n.mul(c,l)),n.ONE),i=n.inv(s);return t.reduceRight((c,l,p)=>n.is0(l)?c:(r[p]=n.mul(c,r[p]),n.mul(c,l)),i),r}function Wi(n,t){const e=(n.ORDER-ce)/je,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),c=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!c)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function zs(n,t){t!==void 0&&ei(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Br(n,t,e=!1,r={}){if(n<=ye)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:s,nByteLength:i}=zs(n,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:n,isLE:e,BITS:s,BYTES:i,MASK:Xr(s),ZERO:ye,ONE:ce,create:p=>Tt(p,n),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return ye<=p&&p<n},is0:p=>p===ye,isOdd:p=>(p&ce)===ce,neg:p=>Tt(-p,n),eql:(p,E)=>p===E,sqr:p=>Tt(p*p,n),add:(p,E)=>Tt(p+E,n),sub:(p,E)=>Tt(p-E,n),mul:(p,E)=>Tt(p*E,n),pow:(p,E)=>ha(l,p,E),div:(p,E)=>Tt(p*ni(E,n),n),sqrN:p=>p*p,addN:(p,E)=>p+E,subN:(p,E)=>p-E,mulN:(p,E)=>p*E,inv:p=>ni(p,n),sqrt:r.sqrt||(p=>(c||(c=ca(n)),c(l,p))),toBytes:p=>e?zr(p,i):Sr(p,i),fromBytes:p=>{if(p.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+p.length);return e?wr(p):Ze(p)},invertBatch:p=>mi(l,p),cmov:(p,E,A)=>A?E:p});return Object.freeze(l)}function Ds(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Hs(n){const t=Ds(n);return t+Math.ceil(t/2)}function da(n,t,e=!1){const r=n.length,s=Ds(t),i=Hs(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const c=e?wr(n):Ze(n),l=Tt(c,t-ce)+ce;return e?zr(l,s):Sr(l,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $i=BigInt(0),ii=BigInt(1);function Mn(n,t){const e=t.negate();return n?e:t}function Ks(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function Tn(n,t){Ks(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=Xr(n),c=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:c}}function Vi(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:c}=e;let l=Number(n&s),p=n>>c;l>r&&(l-=i,p+=ii);const E=t*r,A=E+Math.abs(l)-1,R=l===0,O=l<0,T=t%2!==0;return{nextN:p,offset:A,isZero:R,isNeg:O,isNegF:T,offsetF:E}}function pa(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function ga(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Ln=new WeakMap,Ws=new WeakMap;function Cn(n){return Ws.get(n)||1}function $s(n,t){return{constTimeNegate:Mn,hasPrecomputes(e){return Cn(e)!==1},unsafeLadder(e,r,s=n.ZERO){let i=e;for(;r>$i;)r&ii&&(s=s.add(i)),i=i.double(),r>>=ii;return s},precomputeWindow(e,r){const{windows:s,windowSize:i}=Tn(r,t),c=[];let l=e,p=l;for(let E=0;E<s;E++){p=l,c.push(p);for(let A=1;A<i;A++)p=p.add(l),c.push(p);l=p.double()}return c},wNAF(e,r,s){let i=n.ZERO,c=n.BASE;const l=Tn(e,t);for(let p=0;p<l.windows;p++){const{nextN:E,offset:A,isZero:R,isNeg:O,isNegF:T,offsetF:N}=Vi(s,p,l);s=E,R?c=c.add(Mn(T,r[N])):i=i.add(Mn(O,r[A]))}return{p:i,f:c}},wNAFUnsafe(e,r,s,i=n.ZERO){const c=Tn(e,t);for(let l=0;l<c.windows&&s!==$i;l++){const{nextN:p,offset:E,isZero:A,isNeg:R}=Vi(s,l,c);if(s=p,!A){const O=r[E];i=i.add(R?O.negate():O)}}return i},getPrecomputes(e,r,s){let i=Ln.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&Ln.set(r,s(i))),i},wNAFCached(e,r,s){const i=Cn(e);return this.wNAF(i,this.getPrecomputes(i,e,s),r)},wNAFCachedUnsafe(e,r,s,i){const c=Cn(e);return c===1?this.unsafeLadder(e,r,i):this.wNAFUnsafe(c,this.getPrecomputes(c,e,s),r,i)},setWindowSize(e,r){Ks(r,t),Ws.set(e,r),Ln.delete(e)}}}function Vs(n,t,e,r){pa(e,n),ga(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const c=n.ZERO,l=ra(BigInt(s));let p=1;l>12?p=l-3:l>4?p=l-2:l>0&&(p=2);const E=Xr(p),A=new Array(Number(E)+1).fill(c),R=Math.floor((t.BITS-1)/p)*p;let O=c;for(let T=R;T>=0;T-=p){A.fill(c);for(let I=0;I<i;I++){const L=r[I],Z=Number(L>>BigInt(T)&E);A[Z]=A[Z].add(e[I])}let N=c;for(let I=A.length-1,L=c;I>0;I--)L=L.add(A[I]),N=N.add(L);if(O=O.add(N),T!==0)for(let I=0;I<p;I++)O=O.double()}return O}function yi(n){return la(n.Fp),Er(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zs(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Re=BigInt(0),pe=BigInt(1),Gi=BigInt(2),ma=BigInt(8),ya={zip215:!0};function wa(n){const t=yi(n);return Er(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function ba(n){const t=wa(n),{Fp:e,n:r,prehash:s,hash:i,randomBytes:c,nByteLength:l,h:p}=t,E=Gi<<BigInt(l*8)-pe,A=e.create,R=Br(t.n,t.nBitLength);function O(v,x){const k=e.sqr(v),y=e.sqr(x),a=e.add(e.mul(t.a,k),y),u=e.add(e.ONE,e.mul(t.d,e.mul(k,y)));return e.eql(a,u)}if(!O(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const T=t.uvRatio||((v,x)=>{try{return{isValid:!0,value:e.sqrt(v*e.inv(x))}}catch{return{isValid:!1,value:Re}}}),N=t.adjustScalarBytes||(v=>v),I=t.domain||((v,x,k)=>{if($e("phflag",k),x.length||k)throw new Error("Contexts/pre-hash are not supported");return v});function L(v,x,k=!1){const y=k?pe:Re;_e("coordinate "+v,x,y,E)}function Z(v){if(!(v instanceof P))throw new Error("ExtendedPoint expected")}const J=Dr((v,x)=>{const{ex:k,ey:y,ez:a}=v,u=v.is0();x==null&&(x=u?ma:e.inv(a));const w=A(k*x),_=A(y*x),U=A(a*x);if(u)return{x:Re,y:pe};if(U!==pe)throw new Error("invZ was invalid");return{x:w,y:_}}),W=Dr(v=>{const{a:x,d:k}=t;if(v.is0())throw new Error("bad point: ZERO");const{ex:y,ey:a,ez:u,et:w}=v,_=A(y*y),U=A(a*a),$=A(u*u),tt=A($*$),ot=A(_*x),xt=A($*A(ot+U)),pt=A(tt+A(k*A(_*U)));if(xt!==pt)throw new Error("bad point: equation left != right (1)");const dt=A(y*a),At=A(u*w);if(dt!==At)throw new Error("bad point: equation left != right (2)");return!0});class P{constructor(x,k,y,a){L("x",x),L("y",k),L("z",y,!0),L("t",a),this.ex=x,this.ey=k,this.ez=y,this.et=a,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof P)throw new Error("extended point not allowed");const{x:k,y}=x||{};return L("x",k),L("y",y),new P(k,y,pe,A(k*y))}static normalizeZ(x){const k=mi(e,x.map(y=>y.ez));return x.map((y,a)=>y.toAffine(k[a])).map(P.fromAffine)}static msm(x,k){return Vs(P,R,x,k)}_setWindowSize(x){rt.setWindowSize(this,x)}assertValidity(){W(this)}equals(x){Z(x);const{ex:k,ey:y,ez:a}=this,{ex:u,ey:w,ez:_}=x,U=A(k*_),$=A(u*a),tt=A(y*_),ot=A(w*a);return U===$&&tt===ot}is0(){return this.equals(P.ZERO)}negate(){return new P(A(-this.ex),this.ey,this.ez,A(-this.et))}double(){const{a:x}=t,{ex:k,ey:y,ez:a}=this,u=A(k*k),w=A(y*y),_=A(Gi*A(a*a)),U=A(x*u),$=k+y,tt=A(A($*$)-u-w),ot=U+w,xt=ot-_,pt=U-w,dt=A(tt*xt),At=A(ot*pt),gt=A(tt*pt),vt=A(xt*ot);return new P(dt,At,vt,gt)}add(x){Z(x);const{a:k,d:y}=t,{ex:a,ey:u,ez:w,et:_}=this,{ex:U,ey:$,ez:tt,et:ot}=x,xt=A(a*U),pt=A(u*$),dt=A(_*y*ot),At=A(w*tt),gt=A((a+u)*(U+$)-xt-pt),vt=At-dt,me=At+dt,Et=A(pt-k*xt),Rt=A(gt*vt),Qe=A(me*Et),kt=A(gt*Et),Bt=A(vt*me);return new P(Rt,Qe,Bt,kt)}subtract(x){return this.add(x.negate())}wNAF(x){return rt.wNAFCached(this,x,P.normalizeZ)}multiply(x){const k=x;_e("scalar",k,pe,r);const{p:y,f:a}=this.wNAF(k);return P.normalizeZ([y,a])[0]}multiplyUnsafe(x,k=P.ZERO){const y=x;return _e("scalar",y,Re,r),y===Re?Y:this.is0()||y===pe?this:rt.wNAFCachedUnsafe(this,y,P.normalizeZ,k)}isSmallOrder(){return this.multiplyUnsafe(p).is0()}isTorsionFree(){return rt.unsafeLadder(this,r).is0()}toAffine(x){return J(this,x)}clearCofactor(){const{h:x}=t;return x===pe?this:this.multiplyUnsafe(x)}static fromHex(x,k=!1){const{d:y,a}=t,u=e.BYTES;x=Pt("pointHex",x,u),$e("zip215",k);const w=x.slice(),_=x[u-1];w[u-1]=_&-129;const U=wr(w),$=k?E:e.ORDER;_e("pointHex.y",U,Re,$);const tt=A(U*U),ot=A(tt-pe),xt=A(y*tt-a);let{isValid:pt,value:dt}=T(ot,xt);if(!pt)throw new Error("Point.fromHex: invalid y coordinate");const At=(dt&pe)===pe,gt=(_&128)!==0;if(!k&&dt===Re&&gt)throw new Error("Point.fromHex: x=0 and x_0=1");return gt!==At&&(dt=A(-dt)),P.fromAffine({x:dt,y:U})}static fromPrivateKey(x){const{scalar:k}=F(x);return V.multiply(k)}toRawBytes(){const{x,y:k}=this.toAffine(),y=zr(k,e.BYTES);return y[y.length-1]|=x&pe?128:0,y}toHex(){return ur(this.toRawBytes())}}P.BASE=new P(t.Gx,t.Gy,pe,A(t.Gx*t.Gy)),P.ZERO=new P(Re,pe,pe,Re);const{BASE:V,ZERO:Y}=P,rt=$s(P,l*8);function nt(v){return Tt(v,r)}function K(v){return nt(wr(v))}function F(v){const x=e.BYTES;v=Pt("private key",v,x);const k=Pt("hashed private key",i(v),2*x),y=N(k.slice(0,x)),a=k.slice(x,2*x),u=K(y);return{head:y,prefix:a,scalar:u}}function q(v){const{head:x,prefix:k,scalar:y}=F(v),a=V.multiply(y),u=a.toRawBytes();return{head:x,prefix:k,scalar:y,point:a,pointBytes:u}}function j(v){return q(v).pointBytes}function b(v=Uint8Array.of(),...x){const k=fr(...x);return K(i(I(k,Pt("context",v),!!s)))}function o(v,x,k={}){v=Pt("message",v),s&&(v=s(v));const{prefix:y,scalar:a,pointBytes:u}=q(x),w=b(k.context,y,v),_=V.multiply(w).toRawBytes(),U=b(k.context,_,u,v),$=nt(w+U*a);_e("signature.s",$,Re,r);const tt=fr(_,zr($,e.BYTES));return Pt("result",tt,e.BYTES*2)}const d=ya;function g(v,x,k,y=d){const{context:a,zip215:u}=y,w=e.BYTES;v=Pt("signature",v,2*w),x=Pt("message",x),k=Pt("publicKey",k,w),u!==void 0&&$e("zip215",u),s&&(x=s(x));const _=wr(v.slice(w,2*w));let U,$,tt;try{U=P.fromHex(k,u),$=P.fromHex(v.slice(0,w),u),tt=V.multiplyUnsafe(_)}catch{return!1}if(!u&&U.isSmallOrder())return!1;const ot=b(a,$.toRawBytes(),U.toRawBytes(),x);return $.add(U.multiplyUnsafe(ot)).subtract(tt).clearCofactor().equals(P.ZERO)}return V._setWindowSize(8),{CURVE:t,getPublicKey:j,sign:o,verify:g,ExtendedPoint:P,utils:{getExtendedPublicKey:q,randomPrivateKey:()=>c(e.BYTES),precompute(v=8,x=P.BASE){return x._setWindowSize(v),x.multiply(BigInt(3)),x}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ji=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const va=BigInt(1),Zi=BigInt(2);BigInt(3);const xa=BigInt(5),Sa=BigInt(8);function Ea(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=wi,l=n*n%i*n%i,p=Ft(l,Zi,i)*l%i,E=Ft(p,va,i)*n%i,A=Ft(E,xa,i)*E%i,R=Ft(A,t,i)*A%i,O=Ft(R,e,i)*R%i,T=Ft(O,r,i)*O%i,N=Ft(T,s,i)*T%i,I=Ft(N,s,i)*T%i,L=Ft(I,t,i)*A%i;return{pow_p_5_8:Ft(L,Zi,i)*n%i,b2:l}}function Ba(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Aa(n,t){const e=wi,r=Tt(t*t*t,e),s=Tt(r*r*t,e),i=Ea(n*s).pow_p_5_8;let c=Tt(n*r*i,e);const l=Tt(t*c*c,e),p=c,E=Tt(c*ji,e),A=l===n,R=l===Tt(-n,e),O=l===Tt(-n*ji,e);return A&&(c=p),(R||O)&&(c=E),ua(c,e)&&(c=Tt(-c,e)),{isValid:A||R,value:c}}const Yi=Br(wi,void 0,!0),_a={a:Yi.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Yi,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Sa,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ta,randomBytes:Ms,adjustScalarBytes:Ba,uvRatio:Aa},bi=ba(_a);var Fr={exports:{}};const ka={},Ia=Object.freeze(Object.defineProperty({__proto__:null,default:ka},Symbol.toStringTag,{value:"Module"})),Ra=fi(Ia);var Ma=Fr.exports,Ji;function Gs(){return Ji||(Ji=1,function(n){(function(t,e){function r(b,o){if(!b)throw new Error(o||"Assertion failed")}function s(b,o){b.super_=o;var d=function(){};d.prototype=o.prototype,b.prototype=new d,b.prototype.constructor=b}function i(b,o,d){if(i.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((o==="le"||o==="be")&&(d=o,o=10),this._init(b||0,o||10,d||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=Ra.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,d){return o.cmp(d)>0?o:d},i.min=function(o,d){return o.cmp(d)<0?o:d},i.prototype._init=function(o,d,g){if(typeof o=="number")return this._initNumber(o,d,g);if(typeof o=="object")return this._initArray(o,d,g);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),o=o.toString().replace(/\s+/g,"");var S=0;o[0]==="-"&&(S++,this.negative=1),S<o.length&&(d===16?this._parseHex(o,S,g):(this._parseBase(o,d,S),g==="le"&&this._initArray(this.toArray(),d,g)))},i.prototype._initNumber=function(o,d,g){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),d,g)},i.prototype._initArray=function(o,d,g){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var v,x,k=0;if(g==="be")for(S=o.length-1,v=0;S>=0;S-=3)x=o[S]|o[S-1]<<8|o[S-2]<<16,this.words[v]|=x<<k&67108863,this.words[v+1]=x>>>26-k&67108863,k+=24,k>=26&&(k-=26,v++);else if(g==="le")for(S=0,v=0;S<o.length;S+=3)x=o[S]|o[S+1]<<8|o[S+2]<<16,this.words[v]|=x<<k&67108863,this.words[v+1]=x>>>26-k&67108863,k+=24,k>=26&&(k-=26,v++);return this._strip()};function l(b,o){var d=b.charCodeAt(o);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;r(!1,"Invalid character in "+b)}function p(b,o,d){var g=l(b,d);return d-1>=o&&(g|=l(b,d-1)<<4),g}i.prototype._parseHex=function(o,d,g){this.length=Math.ceil((o.length-d)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var v=0,x=0,k;if(g==="be")for(S=o.length-1;S>=d;S-=2)k=p(o,d,S)<<v,this.words[x]|=k&67108863,v>=18?(v-=18,x+=1,this.words[x]|=k>>>26):v+=8;else{var y=o.length-d;for(S=y%2===0?d+1:d;S<o.length;S+=2)k=p(o,d,S)<<v,this.words[x]|=k&67108863,v>=18?(v-=18,x+=1,this.words[x]|=k>>>26):v+=8}this._strip()};function E(b,o,d,g){for(var S=0,v=0,x=Math.min(b.length,d),k=o;k<x;k++){var y=b.charCodeAt(k)-48;S*=g,y>=49?v=y-49+10:y>=17?v=y-17+10:v=y,r(y>=0&&v<g,"Invalid character"),S+=v}return S}i.prototype._parseBase=function(o,d,g){this.words=[0],this.length=1;for(var S=0,v=1;v<=67108863;v*=d)S++;S--,v=v/d|0;for(var x=o.length-g,k=x%S,y=Math.min(x,x-k)+g,a=0,u=g;u<y;u+=S)a=E(o,u,u+S,d),this.imuln(v),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(k!==0){var w=1;for(a=E(o,u,o.length,d),u=0;u<k;u++)w*=d;this.imuln(w),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var d=0;d<this.length;d++)o.words[d]=this.words[d];o.length=this.length,o.negative=this.negative,o.red=this.red};function A(b,o){b.words=o.words,b.length=o.length,b.negative=o.negative,b.red=o.red}if(i.prototype._move=function(o){A(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=R}catch{i.prototype.inspect=R}else i.prototype.inspect=R;function R(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var O=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,d){o=o||10,d=d|0||1;var g;if(o===16||o==="hex"){g="";for(var S=0,v=0,x=0;x<this.length;x++){var k=this.words[x],y=((k<<S|v)&16777215).toString(16);v=k>>>24-S&16777215,S+=2,S>=26&&(S-=26,x--),v!==0||x!==this.length-1?g=O[6-y.length]+y+g:g=y+g}for(v!==0&&(g=v.toString(16)+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(o===(o|0)&&o>=2&&o<=36){var a=T[o],u=N[o];g="";var w=this.clone();for(w.negative=0;!w.isZero();){var _=w.modrn(u).toString(o);w=w.idivn(u),w.isZero()?g=_+g:g=O[a-_.length]+_+g}for(this.isZero()&&(g="0"+g);g.length%d!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},c&&(i.prototype.toBuffer=function(o,d){return this.toArrayLike(c,o,d)}),i.prototype.toArray=function(o,d){return this.toArrayLike(Array,o,d)};var I=function(o,d){return o.allocUnsafe?o.allocUnsafe(d):new o(d)};i.prototype.toArrayLike=function(o,d,g){this._strip();var S=this.byteLength(),v=g||Math.max(1,S);r(S<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0");var x=I(o,v),k=d==="le"?"LE":"BE";return this["_toArrayLike"+k](x,S),x},i.prototype._toArrayLikeLE=function(o,d){for(var g=0,S=0,v=0,x=0;v<this.length;v++){var k=this.words[v]<<x|S;o[g++]=k&255,g<o.length&&(o[g++]=k>>8&255),g<o.length&&(o[g++]=k>>16&255),x===6?(g<o.length&&(o[g++]=k>>24&255),S=0,x=0):(S=k>>>24,x+=2)}if(g<o.length)for(o[g++]=S;g<o.length;)o[g++]=0},i.prototype._toArrayLikeBE=function(o,d){for(var g=o.length-1,S=0,v=0,x=0;v<this.length;v++){var k=this.words[v]<<x|S;o[g--]=k&255,g>=0&&(o[g--]=k>>8&255),g>=0&&(o[g--]=k>>16&255),x===6?(g>=0&&(o[g--]=k>>24&255),S=0,x=0):(S=k>>>24,x+=2)}if(g>=0)for(o[g--]=S;g>=0;)o[g--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var d=o,g=0;return d>=4096&&(g+=13,d>>>=13),d>=64&&(g+=7,d>>>=7),d>=8&&(g+=4,d>>>=4),d>=2&&(g+=2,d>>>=2),g+d},i.prototype._zeroBits=function(o){if(o===0)return 26;var d=o,g=0;return(d&8191)===0&&(g+=13,d>>>=13),(d&127)===0&&(g+=7,d>>>=7),(d&15)===0&&(g+=4,d>>>=4),(d&3)===0&&(g+=2,d>>>=2),(d&1)===0&&g++,g},i.prototype.bitLength=function(){var o=this.words[this.length-1],d=this._countBits(o);return(this.length-1)*26+d};function L(b){for(var o=new Array(b.bitLength()),d=0;d<o.length;d++){var g=d/26|0,S=d%26;o[d]=b.words[g]>>>S&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,d=0;d<this.length;d++){var g=this._zeroBits(this.words[d]);if(o+=g,g!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var d=0;d<o.length;d++)this.words[d]=this.words[d]|o.words[d];return this._strip()},i.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var d;this.length>o.length?d=o:d=this;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]&o.words[g];return this.length=d.length,this._strip()},i.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var d,g;this.length>o.length?(d=this,g=o):(d=o,g=this);for(var S=0;S<g.length;S++)this.words[S]=d.words[S]^g.words[S];if(this!==d)for(;S<d.length;S++)this.words[S]=d.words[S];return this.length=d.length,this._strip()},i.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var d=Math.ceil(o/26)|0,g=o%26;this._expand(d),g>0&&d--;for(var S=0;S<d;S++)this.words[S]=~this.words[S]&67108863;return g>0&&(this.words[S]=~this.words[S]&67108863>>26-g),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,d){r(typeof o=="number"&&o>=0);var g=o/26|0,S=o%26;return this._expand(g+1),d?this.words[g]=this.words[g]|1<<S:this.words[g]=this.words[g]&~(1<<S),this._strip()},i.prototype.iadd=function(o){var d;if(this.negative!==0&&o.negative===0)return this.negative=0,d=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,d=this.isub(o),o.negative=1,d._normSign();var g,S;this.length>o.length?(g=this,S=o):(g=o,S=this);for(var v=0,x=0;x<S.length;x++)d=(g.words[x]|0)+(S.words[x]|0)+v,this.words[x]=d&67108863,v=d>>>26;for(;v!==0&&x<g.length;x++)d=(g.words[x]|0)+v,this.words[x]=d&67108863,v=d>>>26;if(this.length=g.length,v!==0)this.words[this.length]=v,this.length++;else if(g!==this)for(;x<g.length;x++)this.words[x]=g.words[x];return this},i.prototype.add=function(o){var d;return o.negative!==0&&this.negative===0?(o.negative=0,d=this.sub(o),o.negative^=1,d):o.negative===0&&this.negative!==0?(this.negative=0,d=o.sub(this),this.negative=1,d):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var d=this.iadd(o);return o.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var g=this.cmp(o);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,v;g>0?(S=this,v=o):(S=o,v=this);for(var x=0,k=0;k<v.length;k++)d=(S.words[k]|0)-(v.words[k]|0)+x,x=d>>26,this.words[k]=d&67108863;for(;x!==0&&k<S.length;k++)d=(S.words[k]|0)+x,x=d>>26,this.words[k]=d&67108863;if(x===0&&k<S.length&&S!==this)for(;k<S.length;k++)this.words[k]=S.words[k];return this.length=Math.max(this.length,k),S!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function Z(b,o,d){d.negative=o.negative^b.negative;var g=b.length+o.length|0;d.length=g,g=g-1|0;var S=b.words[0]|0,v=o.words[0]|0,x=S*v,k=x&67108863,y=x/67108864|0;d.words[0]=k;for(var a=1;a<g;a++){for(var u=y>>>26,w=y&67108863,_=Math.min(a,o.length-1),U=Math.max(0,a-b.length+1);U<=_;U++){var $=a-U|0;S=b.words[$]|0,v=o.words[U]|0,x=S*v+w,u+=x/67108864|0,w=x&67108863}d.words[a]=w|0,y=u|0}return y!==0?d.words[a]=y|0:d.length--,d._strip()}var J=function(o,d,g){var S=o.words,v=d.words,x=g.words,k=0,y,a,u,w=S[0]|0,_=w&8191,U=w>>>13,$=S[1]|0,tt=$&8191,ot=$>>>13,xt=S[2]|0,pt=xt&8191,dt=xt>>>13,At=S[3]|0,gt=At&8191,vt=At>>>13,me=S[4]|0,Et=me&8191,Rt=me>>>13,Qe=S[5]|0,kt=Qe&8191,Bt=Qe>>>13,we=S[6]|0,Mt=we&8191,Ut=we>>>13,Be=S[7]|0,Nt=Be&8191,m=Be>>>13,f=S[8]|0,h=f&8191,B=f>>>13,C=S[9]|0,z=C&8191,G=C>>>13,mt=v[0]|0,ht=mt&8191,lt=mt>>>13,It=v[1]|0,ut=It&8191,qt=It>>>13,Ii=v[2]|0,zt=Ii&8191,Dt=Ii>>>13,Ri=v[3]|0,Ht=Ri&8191,Kt=Ri>>>13,Mi=v[4]|0,Wt=Mi&8191,$t=Mi>>>13,Ti=v[5]|0,Vt=Ti&8191,Gt=Ti>>>13,Li=v[6]|0,jt=Li&8191,Zt=Li>>>13,Ci=v[7]|0,Yt=Ci&8191,Jt=Ci>>>13,Ui=v[8]|0,Xt=Ui&8191,Qt=Ui>>>13,Ni=v[9]|0,te=Ni&8191,ee=Ni>>>13;g.negative=o.negative^d.negative,g.length=19,y=Math.imul(_,ht),a=Math.imul(_,lt),a=a+Math.imul(U,ht)|0,u=Math.imul(U,lt);var an=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(an>>>26)|0,an&=67108863,y=Math.imul(tt,ht),a=Math.imul(tt,lt),a=a+Math.imul(ot,ht)|0,u=Math.imul(ot,lt),y=y+Math.imul(_,ut)|0,a=a+Math.imul(_,qt)|0,a=a+Math.imul(U,ut)|0,u=u+Math.imul(U,qt)|0;var cn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(cn>>>26)|0,cn&=67108863,y=Math.imul(pt,ht),a=Math.imul(pt,lt),a=a+Math.imul(dt,ht)|0,u=Math.imul(dt,lt),y=y+Math.imul(tt,ut)|0,a=a+Math.imul(tt,qt)|0,a=a+Math.imul(ot,ut)|0,u=u+Math.imul(ot,qt)|0,y=y+Math.imul(_,zt)|0,a=a+Math.imul(_,Dt)|0,a=a+Math.imul(U,zt)|0,u=u+Math.imul(U,Dt)|0;var un=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(un>>>26)|0,un&=67108863,y=Math.imul(gt,ht),a=Math.imul(gt,lt),a=a+Math.imul(vt,ht)|0,u=Math.imul(vt,lt),y=y+Math.imul(pt,ut)|0,a=a+Math.imul(pt,qt)|0,a=a+Math.imul(dt,ut)|0,u=u+Math.imul(dt,qt)|0,y=y+Math.imul(tt,zt)|0,a=a+Math.imul(tt,Dt)|0,a=a+Math.imul(ot,zt)|0,u=u+Math.imul(ot,Dt)|0,y=y+Math.imul(_,Ht)|0,a=a+Math.imul(_,Kt)|0,a=a+Math.imul(U,Ht)|0,u=u+Math.imul(U,Kt)|0;var fn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(fn>>>26)|0,fn&=67108863,y=Math.imul(Et,ht),a=Math.imul(Et,lt),a=a+Math.imul(Rt,ht)|0,u=Math.imul(Rt,lt),y=y+Math.imul(gt,ut)|0,a=a+Math.imul(gt,qt)|0,a=a+Math.imul(vt,ut)|0,u=u+Math.imul(vt,qt)|0,y=y+Math.imul(pt,zt)|0,a=a+Math.imul(pt,Dt)|0,a=a+Math.imul(dt,zt)|0,u=u+Math.imul(dt,Dt)|0,y=y+Math.imul(tt,Ht)|0,a=a+Math.imul(tt,Kt)|0,a=a+Math.imul(ot,Ht)|0,u=u+Math.imul(ot,Kt)|0,y=y+Math.imul(_,Wt)|0,a=a+Math.imul(_,$t)|0,a=a+Math.imul(U,Wt)|0,u=u+Math.imul(U,$t)|0;var ln=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(ln>>>26)|0,ln&=67108863,y=Math.imul(kt,ht),a=Math.imul(kt,lt),a=a+Math.imul(Bt,ht)|0,u=Math.imul(Bt,lt),y=y+Math.imul(Et,ut)|0,a=a+Math.imul(Et,qt)|0,a=a+Math.imul(Rt,ut)|0,u=u+Math.imul(Rt,qt)|0,y=y+Math.imul(gt,zt)|0,a=a+Math.imul(gt,Dt)|0,a=a+Math.imul(vt,zt)|0,u=u+Math.imul(vt,Dt)|0,y=y+Math.imul(pt,Ht)|0,a=a+Math.imul(pt,Kt)|0,a=a+Math.imul(dt,Ht)|0,u=u+Math.imul(dt,Kt)|0,y=y+Math.imul(tt,Wt)|0,a=a+Math.imul(tt,$t)|0,a=a+Math.imul(ot,Wt)|0,u=u+Math.imul(ot,$t)|0,y=y+Math.imul(_,Vt)|0,a=a+Math.imul(_,Gt)|0,a=a+Math.imul(U,Vt)|0,u=u+Math.imul(U,Gt)|0;var hn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(hn>>>26)|0,hn&=67108863,y=Math.imul(Mt,ht),a=Math.imul(Mt,lt),a=a+Math.imul(Ut,ht)|0,u=Math.imul(Ut,lt),y=y+Math.imul(kt,ut)|0,a=a+Math.imul(kt,qt)|0,a=a+Math.imul(Bt,ut)|0,u=u+Math.imul(Bt,qt)|0,y=y+Math.imul(Et,zt)|0,a=a+Math.imul(Et,Dt)|0,a=a+Math.imul(Rt,zt)|0,u=u+Math.imul(Rt,Dt)|0,y=y+Math.imul(gt,Ht)|0,a=a+Math.imul(gt,Kt)|0,a=a+Math.imul(vt,Ht)|0,u=u+Math.imul(vt,Kt)|0,y=y+Math.imul(pt,Wt)|0,a=a+Math.imul(pt,$t)|0,a=a+Math.imul(dt,Wt)|0,u=u+Math.imul(dt,$t)|0,y=y+Math.imul(tt,Vt)|0,a=a+Math.imul(tt,Gt)|0,a=a+Math.imul(ot,Vt)|0,u=u+Math.imul(ot,Gt)|0,y=y+Math.imul(_,jt)|0,a=a+Math.imul(_,Zt)|0,a=a+Math.imul(U,jt)|0,u=u+Math.imul(U,Zt)|0;var dn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(dn>>>26)|0,dn&=67108863,y=Math.imul(Nt,ht),a=Math.imul(Nt,lt),a=a+Math.imul(m,ht)|0,u=Math.imul(m,lt),y=y+Math.imul(Mt,ut)|0,a=a+Math.imul(Mt,qt)|0,a=a+Math.imul(Ut,ut)|0,u=u+Math.imul(Ut,qt)|0,y=y+Math.imul(kt,zt)|0,a=a+Math.imul(kt,Dt)|0,a=a+Math.imul(Bt,zt)|0,u=u+Math.imul(Bt,Dt)|0,y=y+Math.imul(Et,Ht)|0,a=a+Math.imul(Et,Kt)|0,a=a+Math.imul(Rt,Ht)|0,u=u+Math.imul(Rt,Kt)|0,y=y+Math.imul(gt,Wt)|0,a=a+Math.imul(gt,$t)|0,a=a+Math.imul(vt,Wt)|0,u=u+Math.imul(vt,$t)|0,y=y+Math.imul(pt,Vt)|0,a=a+Math.imul(pt,Gt)|0,a=a+Math.imul(dt,Vt)|0,u=u+Math.imul(dt,Gt)|0,y=y+Math.imul(tt,jt)|0,a=a+Math.imul(tt,Zt)|0,a=a+Math.imul(ot,jt)|0,u=u+Math.imul(ot,Zt)|0,y=y+Math.imul(_,Yt)|0,a=a+Math.imul(_,Jt)|0,a=a+Math.imul(U,Yt)|0,u=u+Math.imul(U,Jt)|0;var pn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(pn>>>26)|0,pn&=67108863,y=Math.imul(h,ht),a=Math.imul(h,lt),a=a+Math.imul(B,ht)|0,u=Math.imul(B,lt),y=y+Math.imul(Nt,ut)|0,a=a+Math.imul(Nt,qt)|0,a=a+Math.imul(m,ut)|0,u=u+Math.imul(m,qt)|0,y=y+Math.imul(Mt,zt)|0,a=a+Math.imul(Mt,Dt)|0,a=a+Math.imul(Ut,zt)|0,u=u+Math.imul(Ut,Dt)|0,y=y+Math.imul(kt,Ht)|0,a=a+Math.imul(kt,Kt)|0,a=a+Math.imul(Bt,Ht)|0,u=u+Math.imul(Bt,Kt)|0,y=y+Math.imul(Et,Wt)|0,a=a+Math.imul(Et,$t)|0,a=a+Math.imul(Rt,Wt)|0,u=u+Math.imul(Rt,$t)|0,y=y+Math.imul(gt,Vt)|0,a=a+Math.imul(gt,Gt)|0,a=a+Math.imul(vt,Vt)|0,u=u+Math.imul(vt,Gt)|0,y=y+Math.imul(pt,jt)|0,a=a+Math.imul(pt,Zt)|0,a=a+Math.imul(dt,jt)|0,u=u+Math.imul(dt,Zt)|0,y=y+Math.imul(tt,Yt)|0,a=a+Math.imul(tt,Jt)|0,a=a+Math.imul(ot,Yt)|0,u=u+Math.imul(ot,Jt)|0,y=y+Math.imul(_,Xt)|0,a=a+Math.imul(_,Qt)|0,a=a+Math.imul(U,Xt)|0,u=u+Math.imul(U,Qt)|0;var gn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(gn>>>26)|0,gn&=67108863,y=Math.imul(z,ht),a=Math.imul(z,lt),a=a+Math.imul(G,ht)|0,u=Math.imul(G,lt),y=y+Math.imul(h,ut)|0,a=a+Math.imul(h,qt)|0,a=a+Math.imul(B,ut)|0,u=u+Math.imul(B,qt)|0,y=y+Math.imul(Nt,zt)|0,a=a+Math.imul(Nt,Dt)|0,a=a+Math.imul(m,zt)|0,u=u+Math.imul(m,Dt)|0,y=y+Math.imul(Mt,Ht)|0,a=a+Math.imul(Mt,Kt)|0,a=a+Math.imul(Ut,Ht)|0,u=u+Math.imul(Ut,Kt)|0,y=y+Math.imul(kt,Wt)|0,a=a+Math.imul(kt,$t)|0,a=a+Math.imul(Bt,Wt)|0,u=u+Math.imul(Bt,$t)|0,y=y+Math.imul(Et,Vt)|0,a=a+Math.imul(Et,Gt)|0,a=a+Math.imul(Rt,Vt)|0,u=u+Math.imul(Rt,Gt)|0,y=y+Math.imul(gt,jt)|0,a=a+Math.imul(gt,Zt)|0,a=a+Math.imul(vt,jt)|0,u=u+Math.imul(vt,Zt)|0,y=y+Math.imul(pt,Yt)|0,a=a+Math.imul(pt,Jt)|0,a=a+Math.imul(dt,Yt)|0,u=u+Math.imul(dt,Jt)|0,y=y+Math.imul(tt,Xt)|0,a=a+Math.imul(tt,Qt)|0,a=a+Math.imul(ot,Xt)|0,u=u+Math.imul(ot,Qt)|0,y=y+Math.imul(_,te)|0,a=a+Math.imul(_,ee)|0,a=a+Math.imul(U,te)|0,u=u+Math.imul(U,ee)|0;var mn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(mn>>>26)|0,mn&=67108863,y=Math.imul(z,ut),a=Math.imul(z,qt),a=a+Math.imul(G,ut)|0,u=Math.imul(G,qt),y=y+Math.imul(h,zt)|0,a=a+Math.imul(h,Dt)|0,a=a+Math.imul(B,zt)|0,u=u+Math.imul(B,Dt)|0,y=y+Math.imul(Nt,Ht)|0,a=a+Math.imul(Nt,Kt)|0,a=a+Math.imul(m,Ht)|0,u=u+Math.imul(m,Kt)|0,y=y+Math.imul(Mt,Wt)|0,a=a+Math.imul(Mt,$t)|0,a=a+Math.imul(Ut,Wt)|0,u=u+Math.imul(Ut,$t)|0,y=y+Math.imul(kt,Vt)|0,a=a+Math.imul(kt,Gt)|0,a=a+Math.imul(Bt,Vt)|0,u=u+Math.imul(Bt,Gt)|0,y=y+Math.imul(Et,jt)|0,a=a+Math.imul(Et,Zt)|0,a=a+Math.imul(Rt,jt)|0,u=u+Math.imul(Rt,Zt)|0,y=y+Math.imul(gt,Yt)|0,a=a+Math.imul(gt,Jt)|0,a=a+Math.imul(vt,Yt)|0,u=u+Math.imul(vt,Jt)|0,y=y+Math.imul(pt,Xt)|0,a=a+Math.imul(pt,Qt)|0,a=a+Math.imul(dt,Xt)|0,u=u+Math.imul(dt,Qt)|0,y=y+Math.imul(tt,te)|0,a=a+Math.imul(tt,ee)|0,a=a+Math.imul(ot,te)|0,u=u+Math.imul(ot,ee)|0;var yn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(yn>>>26)|0,yn&=67108863,y=Math.imul(z,zt),a=Math.imul(z,Dt),a=a+Math.imul(G,zt)|0,u=Math.imul(G,Dt),y=y+Math.imul(h,Ht)|0,a=a+Math.imul(h,Kt)|0,a=a+Math.imul(B,Ht)|0,u=u+Math.imul(B,Kt)|0,y=y+Math.imul(Nt,Wt)|0,a=a+Math.imul(Nt,$t)|0,a=a+Math.imul(m,Wt)|0,u=u+Math.imul(m,$t)|0,y=y+Math.imul(Mt,Vt)|0,a=a+Math.imul(Mt,Gt)|0,a=a+Math.imul(Ut,Vt)|0,u=u+Math.imul(Ut,Gt)|0,y=y+Math.imul(kt,jt)|0,a=a+Math.imul(kt,Zt)|0,a=a+Math.imul(Bt,jt)|0,u=u+Math.imul(Bt,Zt)|0,y=y+Math.imul(Et,Yt)|0,a=a+Math.imul(Et,Jt)|0,a=a+Math.imul(Rt,Yt)|0,u=u+Math.imul(Rt,Jt)|0,y=y+Math.imul(gt,Xt)|0,a=a+Math.imul(gt,Qt)|0,a=a+Math.imul(vt,Xt)|0,u=u+Math.imul(vt,Qt)|0,y=y+Math.imul(pt,te)|0,a=a+Math.imul(pt,ee)|0,a=a+Math.imul(dt,te)|0,u=u+Math.imul(dt,ee)|0;var wn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(wn>>>26)|0,wn&=67108863,y=Math.imul(z,Ht),a=Math.imul(z,Kt),a=a+Math.imul(G,Ht)|0,u=Math.imul(G,Kt),y=y+Math.imul(h,Wt)|0,a=a+Math.imul(h,$t)|0,a=a+Math.imul(B,Wt)|0,u=u+Math.imul(B,$t)|0,y=y+Math.imul(Nt,Vt)|0,a=a+Math.imul(Nt,Gt)|0,a=a+Math.imul(m,Vt)|0,u=u+Math.imul(m,Gt)|0,y=y+Math.imul(Mt,jt)|0,a=a+Math.imul(Mt,Zt)|0,a=a+Math.imul(Ut,jt)|0,u=u+Math.imul(Ut,Zt)|0,y=y+Math.imul(kt,Yt)|0,a=a+Math.imul(kt,Jt)|0,a=a+Math.imul(Bt,Yt)|0,u=u+Math.imul(Bt,Jt)|0,y=y+Math.imul(Et,Xt)|0,a=a+Math.imul(Et,Qt)|0,a=a+Math.imul(Rt,Xt)|0,u=u+Math.imul(Rt,Qt)|0,y=y+Math.imul(gt,te)|0,a=a+Math.imul(gt,ee)|0,a=a+Math.imul(vt,te)|0,u=u+Math.imul(vt,ee)|0;var bn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(bn>>>26)|0,bn&=67108863,y=Math.imul(z,Wt),a=Math.imul(z,$t),a=a+Math.imul(G,Wt)|0,u=Math.imul(G,$t),y=y+Math.imul(h,Vt)|0,a=a+Math.imul(h,Gt)|0,a=a+Math.imul(B,Vt)|0,u=u+Math.imul(B,Gt)|0,y=y+Math.imul(Nt,jt)|0,a=a+Math.imul(Nt,Zt)|0,a=a+Math.imul(m,jt)|0,u=u+Math.imul(m,Zt)|0,y=y+Math.imul(Mt,Yt)|0,a=a+Math.imul(Mt,Jt)|0,a=a+Math.imul(Ut,Yt)|0,u=u+Math.imul(Ut,Jt)|0,y=y+Math.imul(kt,Xt)|0,a=a+Math.imul(kt,Qt)|0,a=a+Math.imul(Bt,Xt)|0,u=u+Math.imul(Bt,Qt)|0,y=y+Math.imul(Et,te)|0,a=a+Math.imul(Et,ee)|0,a=a+Math.imul(Rt,te)|0,u=u+Math.imul(Rt,ee)|0;var vn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(vn>>>26)|0,vn&=67108863,y=Math.imul(z,Vt),a=Math.imul(z,Gt),a=a+Math.imul(G,Vt)|0,u=Math.imul(G,Gt),y=y+Math.imul(h,jt)|0,a=a+Math.imul(h,Zt)|0,a=a+Math.imul(B,jt)|0,u=u+Math.imul(B,Zt)|0,y=y+Math.imul(Nt,Yt)|0,a=a+Math.imul(Nt,Jt)|0,a=a+Math.imul(m,Yt)|0,u=u+Math.imul(m,Jt)|0,y=y+Math.imul(Mt,Xt)|0,a=a+Math.imul(Mt,Qt)|0,a=a+Math.imul(Ut,Xt)|0,u=u+Math.imul(Ut,Qt)|0,y=y+Math.imul(kt,te)|0,a=a+Math.imul(kt,ee)|0,a=a+Math.imul(Bt,te)|0,u=u+Math.imul(Bt,ee)|0;var xn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(xn>>>26)|0,xn&=67108863,y=Math.imul(z,jt),a=Math.imul(z,Zt),a=a+Math.imul(G,jt)|0,u=Math.imul(G,Zt),y=y+Math.imul(h,Yt)|0,a=a+Math.imul(h,Jt)|0,a=a+Math.imul(B,Yt)|0,u=u+Math.imul(B,Jt)|0,y=y+Math.imul(Nt,Xt)|0,a=a+Math.imul(Nt,Qt)|0,a=a+Math.imul(m,Xt)|0,u=u+Math.imul(m,Qt)|0,y=y+Math.imul(Mt,te)|0,a=a+Math.imul(Mt,ee)|0,a=a+Math.imul(Ut,te)|0,u=u+Math.imul(Ut,ee)|0;var Sn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,y=Math.imul(z,Yt),a=Math.imul(z,Jt),a=a+Math.imul(G,Yt)|0,u=Math.imul(G,Jt),y=y+Math.imul(h,Xt)|0,a=a+Math.imul(h,Qt)|0,a=a+Math.imul(B,Xt)|0,u=u+Math.imul(B,Qt)|0,y=y+Math.imul(Nt,te)|0,a=a+Math.imul(Nt,ee)|0,a=a+Math.imul(m,te)|0,u=u+Math.imul(m,ee)|0;var En=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(En>>>26)|0,En&=67108863,y=Math.imul(z,Xt),a=Math.imul(z,Qt),a=a+Math.imul(G,Xt)|0,u=Math.imul(G,Qt),y=y+Math.imul(h,te)|0,a=a+Math.imul(h,ee)|0,a=a+Math.imul(B,te)|0,u=u+Math.imul(B,ee)|0;var Bn=(k+y|0)+((a&8191)<<13)|0;k=(u+(a>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,y=Math.imul(z,te),a=Math.imul(z,ee),a=a+Math.imul(G,te)|0,u=Math.imul(G,ee);var An=(k+y|0)+((a&8191)<<13)|0;return k=(u+(a>>>13)|0)+(An>>>26)|0,An&=67108863,x[0]=an,x[1]=cn,x[2]=un,x[3]=fn,x[4]=ln,x[5]=hn,x[6]=dn,x[7]=pn,x[8]=gn,x[9]=mn,x[10]=yn,x[11]=wn,x[12]=bn,x[13]=vn,x[14]=xn,x[15]=Sn,x[16]=En,x[17]=Bn,x[18]=An,k!==0&&(x[19]=k,g.length++),g};Math.imul||(J=Z);function W(b,o,d){d.negative=o.negative^b.negative,d.length=b.length+o.length;for(var g=0,S=0,v=0;v<d.length-1;v++){var x=S;S=0;for(var k=g&67108863,y=Math.min(v,o.length-1),a=Math.max(0,v-b.length+1);a<=y;a++){var u=v-a,w=b.words[u]|0,_=o.words[a]|0,U=w*_,$=U&67108863;x=x+(U/67108864|0)|0,$=$+k|0,k=$&67108863,x=x+($>>>26)|0,S+=x>>>26,x&=67108863}d.words[v]=k,g=x,x=S}return g!==0?d.words[v]=g:d.length--,d._strip()}function P(b,o,d){return W(b,o,d)}i.prototype.mulTo=function(o,d){var g,S=this.length+o.length;return this.length===10&&o.length===10?g=J(this,o,d):S<63?g=Z(this,o,d):S<1024?g=W(this,o,d):g=P(this,o,d),g},i.prototype.mul=function(o){var d=new i(null);return d.words=new Array(this.length+o.length),this.mulTo(o,d)},i.prototype.mulf=function(o){var d=new i(null);return d.words=new Array(this.length+o.length),P(this,o,d)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var d=o<0;d&&(o=-o),r(typeof o=="number"),r(o<67108864);for(var g=0,S=0;S<this.length;S++){var v=(this.words[S]|0)*o,x=(v&67108863)+(g&67108863);g>>=26,g+=v/67108864|0,g+=x>>>26,this.words[S]=x&67108863}return g!==0&&(this.words[S]=g,this.length++),this.length=o===0?1:this.length,d?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var d=L(o);if(d.length===0)return new i(1);for(var g=this,S=0;S<d.length&&d[S]===0;S++,g=g.sqr());if(++S<d.length)for(var v=g.sqr();S<d.length;S++,v=v.sqr())d[S]!==0&&(g=g.mul(v));return g},i.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var d=o%26,g=(o-d)/26,S=67108863>>>26-d<<26-d,v;if(d!==0){var x=0;for(v=0;v<this.length;v++){var k=this.words[v]&S,y=(this.words[v]|0)-k<<d;this.words[v]=y|x,x=k>>>26-d}x&&(this.words[v]=x,this.length++)}if(g!==0){for(v=this.length-1;v>=0;v--)this.words[v+g]=this.words[v];for(v=0;v<g;v++)this.words[v]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,d,g){r(typeof o=="number"&&o>=0);var S;d?S=(d-d%26)/26:S=0;var v=o%26,x=Math.min((o-v)/26,this.length),k=67108863^67108863>>>v<<v,y=g;if(S-=x,S=Math.max(0,S),y){for(var a=0;a<x;a++)y.words[a]=this.words[a];y.length=x}if(x!==0)if(this.length>x)for(this.length-=x,a=0;a<this.length;a++)this.words[a]=this.words[a+x];else this.words[0]=0,this.length=1;var u=0;for(a=this.length-1;a>=0&&(u!==0||a>=S);a--){var w=this.words[a]|0;this.words[a]=u<<26-v|w>>>v,u=w&k}return y&&u!==0&&(y.words[y.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,d,g){return r(this.negative===0),this.iushrn(o,d,g)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var d=o%26,g=(o-d)/26,S=1<<d;if(this.length<=g)return!1;var v=this.words[g];return!!(v&S)},i.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var d=o%26,g=(o-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(d!==0&&g++,this.length=Math.min(g,this.length),d!==0){var S=67108863^67108863>>>d<<d;this.words[this.length-1]&=S}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,d,g){var S=o.length+g,v;this._expand(S);var x,k=0;for(v=0;v<o.length;v++){x=(this.words[v+g]|0)+k;var y=(o.words[v]|0)*d;x-=y&67108863,k=(x>>26)-(y/67108864|0),this.words[v+g]=x&67108863}for(;v<this.length-g;v++)x=(this.words[v+g]|0)+k,k=x>>26,this.words[v+g]=x&67108863;if(k===0)return this._strip();for(r(k===-1),k=0,v=0;v<this.length;v++)x=-(this.words[v]|0)+k,k=x>>26,this.words[v]=x&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,d){var g=this.length-o.length,S=this.clone(),v=o,x=v.words[v.length-1]|0,k=this._countBits(x);g=26-k,g!==0&&(v=v.ushln(g),S.iushln(g),x=v.words[v.length-1]|0);var y=S.length-v.length,a;if(d!=="mod"){a=new i(null),a.length=y+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var w=S.clone()._ishlnsubmul(v,1,y);w.negative===0&&(S=w,a&&(a.words[y]=1));for(var _=y-1;_>=0;_--){var U=(S.words[v.length+_]|0)*67108864+(S.words[v.length+_-1]|0);for(U=Math.min(U/x|0,67108863),S._ishlnsubmul(v,U,_);S.negative!==0;)U--,S.negative=0,S._ishlnsubmul(v,1,_),S.isZero()||(S.negative^=1);a&&(a.words[_]=U)}return a&&a._strip(),S._strip(),d!=="div"&&g!==0&&S.iushrn(g),{div:a||null,mod:S}},i.prototype.divmod=function(o,d,g){if(r(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var S,v,x;return this.negative!==0&&o.negative===0?(x=this.neg().divmod(o,d),d!=="mod"&&(S=x.div.neg()),d!=="div"&&(v=x.mod.neg(),g&&v.negative!==0&&v.iadd(o)),{div:S,mod:v}):this.negative===0&&o.negative!==0?(x=this.divmod(o.neg(),d),d!=="mod"&&(S=x.div.neg()),{div:S,mod:x.mod}):(this.negative&o.negative)!==0?(x=this.neg().divmod(o.neg(),d),d!=="div"&&(v=x.mod.neg(),g&&v.negative!==0&&v.isub(o)),{div:x.div,mod:v}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?d==="div"?{div:this.divn(o.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,d)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var d=this.divmod(o);if(d.mod.isZero())return d.div;var g=d.div.negative!==0?d.mod.isub(o):d.mod,S=o.ushrn(1),v=o.andln(1),x=g.cmp(S);return x<0||v===1&&x===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(o){var d=o<0;d&&(o=-o),r(o<=67108863);for(var g=(1<<26)%o,S=0,v=this.length-1;v>=0;v--)S=(g*S+(this.words[v]|0))%o;return d?-S:S},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var d=o<0;d&&(o=-o),r(o<=67108863);for(var g=0,S=this.length-1;S>=0;S--){var v=(this.words[S]|0)+g*67108864;this.words[S]=v/o|0,g=v%o}return this._strip(),d?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var d=this,g=o.clone();d.negative!==0?d=d.umod(o):d=d.clone();for(var S=new i(1),v=new i(0),x=new i(0),k=new i(1),y=0;d.isEven()&&g.isEven();)d.iushrn(1),g.iushrn(1),++y;for(var a=g.clone(),u=d.clone();!d.isZero();){for(var w=0,_=1;(d.words[0]&_)===0&&w<26;++w,_<<=1);if(w>0)for(d.iushrn(w);w-- >0;)(S.isOdd()||v.isOdd())&&(S.iadd(a),v.isub(u)),S.iushrn(1),v.iushrn(1);for(var U=0,$=1;(g.words[0]&$)===0&&U<26;++U,$<<=1);if(U>0)for(g.iushrn(U);U-- >0;)(x.isOdd()||k.isOdd())&&(x.iadd(a),k.isub(u)),x.iushrn(1),k.iushrn(1);d.cmp(g)>=0?(d.isub(g),S.isub(x),v.isub(k)):(g.isub(d),x.isub(S),k.isub(v))}return{a:x,b:k,gcd:g.iushln(y)}},i.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var d=this,g=o.clone();d.negative!==0?d=d.umod(o):d=d.clone();for(var S=new i(1),v=new i(0),x=g.clone();d.cmpn(1)>0&&g.cmpn(1)>0;){for(var k=0,y=1;(d.words[0]&y)===0&&k<26;++k,y<<=1);if(k>0)for(d.iushrn(k);k-- >0;)S.isOdd()&&S.iadd(x),S.iushrn(1);for(var a=0,u=1;(g.words[0]&u)===0&&a<26;++a,u<<=1);if(a>0)for(g.iushrn(a);a-- >0;)v.isOdd()&&v.iadd(x),v.iushrn(1);d.cmp(g)>=0?(d.isub(g),S.isub(v)):(g.isub(d),v.isub(S))}var w;return d.cmpn(1)===0?w=S:w=v,w.cmpn(0)<0&&w.iadd(o),w},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var d=this.clone(),g=o.clone();d.negative=0,g.negative=0;for(var S=0;d.isEven()&&g.isEven();S++)d.iushrn(1),g.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;g.isEven();)g.iushrn(1);var v=d.cmp(g);if(v<0){var x=d;d=g,g=x}else if(v===0||g.cmpn(1)===0)break;d.isub(g)}while(!0);return g.iushln(S)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){r(typeof o=="number");var d=o%26,g=(o-d)/26,S=1<<d;if(this.length<=g)return this._expand(g+1),this.words[g]|=S,this;for(var v=S,x=g;v!==0&&x<this.length;x++){var k=this.words[x]|0;k+=v,v=k>>>26,k&=67108863,this.words[x]=k}return v!==0&&(this.words[x]=v,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var d=o<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var g;if(this.length>1)g=1;else{d&&(o=-o),r(o<=67108863,"Number is too big");var S=this.words[0]|0;g=S===o?0:S<o?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var d=this.ucmp(o);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var d=0,g=this.length-1;g>=0;g--){var S=this.words[g]|0,v=o.words[g]|0;if(S!==v){S<v?d=-1:S>v&&(d=1);break}}return d},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new q(o)},i.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var V={k256:null,p224:null,p192:null,p25519:null};function Y(b,o){this.name=b,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},Y.prototype.ireduce=function(o){var d=o,g;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),g=d.bitLength();while(g>this.n);var S=g<this.n?-1:d.ucmp(this.p);return S===0?(d.words[0]=0,d.length=1):S>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},Y.prototype.split=function(o,d){o.iushrn(this.n,0,d)},Y.prototype.imulK=function(o){return o.imul(this.k)};function rt(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(rt,Y),rt.prototype.split=function(o,d){for(var g=4194303,S=Math.min(o.length,9),v=0;v<S;v++)d.words[v]=o.words[v];if(d.length=S,o.length<=9){o.words[0]=0,o.length=1;return}var x=o.words[9];for(d.words[d.length++]=x&g,v=10;v<o.length;v++){var k=o.words[v]|0;o.words[v-10]=(k&g)<<4|x>>>22,x=k}x>>>=22,o.words[v-10]=x,x===0&&o.length>10?o.length-=10:o.length-=9},rt.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var d=0,g=0;g<o.length;g++){var S=o.words[g]|0;d+=S*977,o.words[g]=d&67108863,d=S*64+(d/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function nt(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(nt,Y);function K(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(K,Y);function F(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(F,Y),F.prototype.imulK=function(o){for(var d=0,g=0;g<o.length;g++){var S=(o.words[g]|0)*19+d,v=S&67108863;S>>>=26,o.words[g]=v,d=S}return d!==0&&(o.words[o.length++]=d),o},i._prime=function(o){if(V[o])return V[o];var d;if(o==="k256")d=new rt;else if(o==="p224")d=new nt;else if(o==="p192")d=new K;else if(o==="p25519")d=new F;else throw new Error("Unknown prime "+o);return V[o]=d,d};function q(b){if(typeof b=="string"){var o=i._prime(b);this.m=o.p,this.prime=o}else r(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}q.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},q.prototype._verify2=function(o,d){r((o.negative|d.negative)===0,"red works only with positives"),r(o.red&&o.red===d.red,"red works only with red numbers")},q.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(A(o,o.umod(this.m)._forceRed(this)),o)},q.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},q.prototype.add=function(o,d){this._verify2(o,d);var g=o.add(d);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},q.prototype.iadd=function(o,d){this._verify2(o,d);var g=o.iadd(d);return g.cmp(this.m)>=0&&g.isub(this.m),g},q.prototype.sub=function(o,d){this._verify2(o,d);var g=o.sub(d);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},q.prototype.isub=function(o,d){this._verify2(o,d);var g=o.isub(d);return g.cmpn(0)<0&&g.iadd(this.m),g},q.prototype.shl=function(o,d){return this._verify1(o),this.imod(o.ushln(d))},q.prototype.imul=function(o,d){return this._verify2(o,d),this.imod(o.imul(d))},q.prototype.mul=function(o,d){return this._verify2(o,d),this.imod(o.mul(d))},q.prototype.isqr=function(o){return this.imul(o,o.clone())},q.prototype.sqr=function(o){return this.mul(o,o)},q.prototype.sqrt=function(o){if(o.isZero())return o.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(o,g)}for(var S=this.m.subn(1),v=0;!S.isZero()&&S.andln(1)===0;)v++,S.iushrn(1);r(!S.isZero());var x=new i(1).toRed(this),k=x.redNeg(),y=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,y).cmp(k)!==0;)a.redIAdd(k);for(var u=this.pow(a,S),w=this.pow(o,S.addn(1).iushrn(1)),_=this.pow(o,S),U=v;_.cmp(x)!==0;){for(var $=_,tt=0;$.cmp(x)!==0;tt++)$=$.redSqr();r(tt<U);var ot=this.pow(u,new i(1).iushln(U-tt-1));w=w.redMul(ot),u=ot.redSqr(),_=_.redMul(u),U=tt}return w},q.prototype.invm=function(o){var d=o._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},q.prototype.pow=function(o,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return o.clone();var g=4,S=new Array(1<<g);S[0]=new i(1).toRed(this),S[1]=o;for(var v=2;v<S.length;v++)S[v]=this.mul(S[v-1],o);var x=S[0],k=0,y=0,a=d.bitLength()%26;for(a===0&&(a=26),v=d.length-1;v>=0;v--){for(var u=d.words[v],w=a-1;w>=0;w--){var _=u>>w&1;if(x!==S[0]&&(x=this.sqr(x)),_===0&&k===0){y=0;continue}k<<=1,k|=_,y++,!(y!==g&&(v!==0||w!==0))&&(x=this.mul(x,S[k]),y=0,k=0)}a=26}return x},q.prototype.convertTo=function(o){var d=o.umod(this.m);return d===o?d.clone():d},q.prototype.convertFrom=function(o){var d=o.clone();return d.red=null,d},i.mont=function(o){return new j(o)};function j(b){q.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(j,q),j.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},j.prototype.convertFrom=function(o){var d=this.imod(o.mul(this.rinv));return d.red=null,d},j.prototype.imul=function(o,d){if(o.isZero()||d.isZero())return o.words[0]=0,o.length=1,o;var g=o.imul(d),S=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=g.isub(S).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},j.prototype.mul=function(o,d){if(o.isZero()||d.isZero())return new i(0)._forceRed(this);var g=o.mul(d),S=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=g.isub(S).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},j.prototype.invm=function(o){var d=this.imod(o._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(n,Ma)}(Fr)),Fr.exports}var Ta=Gs();const Xi=Jr(Ta);var Cr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Qi;function js(){return Qi||(Qi=1,function(n,t){var e=li(),r=e.Buffer;function s(c,l){for(var p in c)l[p]=c[p]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(c,l,p){return r(c,l,p)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(c,l,p){if(typeof c=="number")throw new TypeError("Argument must not be a number");return r(c,l,p)},i.alloc=function(c,l,p){if(typeof c!="number")throw new TypeError("Argument must be a number");var E=r(c);return l!==void 0?typeof p=="string"?E.fill(l,p):E.fill(l):E.fill(0),E},i.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r(c)},i.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(c)}}(Cr,Cr.exports)),Cr.exports}var Un,ts;function La(){if(ts)return Un;ts=1;var n=js().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var c=e.charAt(i),l=c.charCodeAt(0);if(r[l]!==255)throw new TypeError(c+" is ambiguous");r[l]=i}var p=e.length,E=e.charAt(0),A=Math.log(p)/Math.log(256),R=Math.log(256)/Math.log(p);function O(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=n.from(I)),!n.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var L=0,Z=0,J=0,W=I.length;J!==W&&I[J]===0;)J++,L++;for(var P=(W-J)*R+1>>>0,V=new Uint8Array(P);J!==W;){for(var Y=I[J],rt=0,nt=P-1;(Y!==0||rt<Z)&&nt!==-1;nt--,rt++)Y+=256*V[nt]>>>0,V[nt]=Y%p>>>0,Y=Y/p>>>0;if(Y!==0)throw new Error("Non-zero carry");Z=rt,J++}for(var K=P-Z;K!==P&&V[K]===0;)K++;for(var F=E.repeat(L);K<P;++K)F+=e.charAt(V[K]);return F}function T(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return n.alloc(0);for(var L=0,Z=0,J=0;I[L]===E;)Z++,L++;for(var W=(I.length-L)*A+1>>>0,P=new Uint8Array(W);L<I.length;){var V=I.charCodeAt(L);if(V>255)return;var Y=r[V];if(Y===255)return;for(var rt=0,nt=W-1;(Y!==0||rt<J)&&nt!==-1;nt--,rt++)Y+=p*P[nt]>>>0,P[nt]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");J=rt,L++}for(var K=W-J;K!==W&&P[K]===0;)K++;var F=n.allocUnsafe(Z+(W-K));F.fill(0,0,Z);for(var q=Z;K!==W;)F[q++]=P[K++];return F}function N(I){var L=T(I);if(L)return L;throw new Error("Non-base"+p+" character")}return{encode:O,decodeUnsafe:T,decode:N}}return Un=t,Un}var Nn,es;function Ca(){if(es)return Nn;es=1;var n=La(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Nn=n(t),Nn}var Ua=Ca();const ae=Jr(Ua),rs=Cs;var St={},Fn,ns;function Na(){if(ns)return Fn;ns=1;var n=js().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var c=e.charAt(i),l=c.charCodeAt(0);if(r[l]!==255)throw new TypeError(c+" is ambiguous");r[l]=i}var p=e.length,E=e.charAt(0),A=Math.log(p)/Math.log(256),R=Math.log(256)/Math.log(p);function O(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=n.from(I)),!n.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var L=0,Z=0,J=0,W=I.length;J!==W&&I[J]===0;)J++,L++;for(var P=(W-J)*R+1>>>0,V=new Uint8Array(P);J!==W;){for(var Y=I[J],rt=0,nt=P-1;(Y!==0||rt<Z)&&nt!==-1;nt--,rt++)Y+=256*V[nt]>>>0,V[nt]=Y%p>>>0,Y=Y/p>>>0;if(Y!==0)throw new Error("Non-zero carry");Z=rt,J++}for(var K=P-Z;K!==P&&V[K]===0;)K++;for(var F=E.repeat(L);K<P;++K)F+=e.charAt(V[K]);return F}function T(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return n.alloc(0);for(var L=0,Z=0,J=0;I[L]===E;)Z++,L++;for(var W=(I.length-L)*A+1>>>0,P=new Uint8Array(W);L<I.length;){var V=I.charCodeAt(L);if(V>255)return;var Y=r[V];if(Y===255)return;for(var rt=0,nt=W-1;(Y!==0||rt<J)&&nt!==-1;nt--,rt++)Y+=p*P[nt]>>>0,P[nt]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");J=rt,L++}for(var K=W-J;K!==W&&P[K]===0;)K++;var F=n.allocUnsafe(Z+(W-K));F.fill(0,0,Z);for(var q=Z;K!==W;)F[q++]=P[K++];return F}function N(I){var L=T(I);if(L)return L;throw new Error("Non-base"+p+" character")}return{encode:O,decodeUnsafe:T,decode:N}}return Fn=t,Fn}var On,is;function Fa(){if(is)return On;is=1;var n=Na(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return On=n(t),On}function Ne(n,t,e){return t<=n&&n<=e}function Qr(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Oa(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var c=n.charCodeAt(r+1);if(56320<=c&&c<=57343){var l=i&1023,p=c&1023;s.push(65536+(l<<10)+p),r+=1}else s.push(65533)}r+=1}return s}function Pa(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Hr=-1;function vi(n){this.tokens=[].slice.call(n)}vi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Hr},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var lr=-1;function Pn(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Kr="utf-8";function Wr(n,t){if(!(this instanceof Wr))return new Wr(n,t);if(n=n!==void 0?String(n).toLowerCase():Kr,n!==Kr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Qr(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Wr.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Qr(e),this._streaming||(this._decoder=new qa({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new vi(r),i=[],c;!s.endOfStream()&&(c=this._decoder.handler(s,s.read()),c!==lr);)c!==null&&(Array.isArray(c)?i.push.apply(i,c):i.push(c));if(!this._streaming){do{if(c=this._decoder.handler(s,s.read()),c===lr)break;c!==null&&(Array.isArray(c)?i.push.apply(i,c):i.push(c))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Pa(i)}};function $r(n,t){if(!(this instanceof $r))return new $r(n,t);if(n=n!==void 0?String(n).toLowerCase():Kr,n!==Kr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Qr(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}$r.prototype={encode:function(t,e){t=t?String(t):"",e=Qr(e),this._streaming||(this._encoder=new za(this._options)),this._streaming=!!e.stream;for(var r=[],s=new vi(Oa(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==lr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==lr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function qa(n){var t=n.fatal,e=0,r=0,s=0,i=128,c=191;this.handler=function(l,p){if(p===Hr&&s!==0)return s=0,Pn(t);if(p===Hr)return lr;if(s===0){if(Ne(p,0,127))return p;if(Ne(p,194,223))s=1,e=p-192;else if(Ne(p,224,239))p===224&&(i=160),p===237&&(c=159),s=2,e=p-224;else if(Ne(p,240,244))p===240&&(i=144),p===244&&(c=143),s=3,e=p-240;else return Pn(t);return e=e<<6*s,null}if(!Ne(p,i,c))return e=s=r=0,i=128,c=191,l.prepend(p),Pn(t);if(i=128,c=191,r+=1,e+=p-128<<6*(s-r),r!==s)return null;var E=e;return e=s=r=0,E}}function za(n){n.fatal,this.handler=function(t,e){if(e===Hr)return lr;if(Ne(e,0,127))return e;var r,s;Ne(e,128,2047)?(r=1,s=192):Ne(e,2048,65535)?(r=2,s=224):Ne(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var c=e>>6*(r-1);i.push(128|c&63),r-=1}return i}}const Da=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Wr,TextEncoder:$r},Symbol.toStringTag,{value:"Module"})),Ha=fi(Da);var ss;function Ka(){if(ss)return St;ss=1;var n=St&&St.__createBinding||(Object.create?function(K,F,q,j){j===void 0&&(j=q),Object.defineProperty(K,j,{enumerable:!0,get:function(){return F[q]}})}:function(K,F,q,j){j===void 0&&(j=q),K[j]=F[q]}),t=St&&St.__setModuleDefault||(Object.create?function(K,F){Object.defineProperty(K,"default",{enumerable:!0,value:F})}:function(K,F){K.default=F}),e=St&&St.__decorate||function(K,F,q,j){var b=arguments.length,o=b<3?F:j===null?j=Object.getOwnPropertyDescriptor(F,q):j,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(K,F,q,j);else for(var g=K.length-1;g>=0;g--)(d=K[g])&&(o=(b<3?d(o):b>3?d(F,q,o):d(F,q))||o);return b>3&&o&&Object.defineProperty(F,q,o),o},r=St&&St.__importStar||function(K){if(K&&K.__esModule)return K;var F={};if(K!=null)for(var q in K)q!=="default"&&Object.hasOwnProperty.call(K,q)&&n(F,K,q);return t(F,K),F},s=St&&St.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(St,"__esModule",{value:!0}),St.deserializeUnchecked=St.deserialize=St.serialize=St.BinaryReader=St.BinaryWriter=St.BorshError=St.baseDecode=St.baseEncode=void 0;const i=s(Gs()),c=s(Fa()),l=r(Ha),p=typeof TextDecoder!="function"?l.TextDecoder:TextDecoder,E=new p("utf-8",{fatal:!0});function A(K){return typeof K=="string"&&(K=Buffer.from(K,"utf8")),c.default.encode(Buffer.from(K))}St.baseEncode=A;function R(K){return Buffer.from(c.default.decode(K))}St.baseDecode=R;const O=1024;class T extends Error{constructor(F){super(F),this.fieldPath=[],this.originalMessage=F}addToFieldPath(F){this.fieldPath.splice(0,0,F),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}St.BorshError=T;class N{constructor(){this.buf=Buffer.alloc(O),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(O)]))}writeU8(F){this.maybeResize(),this.buf.writeUInt8(F,this.length),this.length+=1}writeU16(F){this.maybeResize(),this.buf.writeUInt16LE(F,this.length),this.length+=2}writeU32(F){this.maybeResize(),this.buf.writeUInt32LE(F,this.length),this.length+=4}writeU64(F){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(F).toArray("le",8)))}writeU128(F){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(F).toArray("le",16)))}writeU256(F){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(F).toArray("le",32)))}writeU512(F){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(F).toArray("le",64)))}writeBuffer(F){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),F,Buffer.alloc(O)]),this.length+=F.length}writeString(F){this.maybeResize();const q=Buffer.from(F,"utf8");this.writeU32(q.length),this.writeBuffer(q)}writeFixedArray(F){this.writeBuffer(Buffer.from(F))}writeArray(F,q){this.maybeResize(),this.writeU32(F.length);for(const j of F)this.maybeResize(),q(j)}toArray(){return this.buf.subarray(0,this.length)}}St.BinaryWriter=N;function I(K,F,q){const j=q.value;q.value=function(...b){try{return j.apply(this,b)}catch(o){if(o instanceof RangeError){const d=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(d)>=0)throw new T("Reached the end of buffer when deserializing")}throw o}}}class L{constructor(F){this.buf=F,this.offset=0}readU8(){const F=this.buf.readUInt8(this.offset);return this.offset+=1,F}readU16(){const F=this.buf.readUInt16LE(this.offset);return this.offset+=2,F}readU32(){const F=this.buf.readUInt32LE(this.offset);return this.offset+=4,F}readU64(){const F=this.readBuffer(8);return new i.default(F,"le")}readU128(){const F=this.readBuffer(16);return new i.default(F,"le")}readU256(){const F=this.readBuffer(32);return new i.default(F,"le")}readU512(){const F=this.readBuffer(64);return new i.default(F,"le")}readBuffer(F){if(this.offset+F>this.buf.length)throw new T(`Expected buffer length ${F} isn't within bounds`);const q=this.buf.slice(this.offset,this.offset+F);return this.offset+=F,q}readString(){const F=this.readU32(),q=this.readBuffer(F);try{return E.decode(q)}catch(j){throw new T(`Error decoding UTF-8 string: ${j}`)}}readFixedArray(F){return new Uint8Array(this.readBuffer(F))}readArray(F){const q=this.readU32(),j=Array();for(let b=0;b<q;++b)j.push(F());return j}}e([I],L.prototype,"readU8",null),e([I],L.prototype,"readU16",null),e([I],L.prototype,"readU32",null),e([I],L.prototype,"readU64",null),e([I],L.prototype,"readU128",null),e([I],L.prototype,"readU256",null),e([I],L.prototype,"readU512",null),e([I],L.prototype,"readString",null),e([I],L.prototype,"readFixedArray",null),e([I],L.prototype,"readArray",null),St.BinaryReader=L;function Z(K){return K.charAt(0).toUpperCase()+K.slice(1)}function J(K,F,q,j,b){try{if(typeof j=="string")b[`write${Z(j)}`](q);else if(j instanceof Array)if(typeof j[0]=="number"){if(q.length!==j[0])throw new T(`Expecting byte array of length ${j[0]}, but got ${q.length} bytes`);b.writeFixedArray(q)}else if(j.length===2&&typeof j[1]=="number"){if(q.length!==j[1])throw new T(`Expecting byte array of length ${j[1]}, but got ${q.length} bytes`);for(let o=0;o<j[1];o++)J(K,null,q[o],j[0],b)}else b.writeArray(q,o=>{J(K,F,o,j[0],b)});else if(j.kind!==void 0)switch(j.kind){case"option":{q==null?b.writeU8(0):(b.writeU8(1),J(K,F,q,j.type,b));break}case"map":{b.writeU32(q.size),q.forEach((o,d)=>{J(K,F,d,j.key,b),J(K,F,o,j.value,b)});break}default:throw new T(`FieldType ${j} unrecognized`)}else W(K,q,b)}catch(o){throw o instanceof T&&o.addToFieldPath(F),o}}function W(K,F,q){if(typeof F.borshSerialize=="function"){F.borshSerialize(q);return}const j=K.get(F.constructor);if(!j)throw new T(`Class ${F.constructor.name} is missing in schema`);if(j.kind==="struct")j.fields.map(([b,o])=>{J(K,b,F[b],o,q)});else if(j.kind==="enum"){const b=F[j.field];for(let o=0;o<j.values.length;++o){const[d,g]=j.values[o];if(d===b){q.writeU8(o),J(K,d,F[d],g,q);break}}}else throw new T(`Unexpected schema kind: ${j.kind} for ${F.constructor.name}`)}function P(K,F,q=N){const j=new q;return W(K,F,j),j.toArray()}St.serialize=P;function V(K,F,q,j){try{if(typeof q=="string")return j[`read${Z(q)}`]();if(q instanceof Array){if(typeof q[0]=="number")return j.readFixedArray(q[0]);if(typeof q[1]=="number"){const b=[];for(let o=0;o<q[1];o++)b.push(V(K,null,q[0],j));return b}else return j.readArray(()=>V(K,F,q[0],j))}if(q.kind==="option")return j.readU8()?V(K,F,q.type,j):void 0;if(q.kind==="map"){let b=new Map;const o=j.readU32();for(let d=0;d<o;d++){const g=V(K,F,q.key,j),S=V(K,F,q.value,j);b.set(g,S)}return b}return Y(K,q,j)}catch(b){throw b instanceof T&&b.addToFieldPath(F),b}}function Y(K,F,q){if(typeof F.borshDeserialize=="function")return F.borshDeserialize(q);const j=K.get(F);if(!j)throw new T(`Class ${F.name} is missing in schema`);if(j.kind==="struct"){const b={};for(const[o,d]of K.get(F).fields)b[o]=V(K,o,d,q);return new F(b)}if(j.kind==="enum"){const b=q.readU8();if(b>=j.values.length)throw new T(`Enum index: ${b} is out of range`);const[o,d]=j.values[b],g=V(K,o,d,q);return new F({[o]:g})}throw new T(`Unexpected schema kind: ${j.kind} for ${F.constructor.name}`)}function rt(K,F,q,j=L){const b=new j(q),o=Y(K,F,b);if(b.offset<q.length)throw new T(`Unexpected ${q.length-b.offset} bytes after deserialized data`);return o}St.deserialize=rt;function nt(K,F,q,j=L){const b=new j(q);return Y(K,F,b)}return St.deserializeUnchecked=nt,St}var qn=Ka(),H={},os;function Wa(){if(os)return H;os=1,Object.defineProperty(H,"__esModule",{value:!0}),H.s16=H.s8=H.nu64be=H.u48be=H.u40be=H.u32be=H.u24be=H.u16be=H.nu64=H.u48=H.u40=H.u32=H.u24=H.u16=H.u8=H.offset=H.greedy=H.Constant=H.UTF8=H.CString=H.Blob=H.Boolean=H.BitField=H.BitStructure=H.VariantLayout=H.Union=H.UnionLayoutDiscriminator=H.UnionDiscriminator=H.Structure=H.Sequence=H.DoubleBE=H.Double=H.FloatBE=H.Float=H.NearInt64BE=H.NearInt64=H.NearUInt64BE=H.NearUInt64=H.IntBE=H.Int=H.UIntBE=H.UInt=H.OffsetLayout=H.GreedyCount=H.ExternalLayout=H.bindConstructorLayout=H.nameWithProperty=H.Layout=H.uint8ArrayToBuffer=H.checkUint8Array=void 0,H.constant=H.utf8=H.cstr=H.blob=H.unionLayoutDiscriminator=H.union=H.seq=H.bits=H.struct=H.f64be=H.f64=H.f32be=H.f32=H.ns64be=H.s48be=H.s40be=H.s32be=H.s24be=H.s16be=H.ns64=H.s48=H.s40=H.s32=H.s24=void 0;const n=li();function t(a){if(!(a instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}H.checkUint8Array=t;function e(a){return t(a),n.Buffer.from(a.buffer,a.byteOffset,a.length)}H.uint8ArrayToBuffer=e;let r=class{constructor(u,w){if(!Number.isInteger(u))throw new TypeError("span must be an integer");this.span=u,this.property=w}makeDestinationObject(){return{}}getSpan(u,w){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(u){const w=Object.create(this.constructor.prototype);return Object.assign(w,this),w.property=u,w}fromArray(u){}};H.Layout=r;function s(a,u){return u.property?a+"["+u.property+"]":a}H.nameWithProperty=s;function i(a,u){if(typeof a!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(a,"layout_"))throw new Error("Class is already bound to a layout");if(!(u&&u instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(u,"boundConstructor_"))throw new Error("layout is already bound to a constructor");a.layout_=u,u.boundConstructor_=a,u.makeDestinationObject=()=>new a,Object.defineProperty(a.prototype,"encode",{value(w,_){return u.encode(this,w,_)},writable:!0}),Object.defineProperty(a,"decode",{value(w,_){return u.decode(w,_)},writable:!0})}H.bindConstructorLayout=i;class c extends r{isCount(){throw new Error("ExternalLayout is abstract")}}H.ExternalLayout=c;class l extends c{constructor(u=1,w){if(!Number.isInteger(u)||0>=u)throw new TypeError("elementSpan must be a (positive) integer");super(-1,w),this.elementSpan=u}isCount(){return!0}decode(u,w=0){t(u);const _=u.length-w;return Math.floor(_/this.elementSpan)}encode(u,w,_){return 0}}H.GreedyCount=l;class p extends c{constructor(u,w=0,_){if(!(u instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(w))throw new TypeError("offset must be integer or undefined");super(u.span,_||u.property),this.layout=u,this.offset=w}isCount(){return this.layout instanceof E||this.layout instanceof A}decode(u,w=0){return this.layout.decode(u,w+this.offset)}encode(u,w,_=0){return this.layout.encode(u,w,_+this.offset)}}H.OffsetLayout=p;class E extends r{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return e(u).readUIntLE(w,this.span)}encode(u,w,_=0){return e(w).writeUIntLE(u,_,this.span),this.span}}H.UInt=E;class A extends r{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return e(u).readUIntBE(w,this.span)}encode(u,w,_=0){return e(w).writeUIntBE(u,_,this.span),this.span}}H.UIntBE=A;class R extends r{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return e(u).readIntLE(w,this.span)}encode(u,w,_=0){return e(w).writeIntLE(u,_,this.span),this.span}}H.Int=R;class O extends r{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return e(u).readIntBE(w,this.span)}encode(u,w,_=0){return e(w).writeIntBE(u,_,this.span),this.span}}H.IntBE=O;const T=Math.pow(2,32);function N(a){const u=Math.floor(a/T),w=a-u*T;return{hi32:u,lo32:w}}function I(a,u){return a*T+u}class L extends r{constructor(u){super(8,u)}decode(u,w=0){const _=e(u),U=_.readUInt32LE(w),$=_.readUInt32LE(w+4);return I($,U)}encode(u,w,_=0){const U=N(u),$=e(w);return $.writeUInt32LE(U.lo32,_),$.writeUInt32LE(U.hi32,_+4),8}}H.NearUInt64=L;class Z extends r{constructor(u){super(8,u)}decode(u,w=0){const _=e(u),U=_.readUInt32BE(w),$=_.readUInt32BE(w+4);return I(U,$)}encode(u,w,_=0){const U=N(u),$=e(w);return $.writeUInt32BE(U.hi32,_),$.writeUInt32BE(U.lo32,_+4),8}}H.NearUInt64BE=Z;class J extends r{constructor(u){super(8,u)}decode(u,w=0){const _=e(u),U=_.readUInt32LE(w),$=_.readInt32LE(w+4);return I($,U)}encode(u,w,_=0){const U=N(u),$=e(w);return $.writeUInt32LE(U.lo32,_),$.writeInt32LE(U.hi32,_+4),8}}H.NearInt64=J;class W extends r{constructor(u){super(8,u)}decode(u,w=0){const _=e(u),U=_.readInt32BE(w),$=_.readUInt32BE(w+4);return I(U,$)}encode(u,w,_=0){const U=N(u),$=e(w);return $.writeInt32BE(U.hi32,_),$.writeUInt32BE(U.lo32,_+4),8}}H.NearInt64BE=W;class P extends r{constructor(u){super(4,u)}decode(u,w=0){return e(u).readFloatLE(w)}encode(u,w,_=0){return e(w).writeFloatLE(u,_),4}}H.Float=P;class V extends r{constructor(u){super(4,u)}decode(u,w=0){return e(u).readFloatBE(w)}encode(u,w,_=0){return e(w).writeFloatBE(u,_),4}}H.FloatBE=V;class Y extends r{constructor(u){super(8,u)}decode(u,w=0){return e(u).readDoubleLE(w)}encode(u,w,_=0){return e(w).writeDoubleLE(u,_),8}}H.Double=Y;class rt extends r{constructor(u){super(8,u)}decode(u,w=0){return e(u).readDoubleBE(w)}encode(u,w,_=0){return e(w).writeDoubleBE(u,_),8}}H.DoubleBE=rt;class nt extends r{constructor(u,w,_){if(!(u instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(w instanceof c&&w.isCount()||Number.isInteger(w)&&0<=w))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let U=-1;!(w instanceof c)&&0<u.span&&(U=w*u.span),super(U,_),this.elementLayout=u,this.count=w}getSpan(u,w=0){if(0<=this.span)return this.span;let _=0,U=this.count;if(U instanceof c&&(U=U.decode(u,w)),0<this.elementLayout.span)_=U*this.elementLayout.span;else{let $=0;for(;$<U;)_+=this.elementLayout.getSpan(u,w+_),++$}return _}decode(u,w=0){const _=[];let U=0,$=this.count;for($ instanceof c&&($=$.decode(u,w));U<$;)_.push(this.elementLayout.decode(u,w)),w+=this.elementLayout.getSpan(u,w),U+=1;return _}encode(u,w,_=0){const U=this.elementLayout,$=u.reduce((tt,ot)=>tt+U.encode(ot,w,_+tt),0);return this.count instanceof c&&this.count.encode(u.length,w,_),$}}H.Sequence=nt;class K extends r{constructor(u,w,_){if(!(Array.isArray(u)&&u.reduce(($,tt)=>$&&tt instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof w=="boolean"&&_===void 0&&(_=w,w=void 0);for(const $ of u)if(0>$.span&&$.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let U=-1;try{U=u.reduce(($,tt)=>$+tt.getSpan(),0)}catch{}super(U,w),this.fields=u,this.decodePrefixes=!!_}getSpan(u,w=0){if(0<=this.span)return this.span;let _=0;try{_=this.fields.reduce((U,$)=>{const tt=$.getSpan(u,w);return w+=tt,U+tt},0)}catch{throw new RangeError("indeterminate span")}return _}decode(u,w=0){t(u);const _=this.makeDestinationObject();for(const U of this.fields)if(U.property!==void 0&&(_[U.property]=U.decode(u,w)),w+=U.getSpan(u,w),this.decodePrefixes&&u.length===w)break;return _}encode(u,w,_=0){const U=_;let $=0,tt=0;for(const ot of this.fields){let xt=ot.span;if(tt=0<xt?xt:0,ot.property!==void 0){const pt=u[ot.property];pt!==void 0&&(tt=ot.encode(pt,w,_),0>xt&&(xt=ot.getSpan(w,_)))}$=_,_+=xt}return $+tt-U}fromArray(u){const w=this.makeDestinationObject();for(const _ of this.fields)_.property!==void 0&&0<u.length&&(w[_.property]=u.shift());return w}layoutFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===u)return w}offsetOf(u){if(typeof u!="string")throw new TypeError("property must be string");let w=0;for(const _ of this.fields){if(_.property===u)return w;0>_.span?w=-1:0<=w&&(w+=_.span)}}}H.Structure=K;class F{constructor(u){this.property=u}decode(u,w){throw new Error("UnionDiscriminator is abstract")}encode(u,w,_){throw new Error("UnionDiscriminator is abstract")}}H.UnionDiscriminator=F;class q extends F{constructor(u,w){if(!(u instanceof c&&u.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(w||u.property||"variant"),this.layout=u}decode(u,w){return this.layout.decode(u,w)}encode(u,w,_){return this.layout.encode(u,w,_)}}H.UnionLayoutDiscriminator=q;class j extends r{constructor(u,w,_){let U;if(u instanceof E||u instanceof A)U=new q(new p(u));else if(u instanceof c&&u.isCount())U=new q(u);else if(u instanceof F)U=u;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(w===void 0&&(w=null),!(w===null||w instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(w!==null){if(0>w.span)throw new Error("defaultLayout must have constant span");w.property===void 0&&(w=w.replicate("content"))}let $=-1;w&&($=w.span,0<=$&&(u instanceof E||u instanceof A)&&($+=U.layout.span)),super($,_),this.discriminator=U,this.usesPrefixDiscriminator=u instanceof E||u instanceof A,this.defaultLayout=w,this.registry={};let tt=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ot){return tt(ot)},this.configGetSourceVariant=function(ot){tt=ot.bind(this)}}getSpan(u,w=0){if(0<=this.span)return this.span;const _=this.getVariant(u,w);if(!_)throw new Error("unable to determine span for unrecognized variant");return _.getSpan(u,w)}defaultGetSourceVariant(u){if(Object.prototype.hasOwnProperty.call(u,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(u,this.defaultLayout.property))return;const w=this.registry[u[this.discriminator.property]];if(w&&(!w.layout||w.property&&Object.prototype.hasOwnProperty.call(u,w.property)))return w}else for(const w in this.registry){const _=this.registry[w];if(_.property&&Object.prototype.hasOwnProperty.call(u,_.property))return _}throw new Error("unable to infer src variant")}decode(u,w=0){let _;const U=this.discriminator,$=U.decode(u,w),tt=this.registry[$];if(tt===void 0){const ot=this.defaultLayout;let xt=0;this.usesPrefixDiscriminator&&(xt=U.layout.span),_=this.makeDestinationObject(),_[U.property]=$,_[ot.property]=ot.decode(u,w+xt)}else _=tt.decode(u,w);return _}encode(u,w,_=0){const U=this.getSourceVariant(u);if(U===void 0){const $=this.discriminator,tt=this.defaultLayout;let ot=0;return this.usesPrefixDiscriminator&&(ot=$.layout.span),$.encode(u[$.property],w,_),ot+tt.encode(u[tt.property],w,_+ot)}return U.encode(u,w,_)}addVariant(u,w,_){const U=new b(this,u,w,_);return this.registry[u]=U,U}getVariant(u,w=0){let _;return u instanceof Uint8Array?_=this.discriminator.decode(u,w):_=u,this.registry[_]}}H.Union=j;class b extends r{constructor(u,w,_,U){if(!(u instanceof j))throw new TypeError("union must be a Union");if(!Number.isInteger(w)||0>w)throw new TypeError("variant must be a (non-negative) integer");if(typeof _=="string"&&U===void 0&&(U=_,_=null),_){if(!(_ instanceof r))throw new TypeError("layout must be a Layout");if(u.defaultLayout!==null&&0<=_.span&&_.span>u.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof U!="string")throw new TypeError("variant must have a String property")}let $=u.span;0>u.span&&($=_?_.span:0,0<=$&&u.usesPrefixDiscriminator&&($+=u.discriminator.layout.span)),super($,U),this.union=u,this.variant=w,this.layout=_||null}getSpan(u,w=0){if(0<=this.span)return this.span;let _=0;this.union.usesPrefixDiscriminator&&(_=this.union.discriminator.layout.span);let U=0;return this.layout&&(U=this.layout.getSpan(u,w+_)),_+U}decode(u,w=0){const _=this.makeDestinationObject();if(this!==this.union.getVariant(u,w))throw new Error("variant mismatch");let U=0;return this.union.usesPrefixDiscriminator&&(U=this.union.discriminator.layout.span),this.layout?_[this.property]=this.layout.decode(u,w+U):this.property?_[this.property]=!0:this.union.usesPrefixDiscriminator&&(_[this.union.discriminator.property]=this.variant),_}encode(u,w,_=0){let U=0;if(this.union.usesPrefixDiscriminator&&(U=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(u,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,w,_);let $=U;if(this.layout&&(this.layout.encode(u[this.property],w,_+U),$+=this.layout.getSpan(w,_+U),0<=this.union.span&&$>this.union.span))throw new Error("encoded variant overruns containing union");return $}fromArray(u){if(this.layout)return this.layout.fromArray(u)}}H.VariantLayout=b;function o(a){return 0>a&&(a+=4294967296),a}class d extends r{constructor(u,w,_){if(!(u instanceof E||u instanceof A))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof w=="string"&&_===void 0&&(_=w,w=!1),4<u.span)throw new RangeError("word cannot exceed 32 bits");super(u.span,_),this.word=u,this.msb=!!w,this.fields=[];let U=0;this._packedSetValue=function($){return U=o($),this},this._packedGetValue=function(){return U}}decode(u,w=0){const _=this.makeDestinationObject(),U=this.word.decode(u,w);this._packedSetValue(U);for(const $ of this.fields)$.property!==void 0&&(_[$.property]=$.decode(u));return _}encode(u,w,_=0){const U=this.word.decode(w,_);this._packedSetValue(U);for(const $ of this.fields)if($.property!==void 0){const tt=u[$.property];tt!==void 0&&$.encode(tt)}return this.word.encode(this._packedGetValue(),w,_)}addField(u,w){const _=new g(this,u,w);return this.fields.push(_),_}addBoolean(u){const w=new S(this,u);return this.fields.push(w),w}fieldFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===u)return w}}H.BitStructure=d;class g{constructor(u,w,_){if(!(u instanceof d))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(w)||0>=w)throw new TypeError("bits must be positive integer");const U=8*u.span,$=u.fields.reduce((tt,ot)=>tt+ot.bits,0);if(w+$>U)throw new Error("bits too long for span remainder ("+(U-$)+" of "+U+" remain)");this.container=u,this.bits=w,this.valueMask=(1<<w)-1,w===32&&(this.valueMask=4294967295),this.start=$,this.container.msb&&(this.start=U-$-w),this.wordMask=o(this.valueMask<<this.start),this.property=_}decode(u,w){const _=this.container._packedGetValue();return o(_&this.wordMask)>>>this.start}encode(u){if(typeof u!="number"||!Number.isInteger(u)||u!==o(u&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const w=this.container._packedGetValue(),_=o(u<<this.start);this.container._packedSetValue(o(w&~this.wordMask)|_)}}H.BitField=g;class S extends g{constructor(u,w){super(u,1,w)}decode(u,w){return!!super.decode(u,w)}encode(u){typeof u=="boolean"&&(u=+u),super.encode(u)}}H.Boolean=S;class v extends r{constructor(u,w){if(!(u instanceof c&&u.isCount()||Number.isInteger(u)&&0<=u))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let _=-1;u instanceof c||(_=u),super(_,w),this.length=u}getSpan(u,w){let _=this.span;return 0>_&&(_=this.length.decode(u,w)),_}decode(u,w=0){let _=this.span;return 0>_&&(_=this.length.decode(u,w)),e(u).slice(w,w+_)}encode(u,w,_){let U=this.length;if(this.length instanceof c&&(U=u.length),!(u instanceof Uint8Array&&U===u.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+U+") Uint8Array as src");if(_+U>w.length)throw new RangeError("encoding overruns Uint8Array");const $=e(u);return e(w).write($.toString("hex"),_,U,"hex"),this.length instanceof c&&this.length.encode(U,w,_),U}}H.Blob=v;class x extends r{constructor(u){super(-1,u)}getSpan(u,w=0){t(u);let _=w;for(;_<u.length&&u[_]!==0;)_+=1;return 1+_-w}decode(u,w=0){const _=this.getSpan(u,w);return e(u).slice(w,w+_-1).toString("utf-8")}encode(u,w,_=0){typeof u!="string"&&(u=String(u));const U=n.Buffer.from(u,"utf8"),$=U.length;if(_+$>w.length)throw new RangeError("encoding overruns Buffer");const tt=e(w);return U.copy(tt,_),tt[_+$]=0,$+1}}H.CString=x;class k extends r{constructor(u,w){if(typeof u=="string"&&w===void 0&&(w=u,u=void 0),u===void 0)u=-1;else if(!Number.isInteger(u))throw new TypeError("maxSpan must be an integer");super(-1,w),this.maxSpan=u}getSpan(u,w=0){return t(u),u.length-w}decode(u,w=0){const _=this.getSpan(u,w);if(0<=this.maxSpan&&this.maxSpan<_)throw new RangeError("text length exceeds maxSpan");return e(u).slice(w,w+_).toString("utf-8")}encode(u,w,_=0){typeof u!="string"&&(u=String(u));const U=n.Buffer.from(u,"utf8"),$=U.length;if(0<=this.maxSpan&&this.maxSpan<$)throw new RangeError("text length exceeds maxSpan");if(_+$>w.length)throw new RangeError("encoding overruns Buffer");return U.copy(e(w),_),$}}H.UTF8=k;class y extends r{constructor(u,w){super(0,w),this.value=u}decode(u,w){return this.value}encode(u,w,_){return 0}}return H.Constant=y,H.greedy=(a,u)=>new l(a,u),H.offset=(a,u,w)=>new p(a,u,w),H.u8=a=>new E(1,a),H.u16=a=>new E(2,a),H.u24=a=>new E(3,a),H.u32=a=>new E(4,a),H.u40=a=>new E(5,a),H.u48=a=>new E(6,a),H.nu64=a=>new L(a),H.u16be=a=>new A(2,a),H.u24be=a=>new A(3,a),H.u32be=a=>new A(4,a),H.u40be=a=>new A(5,a),H.u48be=a=>new A(6,a),H.nu64be=a=>new Z(a),H.s8=a=>new R(1,a),H.s16=a=>new R(2,a),H.s24=a=>new R(3,a),H.s32=a=>new R(4,a),H.s40=a=>new R(5,a),H.s48=a=>new R(6,a),H.ns64=a=>new J(a),H.s16be=a=>new O(2,a),H.s24be=a=>new O(3,a),H.s32be=a=>new O(4,a),H.s40be=a=>new O(5,a),H.s48be=a=>new O(6,a),H.ns64be=a=>new W(a),H.f32=a=>new P(a),H.f32be=a=>new V(a),H.f64=a=>new Y(a),H.f64be=a=>new rt(a),H.struct=(a,u,w)=>new K(a,u,w),H.bits=(a,u,w)=>new d(a,u,w),H.seq=(a,u,w)=>new nt(a,u,w),H.union=(a,u,w)=>new j(a,u,w),H.unionLayoutDiscriminator=(a,u)=>new q(a,u),H.blob=(a,u)=>new v(a,u),H.cstr=a=>new x(a),H.utf8=(a,u)=>new k(a,u),H.constant=(a,u)=>new y(a,u),H}var M=Wa(),$a=8078e3,Va=8078001,Ga=8078004,ja=8078005,Za=8078006,Ya=8078011;function Zs(n){return Array.isArray(n)?"%5B"+n.map(Zs).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function Ja([n,t]){return`${n}=${Zs(t)}`}function Xa(n){const t=Object.entries(n).map(Ja).join("&");return btoa(t)}function Qa(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${Xa(t)}'`),`${e}\``}}var or=class extends Error{constructor(...[t,e]){let r,s;if(e){const{cause:c,...l}=e;c&&(s={cause:c}),Object.keys(l).length>0&&(r=l)}const i=Qa(t,r);super(i,s);re(this,"cause",this.cause);re(this,"context");this.context={__code:t,...r},this.name="SolanaError"}};function tc(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function ec(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(tc(t,n));return n.write(t,e,0),e}})}function rc(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function nr(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function nc(n,t){if(nr(n)!==nr(t))throw new or(Ga);if(nr(n)&&nr(t)&&n.fixedSize!==t.fixedSize)throw new or(ja,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!nr(n)&&!nr(t)&&n.maxSize!==t.maxSize)throw new or(Za,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function ic(n,t,e=0){if(t.length-e<=0)throw new or($a,{codecDescription:n})}function sc(n,t,e,r=0){const s=e.length-r;if(s<t)throw new or(Va,{bytesLength:s,codecDescription:n,expected:t})}function oc(n,t,e,r){if(r<t||r>e)throw new or(Ya,{codecDescription:n,max:e,min:t,value:r})}function Ys(n){return(n==null?void 0:n.endian)!==1}function ac(n){return ec({fixedSize:n.size,write(t,e,r){n.range&&oc(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,Ys(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function cc(n){return rc({fixedSize:n.size,read(t,e=0){ic(n.name,t,e),sc(n.name,n.size,t,e);const r=new DataView(uc(t,e,n.size));return[n.get(r,Ys(n.config)),e+n.size]}})}function uc(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var fc=(n={})=>ac({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),lc=(n={})=>cc({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),hc=(n={})=>nc(fc(n),lc(n));class dc extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...c}=t,{path:l}=t,p=l.length===0?s:`At path: ${l.join(".")} -- ${s}`;super(i??p),i!=null&&(this.cause=p),Object.assign(this,c),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function pc(n){return Ar(n)&&typeof n[Symbol.iterator]=="function"}function Ar(n){return typeof n=="object"&&n!=null}function Vr(n){return Ar(n)&&!Array.isArray(n)}function ke(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function gc(n){const{done:t,value:e}=n.next();return t?void 0:e}function mc(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:c}=e,{refinement:l,message:p=`Expected a value of type \`${c}\`${l?` with refinement \`${l}\``:""}, but received: \`${ke(r)}\``}=n;return{value:r,type:c,refinement:l,key:s[s.length-1],path:s,branch:i,...n,message:p}}function*as(n,t,e,r){pc(n)||(n=[n]);for(const s of n){const i=mc(s,t,e,r);i&&(yield i)}}function*xi(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:c=!1}=e,l={path:r,branch:s,mask:c};i&&(n=t.coercer(n,l));let p="valid";for(const E of t.validator(n,l))E.explanation=e.message,p="not_valid",yield[E,void 0];for(let[E,A,R]of t.entries(n,l)){const O=xi(A,R,{path:E===void 0?r:[...r,E],branch:E===void 0?s:[...s,A],coerce:i,mask:c,message:e.message});for(const T of O)T[0]?(p=T[0].refinement!=null?"not_refined":"not_valid",yield[T[0],void 0]):i&&(A=T[1],E===void 0?n=A:n instanceof Map?n.set(E,A):n instanceof Set?n.add(A):Ar(n)&&(A!==void 0||E in n)&&(n[E]=A))}if(p!=="not_valid")for(const E of t.refiner(n,l))E.explanation=e.message,p="not_refined",yield[E,void 0];p==="valid"&&(yield[void 0,n])}let Te=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:c=p=>p,entries:l=function*(){}}=t;this.type=e,this.schema=r,this.entries=l,this.coercer=c,s?this.validator=(p,E)=>{const A=s(p,E);return as(A,E,this,p)}:this.validator=()=>[],i?this.refiner=(p,E)=>{const A=i(p,E);return as(A,E,this,p)}:this.refiner=()=>[]}assert(t,e){return yc(t,this,e)}create(t,e){return et(t,this,e)}is(t){return Js(t,this)}mask(t,e){return wc(t,this,e)}validate(t,e={}){return _r(t,this,e)}};function yc(n,t,e){const r=_r(n,t,{message:e});if(r[0])throw r[0]}function et(n,t,e){const r=_r(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function wc(n,t,e){const r=_r(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Js(n,t){return!_r(n,t)[0]}function _r(n,t,e={}){const r=xi(n,t,e),s=gc(r);return s[0]?[new dc(s[0],function*(){for(const c of r)c[0]&&(yield c[0])}),void 0]:[void 0,s[1]]}function Ye(n,t){return new Te({type:n,schema:null,validator:t})}function bc(){return Ye("any",()=>!0)}function it(n){return new Te({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ke(t)}`}})}function Me(){return Ye("boolean",n=>typeof n=="boolean")}function Si(n){return Ye("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${ke(t)}`)}function Lt(n){const t=ke(n),e=typeof n;return new Te({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${ke(r)}`}})}function vc(){return Ye("never",()=>!1)}function st(n){return new Te({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function D(){return Ye("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${ke(n)}`)}function ct(n){return new Te({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Xs(n,t){return new Te({type:"record",schema:null,*entries(e){if(Ar(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return Vr(e)||`Expected an object, but received: ${ke(e)}`},coercer(e){return Vr(e)?{...e}:e}})}function Q(){return Ye("string",n=>typeof n=="string"||`Expected a string, but received: ${ke(n)}`)}function Ei(n){const t=vc();return new Te({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${ke(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function X(n){const t=Object.keys(n);return new Te({type:"type",schema:n,*entries(e){if(Ar(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Vr(e)||`Expected an object, but received: ${ke(e)}`},coercer(e){return Vr(e)?{...e}:e}})}function ge(n){const t=n.map(e=>e.type).join(" | ");return new Te({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,c]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return c}return e},validator(e,r){const s=[];for(const i of n){const[...c]=xi(e,i,r),[l]=c;if(l[0])for(const[p]of c)p&&s.push(p);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ke(e)}`,...s]}})}function dr(){return Ye("unknown",()=>!0)}function kr(n,t,e){return new Te({...n,coercer:(r,s)=>Js(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var Ur,xc=new Uint8Array(16);function Qs(){if(!Ur&&(Ur=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ur))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ur(xc)}const Sc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function tn(n){return typeof n=="string"&&Sc.test(n)}var se=[];for(var zn=0;zn<256;++zn)se.push((zn+256).toString(16).substr(1));function en(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(se[n[t+0]]+se[n[t+1]]+se[n[t+2]]+se[n[t+3]]+"-"+se[n[t+4]]+se[n[t+5]]+"-"+se[n[t+6]]+se[n[t+7]]+"-"+se[n[t+8]]+se[n[t+9]]+"-"+se[n[t+10]]+se[n[t+11]]+se[n[t+12]]+se[n[t+13]]+se[n[t+14]]+se[n[t+15]]).toLowerCase();if(!tn(e))throw TypeError("Stringified UUID is invalid");return e}var cs,Dn,Hn=0,Kn=0;function Ec(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||cs,c=n.clockseq!==void 0?n.clockseq:Dn;if(i==null||c==null){var l=n.random||(n.rng||Qs)();i==null&&(i=cs=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),c==null&&(c=Dn=(l[6]<<8|l[7])&16383)}var p=n.msecs!==void 0?n.msecs:Date.now(),E=n.nsecs!==void 0?n.nsecs:Kn+1,A=p-Hn+(E-Kn)/1e4;if(A<0&&n.clockseq===void 0&&(c=c+1&16383),(A<0||p>Hn)&&n.nsecs===void 0&&(E=0),E>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Hn=p,Kn=E,Dn=c,p+=122192928e5;var R=((p&268435455)*1e4+E)%4294967296;s[r++]=R>>>24&255,s[r++]=R>>>16&255,s[r++]=R>>>8&255,s[r++]=R&255;var O=p/4294967296*1e4&268435455;s[r++]=O>>>8&255,s[r++]=O&255,s[r++]=O>>>24&15|16,s[r++]=O>>>16&255,s[r++]=c>>>8|128,s[r++]=c&255;for(var T=0;T<6;++T)s[r+T]=i[T];return t||en(s)}function to(n){if(!tn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Bc(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Ac="6ba7b810-9dad-11d1-80b4-00c04fd430c8",_c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function eo(n,t,e){function r(s,i,c,l){if(typeof s=="string"&&(s=Bc(s)),typeof i=="string"&&(i=to(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+s.length);if(p.set(i),p.set(s,i.length),p=e(p),p[6]=p[6]&15|t,p[8]=p[8]&63|128,c){l=l||0;for(var E=0;E<16;++E)c[l+E]=p[E];return c}return en(p)}try{r.name=n}catch{}return r.DNS=Ac,r.URL=_c,r}function kc(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Ic(Rc(Mc(n),n.length*8))}function Ic(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,c=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(c)}return t}function ro(n){return(n+64>>>9<<4)+14+1}function Rc(n,t){n[t>>5]|=128<<t%32,n[ro(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,c=0;c<n.length;c+=16){var l=e,p=r,E=s,A=i;e=fe(e,r,s,i,n[c],7,-680876936),i=fe(i,e,r,s,n[c+1],12,-389564586),s=fe(s,i,e,r,n[c+2],17,606105819),r=fe(r,s,i,e,n[c+3],22,-1044525330),e=fe(e,r,s,i,n[c+4],7,-176418897),i=fe(i,e,r,s,n[c+5],12,1200080426),s=fe(s,i,e,r,n[c+6],17,-1473231341),r=fe(r,s,i,e,n[c+7],22,-45705983),e=fe(e,r,s,i,n[c+8],7,1770035416),i=fe(i,e,r,s,n[c+9],12,-1958414417),s=fe(s,i,e,r,n[c+10],17,-42063),r=fe(r,s,i,e,n[c+11],22,-1990404162),e=fe(e,r,s,i,n[c+12],7,1804603682),i=fe(i,e,r,s,n[c+13],12,-40341101),s=fe(s,i,e,r,n[c+14],17,-1502002290),r=fe(r,s,i,e,n[c+15],22,1236535329),e=le(e,r,s,i,n[c+1],5,-165796510),i=le(i,e,r,s,n[c+6],9,-1069501632),s=le(s,i,e,r,n[c+11],14,643717713),r=le(r,s,i,e,n[c],20,-373897302),e=le(e,r,s,i,n[c+5],5,-701558691),i=le(i,e,r,s,n[c+10],9,38016083),s=le(s,i,e,r,n[c+15],14,-660478335),r=le(r,s,i,e,n[c+4],20,-405537848),e=le(e,r,s,i,n[c+9],5,568446438),i=le(i,e,r,s,n[c+14],9,-1019803690),s=le(s,i,e,r,n[c+3],14,-187363961),r=le(r,s,i,e,n[c+8],20,1163531501),e=le(e,r,s,i,n[c+13],5,-1444681467),i=le(i,e,r,s,n[c+2],9,-51403784),s=le(s,i,e,r,n[c+7],14,1735328473),r=le(r,s,i,e,n[c+12],20,-1926607734),e=he(e,r,s,i,n[c+5],4,-378558),i=he(i,e,r,s,n[c+8],11,-2022574463),s=he(s,i,e,r,n[c+11],16,1839030562),r=he(r,s,i,e,n[c+14],23,-35309556),e=he(e,r,s,i,n[c+1],4,-1530992060),i=he(i,e,r,s,n[c+4],11,1272893353),s=he(s,i,e,r,n[c+7],16,-155497632),r=he(r,s,i,e,n[c+10],23,-1094730640),e=he(e,r,s,i,n[c+13],4,681279174),i=he(i,e,r,s,n[c],11,-358537222),s=he(s,i,e,r,n[c+3],16,-722521979),r=he(r,s,i,e,n[c+6],23,76029189),e=he(e,r,s,i,n[c+9],4,-640364487),i=he(i,e,r,s,n[c+12],11,-421815835),s=he(s,i,e,r,n[c+15],16,530742520),r=he(r,s,i,e,n[c+2],23,-995338651),e=de(e,r,s,i,n[c],6,-198630844),i=de(i,e,r,s,n[c+7],10,1126891415),s=de(s,i,e,r,n[c+14],15,-1416354905),r=de(r,s,i,e,n[c+5],21,-57434055),e=de(e,r,s,i,n[c+12],6,1700485571),i=de(i,e,r,s,n[c+3],10,-1894986606),s=de(s,i,e,r,n[c+10],15,-1051523),r=de(r,s,i,e,n[c+1],21,-2054922799),e=de(e,r,s,i,n[c+8],6,1873313359),i=de(i,e,r,s,n[c+15],10,-30611744),s=de(s,i,e,r,n[c+6],15,-1560198380),r=de(r,s,i,e,n[c+13],21,1309151649),e=de(e,r,s,i,n[c+4],6,-145523070),i=de(i,e,r,s,n[c+11],10,-1120210379),s=de(s,i,e,r,n[c+2],15,718787259),r=de(r,s,i,e,n[c+9],21,-343485551),e=We(e,l),r=We(r,p),s=We(s,E),i=We(i,A)}return[e,r,s,i]}function Mc(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(ro(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function We(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Tc(n,t){return n<<t|n>>>32-t}function rn(n,t,e,r,s,i){return We(Tc(We(We(t,n),We(r,i)),s),e)}function fe(n,t,e,r,s,i,c){return rn(t&e|~t&r,n,t,s,i,c)}function le(n,t,e,r,s,i,c){return rn(t&r|e&~r,n,t,s,i,c)}function he(n,t,e,r,s,i,c){return rn(t^e^r,n,t,s,i,c)}function de(n,t,e,r,s,i,c){return rn(e^(t|~r),n,t,s,i,c)}var Lc=eo("v3",48,kc);function Cc(n,t,e){n=n||{};var r=n.random||(n.rng||Qs)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return en(r)}function Uc(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Wn(n,t){return n<<t|n>>>32-t}function Nc(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,c=Math.ceil(i/16),l=new Array(c),p=0;p<c;++p){for(var E=new Uint32Array(16),A=0;A<16;++A)E[A]=n[p*64+A*4]<<24|n[p*64+A*4+1]<<16|n[p*64+A*4+2]<<8|n[p*64+A*4+3];l[p]=E}l[c-1][14]=(n.length-1)*8/Math.pow(2,32),l[c-1][14]=Math.floor(l[c-1][14]),l[c-1][15]=(n.length-1)*8&4294967295;for(var R=0;R<c;++R){for(var O=new Uint32Array(80),T=0;T<16;++T)O[T]=l[R][T];for(var N=16;N<80;++N)O[N]=Wn(O[N-3]^O[N-8]^O[N-14]^O[N-16],1);for(var I=e[0],L=e[1],Z=e[2],J=e[3],W=e[4],P=0;P<80;++P){var V=Math.floor(P/20),Y=Wn(I,5)+Uc(V,L,Z,J)+W+t[V]+O[P]>>>0;W=J,J=Z,Z=Wn(L,30)>>>0,L=I,I=Y}e[0]=e[0]+I>>>0,e[1]=e[1]+L>>>0,e[2]=e[2]+Z>>>0,e[3]=e[3]+J>>>0,e[4]=e[4]+W>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Fc=eo("v5",80,Nc);const Oc="00000000-0000-0000-0000-000000000000";function Pc(n){if(!tn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const qc=Object.freeze(Object.defineProperty({__proto__:null,NIL:Oc,parse:to,stringify:en,v1:Ec,v3:Lc,v4:Cc,v5:Fc,validate:tn,version:Pc},Symbol.toStringTag,{value:"Module"})),no=fi(qc);var $n,us;function zc(){if(us)return $n;us=1;const n=no.v4;return $n=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const c=typeof i.version=="number"?i.version:2;if(c!==1&&c!==2)throw new TypeError(c+" must be 1 or 2");const l={method:e};if(c===2&&(l.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");l.params=r}if(typeof s>"u"){const p=typeof i.generator=="function"?i.generator:function(){return n()};l.id=p(l,i)}else c===2&&s===null?i.notificationIdNull&&(l.id=null):l.id=s;return l},$n}var Vn,fs;function Dc(){if(fs)return Vn;fs=1;const n=no.v4,t=zc(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Vn=e,e.prototype.request=function(r,s,i,c){const l=this;let p=null;const E=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&E)throw new TypeError("JSON-RPC 1.0 does not support batching");if(E||!E&&r&&typeof r=="object"&&typeof s=="function")c=s,p=r;else{typeof i=="function"&&(c=i,i=void 0);const O=typeof c=="function";try{p=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(T){if(O)return c(T);throw T}if(!O)return p}let R;try{R=JSON.stringify(p,this.options.replacer)}catch(O){return c(O)}return this.callServer(R,function(O,T){l._parseResponse(O,T,c)}),p},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let c;try{c=JSON.parse(s,this.options.reviver)}catch(l){return i(l)}if(i.length===3)if(Array.isArray(c)){const l=function(E){return typeof E.error<"u"},p=function(E){return!l(E)};return i(null,c.filter(l),c.filter(p))}else return i(null,c.error,c.result);i(null,c)},Vn}var Hc=Dc();const Kc=Jr(Hc);var Gn={exports:{}},ls;function Wc(){return ls||(ls=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(p,E,A){this.fn=p,this.context=E,this.once=A||!1}function i(p,E,A,R,O){if(typeof A!="function")throw new TypeError("The listener must be a function");var T=new s(A,R||p,O),N=e?e+E:E;return p._events[N]?p._events[N].fn?p._events[N]=[p._events[N],T]:p._events[N].push(T):(p._events[N]=T,p._eventsCount++),p}function c(p,E){--p._eventsCount===0?p._events=new r:delete p._events[E]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var E=[],A,R;if(this._eventsCount===0)return E;for(R in A=this._events)t.call(A,R)&&E.push(e?R.slice(1):R);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(A)):E},l.prototype.listeners=function(E){var A=e?e+E:E,R=this._events[A];if(!R)return[];if(R.fn)return[R.fn];for(var O=0,T=R.length,N=new Array(T);O<T;O++)N[O]=R[O].fn;return N},l.prototype.listenerCount=function(E){var A=e?e+E:E,R=this._events[A];return R?R.fn?1:R.length:0},l.prototype.emit=function(E,A,R,O,T,N){var I=e?e+E:E;if(!this._events[I])return!1;var L=this._events[I],Z=arguments.length,J,W;if(L.fn){switch(L.once&&this.removeListener(E,L.fn,void 0,!0),Z){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,A),!0;case 3:return L.fn.call(L.context,A,R),!0;case 4:return L.fn.call(L.context,A,R,O),!0;case 5:return L.fn.call(L.context,A,R,O,T),!0;case 6:return L.fn.call(L.context,A,R,O,T,N),!0}for(W=1,J=new Array(Z-1);W<Z;W++)J[W-1]=arguments[W];L.fn.apply(L.context,J)}else{var P=L.length,V;for(W=0;W<P;W++)switch(L[W].once&&this.removeListener(E,L[W].fn,void 0,!0),Z){case 1:L[W].fn.call(L[W].context);break;case 2:L[W].fn.call(L[W].context,A);break;case 3:L[W].fn.call(L[W].context,A,R);break;case 4:L[W].fn.call(L[W].context,A,R,O);break;default:if(!J)for(V=1,J=new Array(Z-1);V<Z;V++)J[V-1]=arguments[V];L[W].fn.apply(L[W].context,J)}}return!0},l.prototype.on=function(E,A,R){return i(this,E,A,R,!1)},l.prototype.once=function(E,A,R){return i(this,E,A,R,!0)},l.prototype.removeListener=function(E,A,R,O){var T=e?e+E:E;if(!this._events[T])return this;if(!A)return c(this,T),this;var N=this._events[T];if(N.fn)N.fn===A&&(!O||N.once)&&(!R||N.context===R)&&c(this,T);else{for(var I=0,L=[],Z=N.length;I<Z;I++)(N[I].fn!==A||O&&!N[I].once||R&&N[I].context!==R)&&L.push(N[I]);L.length?this._events[T]=L.length===1?L[0]:L:c(this,T)}return this},l.prototype.removeAllListeners=function(E){var A;return E?(A=e?e+E:E,this._events[A]&&c(this,A)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,n.exports=l}(Gn)),Gn.exports}var $c=Wc();const io=Jr($c);var Vc=class extends io{constructor(t,e,r){super();re(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,r){const s=r||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function Gc(n,t){return new Vc(n,t)}var jc=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},Zc=class extends io{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:c=5,...l}={},p,E){super();re(this,"address");re(this,"rpc_id");re(this,"queue");re(this,"options");re(this,"autoconnect");re(this,"ready");re(this,"reconnect");re(this,"reconnect_timer_id");re(this,"reconnect_interval");re(this,"max_reconnects");re(this,"rest_options");re(this,"current_reconnects");re(this,"generate_request_id");re(this,"socket");re(this,"webSocketFactory");re(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=c,this.rest_options=l,this.current_reconnects=0,this.generate_request_id=p||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),E?this.dataPack=E:this.dataPack=new jc,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,c)=>{if(!this.ready)return c(new Error("socket not ready"));const l=this.generate_request_id(t,e),p={jsonrpc:"2.0",method:t,params:e||void 0,id:l};this.socket.send(this.dataPack.encode(p),s,E=>{if(E)return c(E);this.queue[l]={promise:[i,c]},r&&(this.queue[l].timeout=setTimeout(()=>{delete this.queue[l],c(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),c=>{if(c)return s(c);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=wt.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class so extends Is{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Uo(t);const r=hi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let c=0;c<i.length;c++)i[c]^=54;this.iHash.update(i),this.oHash=t.create();for(let c=0;c<i.length;c++)i[c]^=106;this.oHash.update(i),cr(i)}update(t){return Pr(this),this.iHash.update(t),this}digestInto(t){Pr(this),vr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:c,outputLen:l}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=c,t.outputLen=l,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const oo=(n,t,e)=>new so(n,t).update(e).digest();oo.create=(n,t)=>new so(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hs(n){n.lowS!==void 0&&$e("lowS",n.lowS),n.prehash!==void 0&&$e("prehash",n.prehash)}function Yc(n){const t=yi(n);Er(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:e,Fp:r,a:s}=t;if(e){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class Jc extends Error{constructor(t=""){super(t)}}const Ue={Err:Jc,_tlv:{encode:(n,t)=>{const{Err:e}=Ue;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=Lr(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?Lr(s.length/2|128):"";return Lr(n)+i+s+t},decode(n,t){const{Err:e}=Ue;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let c=0;if(!i)c=s;else{const p=s&127;if(!p)throw new e("tlv.decode(long): indefinite length not supported");if(p>4)throw new e("tlv.decode(long): byte length is too big");const E=t.subarray(r,r+p);if(E.length!==p)throw new e("tlv.decode: length bytes not complete");if(E[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const A of E)c=c<<8|A;if(r+=p,c<128)throw new e("tlv.decode(long): not minimal encoding")}const l=t.subarray(r,r+c);if(l.length!==c)throw new e("tlv.decode: wrong value length");return{v:l,l:t.subarray(r+c)}}},_int:{encode(n){const{Err:t}=Ue;if(n<Fe)throw new t("integer: negative integers are not allowed");let e=Lr(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Ue;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Ze(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Ue,s=Pt("signature",n),{v:i,l:c}=r.decode(48,s);if(c.length)throw new t("invalid signature: left bytes after parsing");const{v:l,l:p}=r.decode(2,i),{v:E,l:A}=r.decode(2,p);if(A.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(l),s:e.decode(E)}},hexFromSig(n){const{_tlv:t,_int:e}=Ue,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}};function jn(n,t){return ur(Sr(n,t))}const Fe=BigInt(0),ie=BigInt(1);BigInt(2);const Zn=BigInt(3),Xc=BigInt(4);function Qc(n){const t=Yc(n),{Fp:e}=t,r=Br(t.n,t.nBitLength),s=t.toBytes||((W,P,V)=>{const Y=P.toAffine();return fr(Uint8Array.from([4]),e.toBytes(Y.x),e.toBytes(Y.y))}),i=t.fromBytes||(W=>{const P=W.subarray(1),V=e.fromBytes(P.subarray(0,e.BYTES)),Y=e.fromBytes(P.subarray(e.BYTES,2*e.BYTES));return{x:V,y:Y}});function c(W){const{a:P,b:V}=t,Y=e.sqr(W),rt=e.mul(Y,W);return e.add(e.add(rt,e.mul(W,P)),V)}function l(W,P){const V=e.sqr(P),Y=c(W);return e.eql(V,Y)}if(!l(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=e.mul(e.pow(t.a,Zn),Xc),E=e.mul(e.sqr(t.b),BigInt(27));if(e.is0(e.add(p,E)))throw new Error("bad curve params: a or b");function A(W){return gi(W,ie,t.n)}function R(W){const{allowedPrivateKeyLengths:P,nByteLength:V,wrapPrivateKey:Y,n:rt}=t;if(P&&typeof W!="bigint"){if(xr(W)&&(W=ur(W)),typeof W!="string"||!P.includes(W.length))throw new Error("invalid private key");W=W.padStart(V*2,"0")}let nt;try{nt=typeof W=="bigint"?W:Ze(Pt("private key",W,V))}catch{throw new Error("invalid private key, expected hex or "+V+" bytes, got "+typeof W)}return Y&&(nt=Tt(nt,rt)),_e("private key",nt,ie,rt),nt}function O(W){if(!(W instanceof I))throw new Error("ProjectivePoint expected")}const T=Dr((W,P)=>{const{px:V,py:Y,pz:rt}=W;if(e.eql(rt,e.ONE))return{x:V,y:Y};const nt=W.is0();P==null&&(P=nt?e.ONE:e.inv(rt));const K=e.mul(V,P),F=e.mul(Y,P),q=e.mul(rt,P);if(nt)return{x:e.ZERO,y:e.ZERO};if(!e.eql(q,e.ONE))throw new Error("invZ was invalid");return{x:K,y:F}}),N=Dr(W=>{if(W.is0()){if(t.allowInfinityPoint&&!e.is0(W.py))return;throw new Error("bad point: ZERO")}const{x:P,y:V}=W.toAffine();if(!e.isValid(P)||!e.isValid(V))throw new Error("bad point: x or y not FE");if(!l(P,V))throw new Error("bad point: equation left != right");if(!W.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class I{constructor(P,V,Y){if(P==null||!e.isValid(P))throw new Error("x required");if(V==null||!e.isValid(V)||e.is0(V))throw new Error("y required");if(Y==null||!e.isValid(Y))throw new Error("z required");this.px=P,this.py=V,this.pz=Y,Object.freeze(this)}static fromAffine(P){const{x:V,y:Y}=P||{};if(!P||!e.isValid(V)||!e.isValid(Y))throw new Error("invalid affine point");if(P instanceof I)throw new Error("projective point not allowed");const rt=nt=>e.eql(nt,e.ZERO);return rt(V)&&rt(Y)?I.ZERO:new I(V,Y,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(P){const V=mi(e,P.map(Y=>Y.pz));return P.map((Y,rt)=>Y.toAffine(V[rt])).map(I.fromAffine)}static fromHex(P){const V=I.fromAffine(i(Pt("pointHex",P)));return V.assertValidity(),V}static fromPrivateKey(P){return I.BASE.multiply(R(P))}static msm(P,V){return Vs(I,r,P,V)}_setWindowSize(P){J.setWindowSize(this,P)}assertValidity(){N(this)}hasEvenY(){const{y:P}=this.toAffine();if(e.isOdd)return!e.isOdd(P);throw new Error("Field doesn't support isOdd")}equals(P){O(P);const{px:V,py:Y,pz:rt}=this,{px:nt,py:K,pz:F}=P,q=e.eql(e.mul(V,F),e.mul(nt,rt)),j=e.eql(e.mul(Y,F),e.mul(K,rt));return q&&j}negate(){return new I(this.px,e.neg(this.py),this.pz)}double(){const{a:P,b:V}=t,Y=e.mul(V,Zn),{px:rt,py:nt,pz:K}=this;let F=e.ZERO,q=e.ZERO,j=e.ZERO,b=e.mul(rt,rt),o=e.mul(nt,nt),d=e.mul(K,K),g=e.mul(rt,nt);return g=e.add(g,g),j=e.mul(rt,K),j=e.add(j,j),F=e.mul(P,j),q=e.mul(Y,d),q=e.add(F,q),F=e.sub(o,q),q=e.add(o,q),q=e.mul(F,q),F=e.mul(g,F),j=e.mul(Y,j),d=e.mul(P,d),g=e.sub(b,d),g=e.mul(P,g),g=e.add(g,j),j=e.add(b,b),b=e.add(j,b),b=e.add(b,d),b=e.mul(b,g),q=e.add(q,b),d=e.mul(nt,K),d=e.add(d,d),b=e.mul(d,g),F=e.sub(F,b),j=e.mul(d,o),j=e.add(j,j),j=e.add(j,j),new I(F,q,j)}add(P){O(P);const{px:V,py:Y,pz:rt}=this,{px:nt,py:K,pz:F}=P;let q=e.ZERO,j=e.ZERO,b=e.ZERO;const o=t.a,d=e.mul(t.b,Zn);let g=e.mul(V,nt),S=e.mul(Y,K),v=e.mul(rt,F),x=e.add(V,Y),k=e.add(nt,K);x=e.mul(x,k),k=e.add(g,S),x=e.sub(x,k),k=e.add(V,rt);let y=e.add(nt,F);return k=e.mul(k,y),y=e.add(g,v),k=e.sub(k,y),y=e.add(Y,rt),q=e.add(K,F),y=e.mul(y,q),q=e.add(S,v),y=e.sub(y,q),b=e.mul(o,k),q=e.mul(d,v),b=e.add(q,b),q=e.sub(S,b),b=e.add(S,b),j=e.mul(q,b),S=e.add(g,g),S=e.add(S,g),v=e.mul(o,v),k=e.mul(d,k),S=e.add(S,v),v=e.sub(g,v),v=e.mul(o,v),k=e.add(k,v),g=e.mul(S,k),j=e.add(j,g),g=e.mul(y,k),q=e.mul(x,q),q=e.sub(q,g),g=e.mul(x,S),b=e.mul(y,b),b=e.add(b,g),new I(q,j,b)}subtract(P){return this.add(P.negate())}is0(){return this.equals(I.ZERO)}wNAF(P){return J.wNAFCached(this,P,I.normalizeZ)}multiplyUnsafe(P){const{endo:V,n:Y}=t;_e("scalar",P,Fe,Y);const rt=I.ZERO;if(P===Fe)return rt;if(this.is0()||P===ie)return this;if(!V||J.hasPrecomputes(this))return J.wNAFCachedUnsafe(this,P,I.normalizeZ);let{k1neg:nt,k1:K,k2neg:F,k2:q}=V.splitScalar(P),j=rt,b=rt,o=this;for(;K>Fe||q>Fe;)K&ie&&(j=j.add(o)),q&ie&&(b=b.add(o)),o=o.double(),K>>=ie,q>>=ie;return nt&&(j=j.negate()),F&&(b=b.negate()),b=new I(e.mul(b.px,V.beta),b.py,b.pz),j.add(b)}multiply(P){const{endo:V,n:Y}=t;_e("scalar",P,ie,Y);let rt,nt;if(V){const{k1neg:K,k1:F,k2neg:q,k2:j}=V.splitScalar(P);let{p:b,f:o}=this.wNAF(F),{p:d,f:g}=this.wNAF(j);b=J.constTimeNegate(K,b),d=J.constTimeNegate(q,d),d=new I(e.mul(d.px,V.beta),d.py,d.pz),rt=b.add(d),nt=o.add(g)}else{const{p:K,f:F}=this.wNAF(P);rt=K,nt=F}return I.normalizeZ([rt,nt])[0]}multiplyAndAddUnsafe(P,V,Y){const rt=I.BASE,nt=(F,q)=>q===Fe||q===ie||!F.equals(rt)?F.multiplyUnsafe(q):F.multiply(q),K=nt(this,V).add(nt(P,Y));return K.is0()?void 0:K}toAffine(P){return T(this,P)}isTorsionFree(){const{h:P,isTorsionFree:V}=t;if(P===ie)return!0;if(V)return V(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:P,clearCofactor:V}=t;return P===ie?this:V?V(I,this):this.multiplyUnsafe(t.h)}toRawBytes(P=!0){return $e("isCompressed",P),this.assertValidity(),s(I,this,P)}toHex(P=!0){return $e("isCompressed",P),ur(this.toRawBytes(P))}}I.BASE=new I(t.Gx,t.Gy,e.ONE),I.ZERO=new I(e.ZERO,e.ONE,e.ZERO);const{endo:L,nBitLength:Z}=t,J=$s(I,L?Math.ceil(Z/2):Z);return{CURVE:t,ProjectivePoint:I,normPrivateKeyToScalar:R,weierstrassEquation:c,isWithinCurveOrder:A}}function tu(n){const t=yi(n);return Er(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function eu(n){const t=tu(n),{Fp:e,n:r,nByteLength:s,nBitLength:i}=t,c=e.BYTES+1,l=2*e.BYTES+1;function p(d){return Tt(d,r)}function E(d){return ni(d,r)}const{ProjectivePoint:A,normPrivateKeyToScalar:R,weierstrassEquation:O,isWithinCurveOrder:T}=Qc({...t,toBytes(d,g,S){const v=g.toAffine(),x=e.toBytes(v.x),k=fr;return $e("isCompressed",S),S?k(Uint8Array.from([g.hasEvenY()?2:3]),x):k(Uint8Array.from([4]),x,e.toBytes(v.y))},fromBytes(d){const g=d.length,S=d[0],v=d.subarray(1);if(g===c&&(S===2||S===3)){const x=Ze(v);if(!gi(x,ie,e.ORDER))throw new Error("Point is not on curve");const k=O(x);let y;try{y=e.sqrt(k)}catch(w){const _=w instanceof Error?": "+w.message:"";throw new Error("Point is not on curve"+_)}const a=(y&ie)===ie;return(S&1)===1!==a&&(y=e.neg(y)),{x,y}}else if(g===l&&S===4){const x=e.fromBytes(v.subarray(0,e.BYTES)),k=e.fromBytes(v.subarray(e.BYTES,2*e.BYTES));return{x,y:k}}else{const x=c,k=l;throw new Error("invalid Point, expected length of "+x+", or uncompressed "+k+", got "+g)}}});function N(d){const g=r>>ie;return d>g}function I(d){return N(d)?p(-d):d}const L=(d,g,S)=>Ze(d.slice(g,S));class Z{constructor(g,S,v){_e("r",g,ie,r),_e("s",S,ie,r),this.r=g,this.s=S,v!=null&&(this.recovery=v),Object.freeze(this)}static fromCompact(g){const S=s;return g=Pt("compactSignature",g,S*2),new Z(L(g,0,S),L(g,S,2*S))}static fromDER(g){const{r:S,s:v}=Ue.toSig(Pt("DER",g));return new Z(S,v)}assertValidity(){}addRecoveryBit(g){return new Z(this.r,this.s,g)}recoverPublicKey(g){const{r:S,s:v,recovery:x}=this,k=rt(Pt("msgHash",g));if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");const y=x===2||x===3?S+t.n:S;if(y>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const a=(x&1)===0?"02":"03",u=A.fromHex(a+jn(y,e.BYTES)),w=E(y),_=p(-k*w),U=p(v*w),$=A.BASE.multiplyAndAddUnsafe(u,_,U);if(!$)throw new Error("point at infinify");return $.assertValidity(),$}hasHighS(){return N(this.s)}normalizeS(){return this.hasHighS()?new Z(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return qr(this.toDERHex())}toDERHex(){return Ue.hexFromSig(this)}toCompactRawBytes(){return qr(this.toCompactHex())}toCompactHex(){const g=s;return jn(this.r,g)+jn(this.s,g)}}const J={isValidPrivateKey(d){try{return R(d),!0}catch{return!1}},normPrivateKeyToScalar:R,randomPrivateKey:()=>{const d=Hs(t.n);return da(t.randomBytes(d),t.n)},precompute(d=8,g=A.BASE){return g._setWindowSize(d),g.multiply(BigInt(3)),g}};function W(d,g=!0){return A.fromPrivateKey(d).toRawBytes(g)}function P(d){if(typeof d=="bigint")return!1;if(d instanceof A)return!0;const S=Pt("key",d).length,v=e.BYTES,x=v+1,k=2*v+1;if(!(t.allowedPrivateKeyLengths||s===x))return S===x||S===k}function V(d,g,S=!0){if(P(d)===!0)throw new Error("first arg must be private key");if(P(g)===!1)throw new Error("second arg must be public key");return A.fromHex(g).multiply(R(d)).toRawBytes(S)}const Y=t.bits2int||function(d){if(d.length>8192)throw new Error("input is too large");const g=Ze(d),S=d.length*8-i;return S>0?g>>BigInt(S):g},rt=t.bits2int_modN||function(d){return p(Y(d))},nt=Xr(i);function K(d){return _e("num < 2^"+i,d,Fe,nt),Sr(d,s)}function F(d,g,S=q){if(["recovered","canonical"].some(ot=>ot in S))throw new Error("sign() legacy options not supported");const{hash:v,randomBytes:x}=t;let{lowS:k,prehash:y,extraEntropy:a}=S;k==null&&(k=!0),d=Pt("msgHash",d),hs(S),y&&(d=Pt("prehashed msgHash",v(d)));const u=rt(d),w=R(g),_=[K(w),K(u)];if(a!=null&&a!==!1){const ot=a===!0?x(e.BYTES):a;_.push(Pt("extraEntropy",ot))}const U=fr(..._),$=u;function tt(ot){const xt=Y(ot);if(!T(xt))return;const pt=E(xt),dt=A.BASE.multiply(xt).toAffine(),At=p(dt.x);if(At===Fe)return;const gt=p(pt*p($+At*w));if(gt===Fe)return;let vt=(dt.x===At?0:2)|Number(dt.y&ie),me=gt;return k&&N(gt)&&(me=I(gt),vt^=1),new Z(At,me,vt)}return{seed:U,k2sig:tt}}const q={lowS:t.lowS,prehash:!1},j={lowS:t.lowS,prehash:!1};function b(d,g,S=q){const{seed:v,k2sig:x}=F(d,g,S),k=t;return na(k.hash.outputLen,k.nByteLength,k.hmac)(v,x)}A.BASE._setWindowSize(8);function o(d,g,S,v=j){var vt;const x=d;g=Pt("msgHash",g),S=Pt("publicKey",S);const{lowS:k,prehash:y,format:a}=v;if(hs(v),"strict"in v)throw new Error("options.strict was renamed to lowS");if(a!==void 0&&a!=="compact"&&a!=="der")throw new Error("format must be compact or der");const u=typeof x=="string"||xr(x),w=!u&&!a&&typeof x=="object"&&x!==null&&typeof x.r=="bigint"&&typeof x.s=="bigint";if(!u&&!w)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let _,U;try{if(w&&(_=new Z(x.r,x.s)),u){try{a!=="compact"&&(_=Z.fromDER(x))}catch(me){if(!(me instanceof Ue.Err))throw me}!_&&a!=="der"&&(_=Z.fromCompact(x))}U=A.fromHex(S)}catch{return!1}if(!_||k&&_.hasHighS())return!1;y&&(g=t.hash(g));const{r:$,s:tt}=_,ot=rt(g),xt=E(tt),pt=p(ot*xt),dt=p($*xt),At=(vt=A.BASE.multiplyAndAddUnsafe(U,pt,dt))==null?void 0:vt.toAffine();return At?p(At.x)===$:!1}return{CURVE:t,getPublicKey:W,getSharedSecret:V,sign:b,verify:o,ProjectivePoint:A,Signature:Z,utils:J}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ru(n){return{hash:n,hmac:(t,...e)=>oo(n,t,Oo(...e)),randomBytes:Ms}}function nu(n,t){const e=r=>eu({...n,...ru(r)});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ao=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ds=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),iu=BigInt(0),su=BigInt(1),si=BigInt(2),ps=(n,t)=>(n+t/si)/t;function ou(n){const t=ao,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),c=BigInt(23),l=BigInt(44),p=BigInt(88),E=n*n*n%t,A=E*E*n%t,R=Ft(A,e,t)*A%t,O=Ft(R,e,t)*A%t,T=Ft(O,si,t)*E%t,N=Ft(T,s,t)*T%t,I=Ft(N,i,t)*N%t,L=Ft(I,l,t)*I%t,Z=Ft(L,p,t)*L%t,J=Ft(Z,l,t)*I%t,W=Ft(J,e,t)*A%t,P=Ft(W,c,t)*N%t,V=Ft(P,r,t)*E%t,Y=Ft(V,si,t);if(!oi.eql(oi.sqr(Y),n))throw new Error("Cannot find square root");return Y}const oi=Br(ao,void 0,void 0,{sqrt:ou}),au=nu({a:iu,b:BigInt(7),Fp:oi,n:ds,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=ds,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-su*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,c=BigInt("0x100000000000000000000000000000000"),l=ps(i*n,t),p=ps(-r*n,t);let E=Tt(n-l*e-p*s,t),A=Tt(-l*r-p*i,t);const R=E>c,O=A>c;if(R&&(E=t-E),O&&(A=t-A),E>c||A>c)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:R,k1:E,k2neg:O,k2:A}}}},Cs);function gs(n){try{return bi.ExtendedPoint.fromHex(n),!0}catch{return!1}}const cu=(n,t)=>bi.sign(n,t.slice(0,32)),uu=bi.verify,oe=n=>wt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?wt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):wt.Buffer.from(n);class fu{constructor(t){Object.assign(this,t)}encode(){return wt.Buffer.from(qn.serialize(Or,this))}static decode(t){return qn.deserialize(Or,this,t)}static decodeUnchecked(t){return qn.deserializeUnchecked(Or,this,t)}}const Or=new Map;var co;const lu=32,Ve=32;function hu(n){return n._bn!==void 0}let ms=1;class ft extends fu{constructor(t){if(super({}),this._bn=void 0,hu(t))this._bn=t._bn;else{if(typeof t=="string"){const e=ae.decode(t);if(e.length!=Ve)throw new Error("Invalid public key input");this._bn=new Xi(e)}else this._bn=new Xi(t);if(this._bn.byteLength()>Ve)throw new Error("Invalid public key input")}}static unique(){const t=new ft(ms);return ms+=1,new ft(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ae.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(wt.Buffer);if(t.length===Ve)return t;const e=wt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=wt.Buffer.concat([t.toBuffer(),wt.Buffer.from(e),r.toBuffer()]),i=rs(s);return new ft(i)}static createProgramAddressSync(t,e){let r=wt.Buffer.alloc(0);t.forEach(function(i){if(i.length>lu)throw new TypeError("Max seed length exceeded");r=wt.Buffer.concat([r,oe(i)])}),r=wt.Buffer.concat([r,e.toBuffer(),wt.Buffer.from("ProgramDerivedAddress")]);const s=rs(r);if(gs(s))throw new Error("Invalid seeds, address must fall off the curve");return new ft(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(wt.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ft(t);return gs(e.toBytes())}}co=ft;ft.default=new co("11111111111111111111111111111111");Or.set(ft,{kind:"struct",fields:[["_bn","u256"]]});new ft("BPFLoader1111111111111111111111111111111111");const ar=1232,uo=127,fo=64;class lo extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(lo.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ho extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ho.prototype,"name",{value:"TransactionExpiredTimeoutError"});class yr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(yr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Gr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,c)=>{r.set(i.toBase58(),c)});const s=i=>{const c=r.get(i.toBase58());if(c===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return c};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(c=>s(c.pubkey)),data:i.data}))}}const bt=(n="publicKey")=>M.blob(32,n),sr=(n="string")=>{const t=M.struct([M.u32("length"),M.u32("lengthPadding"),M.blob(M.offset(M.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,c)=>e(i,c).chars.toString(),s.encode=(i,c,l)=>{const p={chars:wt.Buffer.from(i,"utf8")};return r(p,c,l)},s.alloc=i=>M.u32().span+M.u32().span+wt.Buffer.from(i,"utf8").length,s},du=(n="authorized")=>M.struct([bt("staker"),bt("withdrawer")],n),pu=(n="lockup")=>M.struct([M.ns64("unixTimestamp"),M.ns64("epoch"),bt("custodian")],n),gu=(n="voteInit")=>M.struct([bt("nodePubkey"),bt("authorizedVoter"),bt("authorizedWithdrawer"),M.u8("commission")],n),mu=(n="voteAuthorizeWithSeedArgs")=>M.struct([M.u32("voteAuthorizationType"),bt("currentAuthorityDerivedKeyOwnerPubkey"),sr("currentAuthorityDerivedKeySeed"),bt("newAuthorized")],n);function po(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return po({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function xe(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Se(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function ne(n,t){if(!n)throw new Error(t||"Assertion failed")}class nn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=c=>{const l=c.toBase58();let p=r.get(l);return p===void 0&&(p={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(l,p)),p},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const c of t){s(c.programId).isInvoked=!0;for(const l of c.keys){const p=s(l.pubkey);p.isSigner||(p.isSigner=l.isSigner),p.isWritable||(p.isWritable=l.isWritable)}}return new nn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ne(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,p])=>p.isSigner&&p.isWritable),r=t.filter(([,p])=>p.isSigner&&!p.isWritable),s=t.filter(([,p])=>!p.isSigner&&p.isWritable),i=t.filter(([,p])=>!p.isSigner&&!p.isWritable),c={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{ne(e.length>0,"Expected at least one writable signer key");const[p]=e[0];ne(p===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...e.map(([p])=>new ft(p)),...r.map(([p])=>new ft(p)),...s.map(([p])=>new ft(p)),...i.map(([p])=>new ft(p))];return[c,l]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,c=>!c.isSigner&&!c.isInvoked&&c.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,c=>!c.isSigner&&!c.isInvoked&&!c.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,c]of this.keyMetaMap.entries())if(e(c)){const l=new ft(i),p=t.findIndex(E=>E.equals(l));p>=0&&(ne(p<256,"Max lookup table index exceeded"),r.push(p),s.push(l),this.keyMetaMap.delete(i))}return[r,s]}}const go="Reached end of buffer unexpectedly";function Oe(n){if(n.length===0)throw new Error(go);return n.shift()}function Ee(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(go);return n.splice(...t)}class Ge{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ft(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ae.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Gr(this.staticAccountKeys)}static compile(t){const e=nn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),c=new Gr(s).compileInstructions(t.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:ae.encode(l.data)}));return new Ge({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:c})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Se(e,t);const r=this.instructions.map(R=>{const{accounts:O,programIdIndex:T}=R,N=Array.from(ae.decode(R.data));let I=[];Se(I,O.length);let L=[];return Se(L,N.length),{programIdIndex:T,keyIndicesCount:wt.Buffer.from(I),keyIndices:O,dataLength:wt.Buffer.from(L),data:N}});let s=[];Se(s,r.length);let i=wt.Buffer.alloc(ar);wt.Buffer.from(s).copy(i);let c=s.length;r.forEach(R=>{const T=M.struct([M.u8("programIdIndex"),M.blob(R.keyIndicesCount.length,"keyIndicesCount"),M.seq(M.u8("keyIndex"),R.keyIndices.length,"keyIndices"),M.blob(R.dataLength.length,"dataLength"),M.seq(M.u8("userdatum"),R.data.length,"data")]).encode(R,i,c);c+=T}),i=i.slice(0,c);const l=M.struct([M.blob(1,"numRequiredSignatures"),M.blob(1,"numReadonlySignedAccounts"),M.blob(1,"numReadonlyUnsignedAccounts"),M.blob(e.length,"keyCount"),M.seq(bt("key"),t,"keys"),bt("recentBlockhash")]),p={numRequiredSignatures:wt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:wt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:wt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:wt.Buffer.from(e),keys:this.accountKeys.map(R=>oe(R.toBytes())),recentBlockhash:ae.decode(this.recentBlockhash)};let E=wt.Buffer.alloc(2048);const A=l.encode(p,E);return i.copy(E,A),E.slice(0,A+i.length)}static from(t){let e=[...t];const r=Oe(e);if(r!==(r&uo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Oe(e),i=Oe(e),c=xe(e);let l=[];for(let O=0;O<c;O++){const T=Ee(e,0,Ve);l.push(new ft(wt.Buffer.from(T)))}const p=Ee(e,0,Ve),E=xe(e);let A=[];for(let O=0;O<E;O++){const T=Oe(e),N=xe(e),I=Ee(e,0,N),L=xe(e),Z=Ee(e,0,L),J=ae.encode(wt.Buffer.from(Z));A.push({programIdIndex:T,accounts:I,data:J})}const R={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:ae.encode(wt.Buffer.from(p)),accountKeys:l,instructions:A};return new Ge(R)}}class jr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Gr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((c,l)=>c+l.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,c=r-e-this.header.numReadonlyUnsignedAccounts;return s<c}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=nn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const A of i){const R=e.extractTableLookup(A);if(R!==void 0){const[O,{writable:T,readonly:N}]=R;r.push(O),s.writable.push(...T),s.readonly.push(...N)}}const[c,l]=e.getMessageComponents(),E=new Gr(l,s).compileInstructions(t.instructions);return new jr({header:c,staticAccountKeys:l,recentBlockhash:t.recentBlockhash,compiledInstructions:E,addressTableLookups:r})}serialize(){const t=Array();Se(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Se(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Se(i,this.addressTableLookups.length);const c=M.struct([M.u8("prefix"),M.struct([M.u8("numRequiredSignatures"),M.u8("numReadonlySignedAccounts"),M.u8("numReadonlyUnsignedAccounts")],"header"),M.blob(t.length,"staticAccountKeysLength"),M.seq(bt(),this.staticAccountKeys.length,"staticAccountKeys"),bt("recentBlockhash"),M.blob(r.length,"instructionsLength"),M.blob(e.length,"serializedInstructions"),M.blob(i.length,"addressTableLookupsLength"),M.blob(s.length,"serializedAddressTableLookups")]),l=new Uint8Array(ar),E=c.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(A=>A.toBytes()),recentBlockhash:ae.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},l);return l.slice(0,E)}serializeInstructions(){let t=0;const e=new Uint8Array(ar);for(const r of this.compiledInstructions){const s=Array();Se(s,r.accountKeyIndexes.length);const i=Array();Se(i,r.data.length);const c=M.struct([M.u8("programIdIndex"),M.blob(s.length,"encodedAccountKeyIndexesLength"),M.seq(M.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),M.blob(i.length,"encodedDataLength"),M.blob(r.data.length,"data")]);t+=c.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(ar);for(const r of this.addressTableLookups){const s=Array();Se(s,r.writableIndexes.length);const i=Array();Se(i,r.readonlyIndexes.length);const c=M.struct([bt("accountKey"),M.blob(s.length,"encodedWritableIndexesLength"),M.seq(M.u8(),r.writableIndexes.length,"writableIndexes"),M.blob(i.length,"encodedReadonlyIndexesLength"),M.seq(M.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=c.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Oe(e),s=r&uo;ne(r!==s,"Expected versioned message but received legacy message");const i=s;ne(i===0,`Expected versioned message with version 0 but found version ${i}`);const c={numRequiredSignatures:Oe(e),numReadonlySignedAccounts:Oe(e),numReadonlyUnsignedAccounts:Oe(e)},l=[],p=xe(e);for(let N=0;N<p;N++)l.push(new ft(Ee(e,0,Ve)));const E=ae.encode(Ee(e,0,Ve)),A=xe(e),R=[];for(let N=0;N<A;N++){const I=Oe(e),L=xe(e),Z=Ee(e,0,L),J=xe(e),W=new Uint8Array(Ee(e,0,J));R.push({programIdIndex:I,accountKeyIndexes:Z,data:W})}const O=xe(e),T=[];for(let N=0;N<O;N++){const I=new ft(Ee(e,0,Ve)),L=xe(e),Z=Ee(e,0,L),J=xe(e),W=Ee(e,0,J);T.push({accountKey:I,writableIndexes:Z,readonlyIndexes:W})}return new jr({header:c,staticAccountKeys:l,recentBlockhash:E,compiledInstructions:R,addressTableLookups:T})}}let Ke=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const yu=wt.Buffer.alloc(fo).fill(0);class Ae{constructor(t){this.keys=void 0,this.programId=void 0,this.data=wt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Pe{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ae(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<e.length;I++)if(e[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const s=[],i=[];e.forEach(I=>{I.keys.forEach(Z=>{i.push({...Z})});const L=I.programId.toString();s.includes(L)||s.push(L)}),s.forEach(I=>{i.push({pubkey:new ft(I),isSigner:!1,isWritable:!1})});const c=[];i.forEach(I=>{const L=I.pubkey.toString(),Z=c.findIndex(J=>J.pubkey.toString()===L);Z>-1?(c[Z].isWritable=c[Z].isWritable||I.isWritable,c[Z].isSigner=c[Z].isSigner||I.isSigner):c.push(I)}),c.sort(function(I,L){if(I.isSigner!==L.isSigner)return I.isSigner?-1:1;if(I.isWritable!==L.isWritable)return I.isWritable?-1:1;const Z={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare(L.pubkey.toBase58(),"en",Z)});const l=c.findIndex(I=>I.pubkey.equals(r));if(l>-1){const[I]=c.splice(l,1);I.isSigner=!0,I.isWritable=!0,c.unshift(I)}else c.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const I of this.signatures){const L=c.findIndex(Z=>Z.pubkey.equals(I.publicKey));if(L>-1)c[L].isSigner||(c[L].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let p=0,E=0,A=0;const R=[],O=[];c.forEach(({pubkey:I,isSigner:L,isWritable:Z})=>{L?(R.push(I.toString()),p+=1,Z||(E+=1)):(O.push(I.toString()),Z||(A+=1))});const T=R.concat(O),N=e.map(I=>{const{data:L,programId:Z}=I;return{programIdIndex:T.indexOf(Z.toString()),accounts:I.keys.map(J=>T.indexOf(J.pubkey.toString())),data:ae.encode(L)}});return N.forEach(I=>{ne(I.programIdIndex>=0),I.accounts.forEach(L=>ne(L>=0))}),new Ge({header:{numRequiredSignatures:p,numReadonlySignedAccounts:E,numReadonlyUnsignedAccounts:A},accountKeys:T,recentBlockhash:t,instructions:N})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const c=i.publicKey.toString();e.has(c)||(e.add(c),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const c=i.publicKey.toString();e.has(c)||(e.add(c),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=cu(r,s.secretKey);this._addSignature(s.publicKey,oe(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ne(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=wt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||(r.missing=[])).push(i):uu(s,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let c="Signature verification failed.";throw i.invalid&&(c+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),i.missing&&(c+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(c)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Se(r,e.length);const s=r.length+e.length*64+t.length,i=wt.Buffer.alloc(s);return ne(e.length<256),wt.Buffer.from(r).copy(i,0),e.forEach(({signature:c},l)=>{c!==null&&(ne(c.length===64,"signature has invalid length"),wt.Buffer.from(c).copy(i,r.length+l*64))}),t.copy(i,r.length+e.length*64),ne(i.length<=ar,`Transaction too large: ${i.length} > ${ar}`),i}get keys(){return ne(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ne(this.instructions.length===1),this.instructions[0].programId}get data(){return ne(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=xe(e);let s=[];for(let i=0;i<r;i++){const c=Ee(e,0,fo);s.push(ae.encode(wt.Buffer.from(c)))}return Pe.populate(Ge.from(e),s)}static populate(t,e=[]){const r=new Pe;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const c={signature:s==ae.encode(yu)?null:ae.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(c)}),t.instructions.forEach(s=>{const i=s.accounts.map(c=>{const l=t.accountKeys[c];return{pubkey:l,isSigner:r.signatures.some(p=>p.publicKey.toString()===l.toString())||t.isAccountSigner(c),isWritable:t.isAccountWritable(c)}});r.instructions.push(new Ae({keys:i,programId:t.accountKeys[s.programIdIndex],data:ae.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}const wu=160,bu=64,vu=wu/bu,xu=1e3/vu;new ft("SysvarC1ock11111111111111111111111111111111");new ft("SysvarEpochSchedu1e111111111111111111111111");new ft("Sysvar1nstructions1111111111111111111111111");const Yn=new ft("SysvarRecentB1ockHashes11111111111111111111"),ys=new ft("SysvarRent111111111111111111111111111111111");new ft("SysvarRewards111111111111111111111111111111");new ft("SysvarS1otHashes111111111111111111111111111");new ft("SysvarS1otHistory11111111111111111111111111");new ft("SysvarStakeHistory1111111111111111111111111");class ws extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",c="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let l;switch(t){case"send":l=`Transaction ${e} resulted in an error. 
${r}. `+i+c;break;case"simulate":l=`Simulation failed. 
Message: ${r}. 
`+i+c;break;default:l=`Unknown action '${(p=>p)(t)}'`}super(l),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class at extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function ir(n){return new Promise(t=>setTimeout(t,n))}function be(n,t){const e=n.layout.span>=0?n.layout.span:po(n,t),r=wt.Buffer.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}const Su=M.nu64("lamportsPerSignature"),mo=M.struct([M.u32("version"),M.u32("state"),bt("authorizedPubkey"),bt("nonce"),M.struct([Su],"feeCalculator")]),bs=mo.span;class Bi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=mo.decode(oe(t),0);return new Bi({authorizedPubkey:new ft(e.authorizedPubkey),nonce:new ft(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function hr(n){const t=M.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=hc();return s.decode=(c,l)=>{const p=e(c,l);return i.decode(p)},s.encode=(c,l,p)=>{const E=i.encode(c);return r(E,l,p)},s}const ve=Object.freeze({Create:{index:0,layout:M.struct([M.u32("instruction"),M.ns64("lamports"),M.ns64("space"),bt("programId")])},Assign:{index:1,layout:M.struct([M.u32("instruction"),bt("programId")])},Transfer:{index:2,layout:M.struct([M.u32("instruction"),hr("lamports")])},CreateWithSeed:{index:3,layout:M.struct([M.u32("instruction"),bt("base"),sr("seed"),M.ns64("lamports"),M.ns64("space"),bt("programId")])},AdvanceNonceAccount:{index:4,layout:M.struct([M.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:M.struct([M.u32("instruction"),bt("authorized")])},AuthorizeNonceAccount:{index:7,layout:M.struct([M.u32("instruction"),bt("authorized")])},Allocate:{index:8,layout:M.struct([M.u32("instruction"),M.ns64("space")])},AllocateWithSeed:{index:9,layout:M.struct([M.u32("instruction"),bt("base"),sr("seed"),M.ns64("space"),bt("programId")])},AssignWithSeed:{index:10,layout:M.struct([M.u32("instruction"),bt("base"),sr("seed"),bt("programId")])},TransferWithSeed:{index:11,layout:M.struct([M.u32("instruction"),hr("lamports"),sr("seed"),bt("programId")])},UpgradeNonceAccount:{index:12,layout:M.struct([M.u32("instruction")])}});class Zr{constructor(){}static createAccount(t){const e=ve.Create,r=be(e,{lamports:t.lamports,space:t.space,programId:oe(t.programId.toBuffer())});return new Ae({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=ve.TransferWithSeed;e=be(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:oe(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=ve.Transfer;e=be(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Ae({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=ve.AssignWithSeed;e=be(s,{base:oe(t.basePubkey.toBuffer()),seed:t.seed,programId:oe(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ve.Assign;e=be(s,{programId:oe(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ae({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=ve.CreateWithSeed,r=be(e,{base:oe(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:oe(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Ae({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new Pe;"basePubkey"in t&&"seed"in t?e.add(Zr.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:bs,programId:this.programId})):e.add(Zr.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:bs,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=ve.InitializeNonceAccount,r=be(e,{authorized:oe(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Yn,isSigner:!1,isWritable:!1},{pubkey:ys,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Ae(s)}static nonceAdvance(t){const e=ve.AdvanceNonceAccount,r=be(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Yn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Ae(s)}static nonceWithdraw(t){const e=ve.WithdrawNonceAccount,r=be(e,{lamports:t.lamports});return new Ae({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Yn,isSigner:!1,isWritable:!1},{pubkey:ys,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=ve.AuthorizeNonceAccount,r=be(e,{authorized:oe(t.newAuthorizedPubkey.toBuffer())});return new Ae({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=ve.AllocateWithSeed;e=be(s,{base:oe(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:oe(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ve.Allocate;e=be(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ae({keys:r,programId:this.programId,data:e})}}Zr.programId=new ft("11111111111111111111111111111111");new ft("BPFLoader2111111111111111111111111111111111");function Eu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jn,vs;function Bu(){if(vs)return Jn;vs=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,c,l,p,E,A,R;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(R=n.call(r),R==="[object Array]"){for(l="[",c=r.length-1,i=0;i<c;i++)l+=e(r[i],!0)+",";return c>-1&&(l+=e(r[i],!0)),l+"]"}else if(R==="[object Object]"){for(p=t(r).sort(),c=p.length,l="",i=0;i<c;)E=p[i],A=e(r[E],!1),A!==void 0&&(l&&(l+=","),l+=JSON.stringify(E)+":"+A),i++;return"{"+l+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Jn=function(r){var s=e(r,!1);if(s!==void 0)return""+s},Jn}var Au=Bu(),xs=Eu(Au);const mr=32;function Xn(n){let t=0;for(;n>1;)n/=2,t++;return t}function _u(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class ku{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Xn(_u(t+mr+1))-Xn(mr)-1,r=this.getSlotsInEpoch(e),s=t-(r-mr);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*mr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Xn(mr)):this.slotsPerEpoch}}var Iu=globalThis.fetch;class Ru extends Zc{constructor(t,e,r){const s=i=>{const c=Gc(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in c?this.underlyingSocket=c.socket:this.underlyingSocket=c,c};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Mu(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const Ss=56;class Es{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Mu(Tu,t),r=t.length-Ss;ne(r>=0,"lookup table is invalid"),ne(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=M.struct([M.seq(bt(),s,"addresses")]).decode(t.slice(Ss));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ft(e.authority[0]):void 0,addresses:i.map(c=>new ft(c))}}}const Tu={index:1,layout:M.struct([M.u32("typeIndex"),hr("deactivationSlot"),M.nu64("lastExtendedSlot"),M.u8("lastExtendedStartIndex"),M.u8(),M.seq(bt(),M.offset(M.u8(),-1),"authority")])},Lu=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Cu(n){const t=n.match(Lu);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,c=n.startsWith("https:")?"wss:":"ws:",l=s==null?null:parseInt(s.slice(1),10),p=l==null?"":`:${l+1}`;return`${c}//${r}${p}${i}`}const Ct=kr(Si(ft),Q(),n=>new ft(n)),yo=Ei([Q(),Lt("base64")]),Ai=kr(Si(wt.Buffer),yo,n=>wt.Buffer.from(n[0],"base64")),Uu=30*1e3;function Nu(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function _t(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function Bs(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function wo(n){return ge([X({jsonrpc:Lt("2.0"),id:Q(),result:n}),X({jsonrpc:Lt("2.0"),id:Q(),error:X({code:dr(),message:Q(),data:ct(bc())})})])}const Fu=wo(dr());function yt(n){return kr(wo(n),Fu,t=>"error"in t?t:{...t,result:et(t.result,n)})}function Ot(n){return yt(X({context:X({slot:D()}),value:n}))}function sn(n){return X({context:X({slot:D()}),value:n})}function Qn(n,t){return n===0?new jr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ft(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ae.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Ge(t)}const Ou=X({foundation:D(),foundationTerm:D(),initial:D(),taper:D(),terminal:D()}),Pu=yt(it(st(X({epoch:D(),effectiveSlot:D(),amount:D(),postBalance:D(),commission:ct(st(D()))})))),qu=it(X({slot:D(),prioritizationFee:D()})),zu=X({total:D(),validator:D(),foundation:D(),epoch:D()}),Du=X({epoch:D(),slotIndex:D(),slotsInEpoch:D(),absoluteSlot:D(),blockHeight:ct(D()),transactionCount:ct(D())}),Hu=X({slotsPerEpoch:D(),leaderScheduleSlotOffset:D(),warmup:Me(),firstNormalEpoch:D(),firstNormalSlot:D()}),Ku=Xs(Q(),it(D())),Je=st(ge([X({}),Q()])),Wu=X({err:Je}),$u=Lt("receivedSignature"),Vu=X({"solana-core":Q(),"feature-set":ct(D())}),Gu=X({program:Q(),programId:Ct,parsed:dr()}),ju=X({programId:Ct,accounts:it(Ct),data:Q()}),As=Ot(X({err:st(ge([X({}),Q()])),logs:st(it(Q())),accounts:ct(st(it(st(X({executable:Me(),owner:Q(),lamports:D(),data:it(Q()),rentEpoch:ct(D())}))))),unitsConsumed:ct(D()),returnData:ct(st(X({programId:Q(),data:Ei([Q(),Lt("base64")])}))),innerInstructions:ct(st(it(X({index:D(),instructions:it(ge([Gu,ju]))}))))})),Zu=Ot(X({byIdentity:Xs(Q(),it(D())),range:X({firstSlot:D(),lastSlot:D()})}));function Yu(n,t,e,r,s,i){const c=e||Iu;let l;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let p;return r&&(p=async(A,R)=>{const O=await new Promise((T,N)=>{try{r(A,R,(I,L)=>T([I,L]))}catch(I){N(I)}});return await c(...O)}),new Kc(async(A,R)=>{const O={method:"POST",body:A,agent:l,headers:Object.assign({"Content-Type":"application/json"},t||{},Jf)};try{let T=5,N,I=500;for(;p?N=await p(n,O):N=await c(n,O),!(N.status!==429||s===!0||(T-=1,T===0));)console.error(`Server responded with ${N.status} ${N.statusText}.  Retrying after ${I}ms delay...`),await ir(I),I*=2;const L=await N.text();N.ok?R(null,L):R(new Error(`${N.status} ${N.statusText}: ${L}`))}catch(T){T instanceof Error&&R(T)}},{})}function Ju(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,c)=>{if(i){s(i);return}r(c)})})}function Xu(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,c)=>{if(i){r(i);return}e(c)})})}const Qu=yt(Ou),tf=yt(zu),ef=yt(qu),rf=yt(Du),nf=yt(Hu),sf=yt(Ku),of=yt(D()),af=Ot(X({total:D(),circulating:D(),nonCirculating:D(),nonCirculatingAccounts:it(Ct)})),ai=X({amount:Q(),uiAmount:st(D()),decimals:D(),uiAmountString:ct(Q())}),cf=Ot(it(X({address:Ct,amount:Q(),uiAmount:st(D()),decimals:D(),uiAmountString:ct(Q())}))),uf=Ot(it(X({pubkey:Ct,account:X({executable:Me(),owner:Ct,lamports:D(),data:Ai,rentEpoch:D()})}))),ci=X({program:Q(),parsed:dr(),space:D()}),ff=Ot(it(X({pubkey:Ct,account:X({executable:Me(),owner:Ct,lamports:D(),data:ci,rentEpoch:D()})}))),lf=Ot(it(X({lamports:D(),address:Ct}))),br=X({executable:Me(),owner:Ct,lamports:D(),data:Ai,rentEpoch:D()}),hf=X({pubkey:Ct,account:br}),df=kr(ge([Si(wt.Buffer),ci]),ge([yo,ci]),n=>Array.isArray(n)?et(n,Ai):n),ui=X({executable:Me(),owner:Ct,lamports:D(),data:df,rentEpoch:D()}),pf=X({pubkey:Ct,account:ui}),gf=X({state:ge([Lt("active"),Lt("inactive"),Lt("activating"),Lt("deactivating")]),active:D(),inactive:D()}),mf=yt(it(X({signature:Q(),slot:D(),err:Je,memo:st(Q()),blockTime:ct(st(D()))}))),yf=yt(it(X({signature:Q(),slot:D(),err:Je,memo:st(Q()),blockTime:ct(st(D()))}))),wf=X({subscription:D(),result:sn(br)}),bf=X({pubkey:Ct,account:br}),vf=X({subscription:D(),result:sn(bf)}),xf=X({parent:D(),slot:D(),root:D()}),Sf=X({subscription:D(),result:xf}),Ef=ge([X({type:ge([Lt("firstShredReceived"),Lt("completed"),Lt("optimisticConfirmation"),Lt("root")]),slot:D(),timestamp:D()}),X({type:Lt("createdBank"),parent:D(),slot:D(),timestamp:D()}),X({type:Lt("frozen"),slot:D(),timestamp:D(),stats:X({numTransactionEntries:D(),numSuccessfulTransactions:D(),numFailedTransactions:D(),maxTransactionsPerEntry:D()})}),X({type:Lt("dead"),slot:D(),timestamp:D(),err:Q()})]),Bf=X({subscription:D(),result:Ef}),Af=X({subscription:D(),result:sn(ge([Wu,$u]))}),_f=X({subscription:D(),result:D()}),kf=X({pubkey:Q(),gossip:st(Q()),tpu:st(Q()),rpc:st(Q()),version:st(Q())}),_s=X({votePubkey:Q(),nodePubkey:Q(),activatedStake:D(),epochVoteAccount:Me(),epochCredits:it(Ei([D(),D(),D()])),commission:D(),lastVote:D(),rootSlot:st(D())}),If=yt(X({current:it(_s),delinquent:it(_s)})),Rf=ge([Lt("processed"),Lt("confirmed"),Lt("finalized")]),Mf=X({slot:D(),confirmations:st(D()),err:Je,confirmationStatus:ct(Rf)}),Tf=Ot(it(st(Mf))),Lf=yt(D()),bo=X({accountKey:Ct,writableIndexes:it(D()),readonlyIndexes:it(D())}),_i=X({signatures:it(Q()),message:X({accountKeys:it(Q()),header:X({numRequiredSignatures:D(),numReadonlySignedAccounts:D(),numReadonlyUnsignedAccounts:D()}),instructions:it(X({accounts:it(D()),data:Q(),programIdIndex:D()})),recentBlockhash:Q(),addressTableLookups:ct(it(bo))})}),vo=X({pubkey:Ct,signer:Me(),writable:Me(),source:ct(ge([Lt("transaction"),Lt("lookupTable")]))}),xo=X({accountKeys:it(vo),signatures:it(Q())}),So=X({parsed:dr(),program:Q(),programId:Ct}),Eo=X({accounts:it(Ct),data:Q(),programId:Ct}),Cf=ge([Eo,So]),Uf=ge([X({parsed:dr(),program:Q(),programId:Q()}),X({accounts:it(Q()),data:Q(),programId:Q()})]),Bo=kr(Cf,Uf,n=>"accounts"in n?et(n,Eo):et(n,So)),Ao=X({signatures:it(Q()),message:X({accountKeys:it(vo),instructions:it(Bo),recentBlockhash:Q(),addressTableLookups:ct(st(it(bo)))})}),Yr=X({accountIndex:D(),mint:Q(),owner:ct(Q()),programId:ct(Q()),uiTokenAmount:ai}),_o=X({writable:it(Ct),readonly:it(Ct)}),on=X({err:Je,fee:D(),innerInstructions:ct(st(it(X({index:D(),instructions:it(X({accounts:it(D()),data:Q(),programIdIndex:D()}))})))),preBalances:it(D()),postBalances:it(D()),logMessages:ct(st(it(Q()))),preTokenBalances:ct(st(it(Yr))),postTokenBalances:ct(st(it(Yr))),loadedAddresses:ct(_o),computeUnitsConsumed:ct(D())}),ki=X({err:Je,fee:D(),innerInstructions:ct(st(it(X({index:D(),instructions:it(Bo)})))),preBalances:it(D()),postBalances:it(D()),logMessages:ct(st(it(Q()))),preTokenBalances:ct(st(it(Yr))),postTokenBalances:ct(st(it(Yr))),loadedAddresses:ct(_o),computeUnitsConsumed:ct(D())}),pr=ge([Lt(0),Lt("legacy")]),Xe=X({pubkey:Q(),lamports:D(),postBalance:st(D()),rewardType:st(Q()),commission:ct(st(D()))}),Nf=yt(st(X({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:it(X({transaction:_i,meta:st(on),version:ct(pr)})),rewards:ct(it(Xe)),blockTime:st(D()),blockHeight:st(D())}))),Ff=yt(st(X({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),rewards:ct(it(Xe)),blockTime:st(D()),blockHeight:st(D())}))),Of=yt(st(X({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:it(X({transaction:xo,meta:st(on),version:ct(pr)})),rewards:ct(it(Xe)),blockTime:st(D()),blockHeight:st(D())}))),Pf=yt(st(X({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:it(X({transaction:Ao,meta:st(ki),version:ct(pr)})),rewards:ct(it(Xe)),blockTime:st(D()),blockHeight:st(D())}))),qf=yt(st(X({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:it(X({transaction:xo,meta:st(ki),version:ct(pr)})),rewards:ct(it(Xe)),blockTime:st(D()),blockHeight:st(D())}))),zf=yt(st(X({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),rewards:ct(it(Xe)),blockTime:st(D()),blockHeight:st(D())}))),Df=yt(st(X({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:it(X({transaction:_i,meta:st(on)})),rewards:ct(it(Xe)),blockTime:st(D())}))),ks=yt(st(X({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),signatures:it(Q()),blockTime:st(D())}))),ti=yt(st(X({slot:D(),meta:st(on),blockTime:ct(st(D())),transaction:_i,version:ct(pr)}))),Nr=yt(st(X({slot:D(),transaction:Ao,meta:st(ki),blockTime:ct(st(D())),version:ct(pr)}))),Hf=Ot(X({blockhash:Q(),lastValidBlockHeight:D()})),Kf=Ot(Me()),Wf=X({slot:D(),numTransactions:D(),numSlots:D(),samplePeriodSecs:D()}),$f=yt(it(Wf)),Vf=Ot(st(X({feeCalculator:X({lamportsPerSignature:D()})}))),Gf=yt(Q()),jf=yt(Q()),Zf=X({err:Je,logs:it(Q()),signature:Q()}),Yf=X({result:sn(Zf),subscription:D()}),Jf={"solana-client":"js/1.0.0-maintenance"};class nl{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const E={};return async A=>{const{commitment:R,config:O}=_t(A),T=this._buildArgs([],R,void 0,O),N=xs(T);return E[N]=E[N]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",T),L=et(I,yt(D()));if("error"in L)throw new at(L.error,"failed to get block height information");return L.result}finally{delete E[N]}})(),await E[N]}})();let r,s,i,c,l,p;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,c=e.fetchMiddleware,l=e.disableRetryOnRateLimit,p=e.httpAgent),this._rpcEndpoint=Nu(t),this._rpcWsEndpoint=r||Cu(t),this._rpcClient=Yu(t,s,i,c,l,p),this._rpcRequest=Ju(this._rpcClient),this._rpcBatchRequest=Xu(this._rpcClient),this._rpcWebSocket=new Ru(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,void 0,s),c=await this._rpcRequest("getBalance",i),l=et(c,Ot(D()));if("error"in l)throw new at(l.error,`failed to get balance for ${t.toBase58()}`);return l.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=et(e,yt(st(D())));if("error"in r)throw new at(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=et(t,yt(D()));if("error"in e)throw new at(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=et(t,of);if("error"in e)throw new at(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=et(r,af);if("error"in s)throw new at(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=et(s,Ot(ai));if("error"in i)throw new at(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=et(s,Ot(ai));if("error"in i)throw new at(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=_t(r);let c=[t.toBase58()];"mint"in e?c.push({mint:e.mint.toBase58()}):c.push({programId:e.programId.toBase58()});const l=this._buildArgs(c,s,"base64",i),p=await this._rpcRequest("getTokenAccountsByOwner",l),E=et(p,uf);if("error"in E)throw new at(E.error,`failed to get token accounts owned by account ${t.toBase58()}`);return E.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),c=await this._rpcRequest("getTokenAccountsByOwner",i),l=et(c,ff);if("error"in l)throw new at(l.error,`failed to get token accounts owned by account ${t.toBase58()}`);return l.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=et(s,lf);if("error"in i)throw new at(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=et(s,cf);if("error"in i)throw new at(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,"base64",s),c=await this._rpcRequest("getAccountInfo",i),l=et(c,Ot(st(br)));if("error"in l)throw new at(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),c=await this._rpcRequest("getAccountInfo",i),l=et(c,Ot(st(ui)));if("error"in l)throw new at(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=_t(e),i=t.map(E=>E.toBase58()),c=this._buildArgs([i],r,"jsonParsed",s),l=await this._rpcRequest("getMultipleAccounts",c),p=et(l,Ot(it(st(ui))));if("error"in p)throw new at(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=_t(e),i=t.map(E=>E.toBase58()),c=this._buildArgs([i],r,"base64",s),l=await this._rpcRequest("getMultipleAccounts",c),p=et(l,Ot(it(st(br))));if("error"in p)throw new at(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=_t(e),c=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),l=await this._rpcRequest("getStakeActivation",c),p=et(l,yt(gf));if("error"in p)throw new at(p.error,`failed to get Stake Activation ${t.toBase58()}`);return p.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=_t(e),{encoding:i,...c}=s||{},l=this._buildArgs([t.toBase58()],r,i||"base64",{...c,...c.filters?{filters:Bs(c.filters)}:null}),p=await this._rpcRequest("getProgramAccounts",l),E=it(hf),A=c.withContext===!0?et(p,Ot(E)):et(p,yt(E));if("error"in A)throw new at(A.error,`failed to get accounts owned by program ${t.toBase58()}`);return A.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),c=await this._rpcRequest("getProgramAccounts",i),l=et(c,yt(it(pf)));if("error"in l)throw new at(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const c=t;if((i=c.abortSignal)!=null&&i.aborted)return Promise.reject(c.abortSignal.reason);r=c.signature}let s;try{s=ae.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ne(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const c=new Promise((p,E)=>{try{r=this.onSignature(e,(R,O)=>{r=void 0;const T={context:O,value:R};p({__type:Ke.PROCESSED,response:T})},t);const A=new Promise(R=>{r==null?R():s=this._onSubscriptionStateChange(r,O=>{O==="subscribed"&&R()})});(async()=>{if(await A,i)return;const R=await this.getSignatureStatus(e);if(i||R==null)return;const{context:O,value:T}=R;if(T!=null)if(T!=null&&T.err)E(T.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(T.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(T.confirmationStatus==="processed"||T.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,p({__type:Ke.PROCESSED,response:{context:O,value:T}})}})()}catch(A){E(A)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:c}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const c=new Promise(R=>{const O=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let T=await O();if(!i){for(;T<=r;)if(await ir(1e3),i||(T=await O(),i))return;R({__type:Ke.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:p}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),E=this.getCancellationPromise(e);let A;try{const R=await Promise.race([E,p,c]);if(R.__type===Ke.PROCESSED)A=R.response;else throw new lo(s)}finally{i=!0,l()}return A}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:c}}){let l=!1;const p=new Promise(T=>{let N=i,I=null;const L=async()=>{try{const{context:Z,value:J}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return I=Z.slot,J==null?void 0:J.nonce}catch{return N}};(async()=>{if(N=await L(),!l)for(;;){if(i!==N){T({__type:Ke.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await ir(2e3),l||(N=await L(),l))return}})()}),{abortConfirmation:E,confirmationPromise:A}=this.getTransactionConfirmationPromise({commitment:t,signature:c}),R=this.getCancellationPromise(e);let O;try{const T=await Promise.race([R,A,p]);if(T.__type===Ke.PROCESSED)O=T.response;else{let N;for(;;){const I=await this.getSignatureStatus(c);if(I==null)break;if(I.context.slot<(T.slotInWhichNonceDidAdvance??r)){await ir(400);continue}N=I;break}if(N!=null&&N.value){const I=t||"finalized",{confirmationStatus:L}=N.value;switch(I){case"processed":case"recent":if(L!=="processed"&&L!=="confirmed"&&L!=="finalized")throw new yr(c);break;case"confirmed":case"single":case"singleGossip":if(L!=="confirmed"&&L!=="finalized")throw new yr(c);break;case"finalized":case"max":case"root":if(L!=="finalized")throw new yr(c);break;default:}O={context:N.context,value:{err:N.value.err}}}else throw new yr(c)}}finally{l=!0,E()}return O}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(p=>{let E=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{E=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>p({__type:Ke.TIMED_OUT,timeoutMs:E}),E)}),{abortConfirmation:i,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let l;try{const p=await Promise.race([c,s]);if(p.__type===Ke.PROCESSED)l=p.response;else throw new ho(e,p.timeoutMs/1e3)}finally{clearTimeout(r),i()}return l}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=et(t,yt(it(kf)));if("error"in e)throw new at(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=et(r,If);if("error"in s)throw new at(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),c=et(i,yt(D()));if("error"in c)throw new at(c.error,"failed to get slot");return c.result}async getSlotLeader(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),c=et(i,yt(Q()));if("error"in c)throw new at(c.error,"failed to get slot leader");return c.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=et(s,yt(it(Ct)));if("error"in i)throw new at(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);ne(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=et(s,Tf);if("error"in i)throw new at(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),c=et(i,yt(D()));if("error"in c)throw new at(c.error,"failed to get transaction count");return c.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=et(r,Qu);if("error"in s)throw new at(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=_t(r),c=this._buildArgs([t.map(E=>E.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),l=await this._rpcRequest("getInflationReward",c),p=et(l,Pu);if("error"in p)throw new at(p.error,"failed to get inflation reward");return p.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=et(t,tf);if("error"in e)throw new at(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),c=et(i,rf);if("error"in c)throw new at(c.error,"failed to get epoch info");return c.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=et(t,nf);if("error"in e)throw new at(e.error,"failed to get epoch schedule");const r=e.result;return new ku(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=et(t,sf);if("error"in e)throw new at(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=et(s,Lf);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=et(e,$f);if("error"in r)throw new at(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=et(s,Vf);if("error"in i)throw new at(i.error,"failed to get fee calculator");const{context:c,value:l}=i.result;return{context:c,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(t,e){const r=oe(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),c=et(i,Ot(st(D())));if("error"in c)throw new at(c.error,"failed to get fee for message");if(c.result===null)throw new Error("invalid blockhash");return c.result}async getRecentPrioritizationFees(t){var c;const e=(c=t==null?void 0:t.lockedWritableAccounts)==null?void 0:c.map(l=>l.toBase58()),r=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=et(s,ef);if("error"in i)throw new at(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),c=et(i,Hf);if("error"in c)throw new at(c.error,"failed to get latest blockhash");return c.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t],r,void 0,s),c=await this._rpcRequest("isBlockhashValid",i),l=et(c,Kf);if("error"in l)throw new at(l.error,"failed to determine if the blockhash `"+t+"`is valid");return l.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=et(t,yt(Vu));if("error"in e)throw new at(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=et(t,yt(Q()));if("error"in e)throw new at(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),c=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const l=et(c,Of);if("error"in l)throw l.error;return l.result}case"none":{const l=et(c,Ff);if("error"in l)throw l.error;return l.result}default:{const l=et(c,Nf);if("error"in l)throw l.error;const{result:p}=l;return p?{...p,transactions:p.transactions.map(({transaction:E,meta:A,version:R})=>({meta:A,transaction:{...E,message:Qn(R,E.message)},version:R}))}:null}}}catch(l){throw new at(l,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),c=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const l=et(c,qf);if("error"in l)throw l.error;return l.result}case"none":{const l=et(c,zf);if("error"in l)throw l.error;return l.result}default:{const l=et(c,Pf);if("error"in l)throw l.error;return l.result}}}catch(l){throw new at(l,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:l,...p}=t;r=l,e=p}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),c=et(i,Zu);if("error"in c)throw new at(c.error,"failed to get block production information");return c.result}async getTransaction(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),c=await this._rpcRequest("getTransaction",i),l=et(c,ti);if("error"in l)throw new at(l.error,"failed to get transaction");const p=l.result;return p&&{...p,transaction:{...p.transaction,message:Qn(p.version,p.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),c=await this._rpcRequest("getTransaction",i),l=et(c,Nr);if("error"in l)throw new at(l.error,"failed to get transaction");return l.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=_t(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(p=>{const E=et(p,Nr);if("error"in E)throw new at(E.error,"failed to get transactions");return E.result})}async getTransactions(t,e){const{commitment:r,config:s}=_t(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(p=>{const E=et(p,ti);if("error"in E)throw new at(E.error,"failed to get transactions");const A=E.result;return A&&{...A,transaction:{...A.transaction,message:Qn(A.version,A.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=et(s,Df);if("error"in i)throw new at(i.error,"failed to get confirmed block");const c=i.result;if(!c)throw new Error("Confirmed block "+t+" not found");const l={...c,transactions:c.transactions.map(({transaction:p,meta:E})=>{const A=new Ge(p.message);return{meta:E,transaction:{...p,message:A}}})};return{...l,transactions:l.transactions.map(({transaction:p,meta:E})=>({meta:E,transaction:Pe.populate(p.message,p.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),c=et(i,yt(it(D())));if("error"in c)throw new at(c.error,"failed to get blocks");return c.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=et(s,ks);if("error"in i)throw new at(i.error,"failed to get block");const c=i.result;if(!c)throw new Error("Block "+t+" not found");return c}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=et(s,ks);if("error"in i)throw new at(i.error,"failed to get confirmed block");const c=i.result;if(!c)throw new Error("Confirmed block "+t+" not found");return c}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=et(s,ti);if("error"in i)throw new at(i.error,"failed to get transaction");const c=i.result;if(!c)return c;const l=new Ge(c.transaction.message),p=c.transaction.signatures;return{...c,transaction:Pe.populate(l,p)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=et(s,Nr);if("error"in i)throw new at(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(c=>{const l=et(c,Nr);if("error"in l)throw new at(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const p=await this.getConfirmedBlockSignatures(e,"finalized");p.signatures.length>0&&(s.until=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}let c=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>c));)try{const p=await this.getConfirmedBlockSignatures(r);p.signatures.length>0&&(s.before=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(p=>p.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),c=et(i,mf);if("error"in c)throw new at(c.error,"failed to get confirmed signatures for address");return c.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),c=et(i,yf);if("error"in c)throw new at(c.error,"failed to get signatures for address");return c.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Es({key:t,state:Es.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Bi.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=et(r,Gf);if("error"in s)throw new at(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await ir(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Uu;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await ir(xu/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),c=et(i,Ot(D()));if("error"in c)throw new at(c.error,"failed to get stake minimum delegation");return c.result}async simulateTransaction(t,e,r){if("message"in t){const I=t.serialize(),L=wt.Buffer.from(I).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const Z=e||{};Z.encoding="base64","commitment"in Z||(Z.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(Z.innerInstructions=e.innerInstructions);const J=[L,Z],W=await this._rpcRequest("simulateTransaction",J),P=et(W,As);if("error"in P)throw new Error("failed to simulate transaction: "+P.error.message);return P.result}let s;if(t instanceof Pe){let N=t;s=new Pe,s.feePayer=N.feePayer,s.instructions=t.instructions,s.nonceInfo=N.nonceInfo,s.signatures=N.signatures}else s=Pe.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let N=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(N);if(s.lastValidBlockHeight=I.lastValidBlockHeight,s.recentBlockhash=I.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const L=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(L)&&!this._blockhashInfo.transactionSignatures.includes(L)){this._blockhashInfo.simulatedSignatures.push(L);break}else N=!0}}const c=s._compile(),l=c.serialize(),E=s._serialize(l).toString("base64"),A={encoding:"base64",commitment:this.commitment};if(r){const N=(Array.isArray(r)?r:c.nonProgramIds()).map(I=>I.toBase58());A.accounts={encoding:"base64",addresses:N}}i&&(A.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(A.innerInstructions=e.innerInstructions);const R=[E,A],O=await this._rpcRequest("simulateTransaction",R),T=et(O,As);if("error"in T){let N;if("data"in T.error&&(N=T.error.data.logs,N&&Array.isArray(N))){const I=`
    `,L=I+N.join(I);console.error(T.error.message,L)}throw new ws({action:"simulate",signature:"",transactionMessage:T.error.message,logs:N})}return T.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const c=t.serialize();return await this.sendRawTransaction(c,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let c=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(c);if(t.lastValidBlockHeight=l.lastValidBlockHeight,t.recentBlockhash=l.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const p=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(p))c=!0;else{this._blockhashInfo.transactionSignatures.push(p);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=oe(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const c=[t,r],l=await this._rpcRequest("sendTransaction",c),p=et(l,jf);if("error"in p){let E;throw"data"in p.error&&(E=p.error.data.logs),new ws({action:s?"send":"simulate",signature:"",transactionMessage:p.error.message,logs:E})}return p.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var s;const r=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(c=>{try{c(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:c}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const l=await this._rpcWebSocket.call(c,i);this._setSubscription(r,{...s,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=s.callbacks,await this._updateSubscriptions()}catch(l){if(console.error(`Received ${l instanceof Error?"":"JSON-RPC "}error calling \`${c}\``,{args:i,error:l}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:c}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(c,[i])}catch(l){if(l instanceof Error&&console.error(`${c} error:`,l.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=et(t,wf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=xs([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const c=this._subscriptionsByHash[s];ne(c!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),c.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=_t(r),c=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},c)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=et(t,vf);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:c}=_t(r),l=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",c||(s?{filters:Bs(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},l)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=et(t,Yf);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=et(t,Sf);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=et(t,Bf);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let c={};r&&(c.encoding=r),i&&(c.commitment=i),s&&(c=Object.assign(c,s)),t.push(c)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=et(t,Af);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(c,l)=>{if(c.type==="status"){e(c.result,l);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},c=this._buildArgs([t],s,void 0,i),l=this._makeSubscription({callback:(p,E)=>{e(p,E);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},c);return l}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=et(t,_f);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:M.struct([M.u32("instruction"),hr("recentSlot"),M.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:M.struct([M.u32("instruction")])},ExtendLookupTable:{index:2,layout:M.struct([M.u32("instruction"),hr(),M.seq(bt(),M.offset(M.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:M.struct([M.u32("instruction")])},CloseLookupTable:{index:4,layout:M.struct([M.u32("instruction")])}});new ft("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:M.struct([M.u8("instruction"),M.u32("units"),M.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:M.struct([M.u8("instruction"),M.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:M.struct([M.u8("instruction"),M.u32("units")])},SetComputeUnitPrice:{index:3,layout:M.struct([M.u8("instruction"),hr("microLamports")])}});new ft("ComputeBudget111111111111111111111111111111");M.struct([M.u8("numSignatures"),M.u8("padding"),M.u16("signatureOffset"),M.u16("signatureInstructionIndex"),M.u16("publicKeyOffset"),M.u16("publicKeyInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u16("messageInstructionIndex")]);new ft("Ed25519SigVerify111111111111111111111111111");au.utils.isValidPrivateKey;M.struct([M.u8("numSignatures"),M.u16("signatureOffset"),M.u8("signatureInstructionIndex"),M.u16("ethAddressOffset"),M.u8("ethAddressInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u8("messageInstructionIndex"),M.blob(20,"ethAddress"),M.blob(64,"signature"),M.u8("recoveryId")]);new ft("KeccakSecp256k11111111111111111111111111111");var ko;new ft("StakeConfig11111111111111111111111111111111");class Io{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}ko=Io;Io.default=new ko(0,0,ft.default);Object.freeze({Initialize:{index:0,layout:M.struct([M.u32("instruction"),du(),pu()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),bt("newAuthorized"),M.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:M.struct([M.u32("instruction")])},Split:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Withdraw:{index:4,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Deactivate:{index:5,layout:M.struct([M.u32("instruction")])},Merge:{index:7,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:M.struct([M.u32("instruction"),bt("newAuthorized"),M.u32("stakeAuthorizationType"),sr("authoritySeed"),bt("authorityOwner")])}});new ft("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:M.struct([M.u32("instruction"),gu()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),bt("newAuthorized"),M.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:M.struct([M.u32("instruction"),mu()])}});new ft("Vote111111111111111111111111111111111111111");new ft("Va1idator1nfo111111111111111111111111111111");X({name:Q(),website:ct(Q()),details:ct(Q()),iconUrl:ct(Q()),keybaseUsername:ct(Q())});new ft("Vote111111111111111111111111111111111111111");M.struct([bt("nodePubkey"),bt("authorizedWithdrawer"),M.u8("commission"),M.nu64(),M.seq(M.struct([M.nu64("slot"),M.u32("confirmationCount")]),M.offset(M.u32(),-8),"votes"),M.u8("rootSlotValid"),M.nu64("rootSlot"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),bt("authorizedVoter")]),M.offset(M.u32(),-8),"authorizedVoters"),M.struct([M.seq(M.struct([bt("authorizedPubkey"),M.nu64("epochOfLastAuthorizedSwitch"),M.nu64("targetEpoch")]),32,"buf"),M.nu64("idx"),M.u8("isEmpty")],"priorVoters"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),M.nu64("credits"),M.nu64("prevCredits")]),M.offset(M.u32(),-8),"epochCredits"),M.struct([M.nu64("slot"),M.nu64("timestamp")],"lastTimestamp")]);const il=1e9;export{Es as AddressLookupTableAccount,Uu as BLOCKHASH_CACHE_TIMEOUT_MS,nl as Connection,ku as EpochSchedule,Su as FeeCalculatorLayout,il as LAMPORTS_PER_SOL,Io as Lockup,lu as MAX_SEED_LENGTH,Ge as Message,Gr as MessageAccountKeys,jr as MessageV0,bs as NONCE_ACCOUNT_LENGTH,Bi as NonceAccount,ar as PACKET_DATA_SIZE,Ve as PUBLIC_KEY_LENGTH,ft as PublicKey,fo as SIGNATURE_LENGTH_IN_BYTES,Or as SOLANA_SCHEMA,ve as SYSTEM_INSTRUCTION_LAYOUTS,Yn as SYSVAR_RECENT_BLOCKHASHES_PUBKEY,ys as SYSVAR_RENT_PUBKEY,ws as SendTransactionError,at as SolanaJSONRPCError,fu as Struct,Zr as SystemProgram,Pe as Transaction,lo as TransactionExpiredBlockheightExceededError,yr as TransactionExpiredNonceInvalidError,ho as TransactionExpiredTimeoutError,Ae as TransactionInstruction,Ke as TransactionStatus,uo as VERSION_PREFIX_MASK};
